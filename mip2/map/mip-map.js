require.config({paths:{mipComponentsWepackHelpers:"https://c.mipcdn.com/static/v2/mip-components-webpack-helpers"}}),require(["mipComponentsWepackHelpers"],function(t){var n=function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=69)}({0:function(n,e){n.exports=t["vue-loader/lib/runtime/componentNormalizer"]},2:function(n,e){n.exports=t["vue-style-loader/lib/addStylesClient"]},3:function(n,e){n.exports=t["css-loader/lib/css-base"]},4:function(t,n){t.exports=Promise},45:function(t,n,e){var i=e(89);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),(0,e(2).default)("6d669f0b",i,!1,{})},69:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"wrapper",class:{hideMap:this.hideMap},attrs:{id:"allmap"}})};i._withStripped=!0;var o=e(4),r=e.n(o),a={props:{ak:{type:String,default:""},location:{type:Object,default:function(){return null}},controls:{type:Object,default:function(){return null}},info:{type:Object,default:function(){return null}},getPosition:{type:Boolean,default:!1},dataOnlyGetSdk:{type:Boolean,default:!1},hideMap:{type:Boolean,default:!1}},data:function(){return{map:null,point:{},marker:null,currentMarker:null}},firstInviewCallback:function(){this.init()},methods:{init:function(){var t=this;this.getMapJDK().then(function(){t.resolveOptions()})},getMapJDK:function(){var t=this;return window.BMap?window.BMap._insertScript?window.BMap._insertScript:r.a.resolve(window.BMap):(window.BMap={},window.BMap._insertScript=new r.a(function(n){window._initBaiduMap=function(){n(window.BMap),window.document.body.removeChild(e),window.BMap._insertScript=null,window._initBaiduMap=null};var e=document.createElement("script");window.document.body.appendChild(e),e.src="https://api.map.baidu.com/api?v=2.0&ak="+t.ak+"&callback=_initBaiduMap"}),window.BMap._insertScript)},resolveOptions:function(){var t=this,n=window.BMap;if(this.dataOnlyGetSdk)return this.loadSdk();this.map=new n.Map("allmap"),this.map.centerAndZoom(new n.Point(116.404,39.915),15),this.hideMap&&this.hideMapView(),this.getPosition?this.getCurrentLocation():this.searchLocation(),this.$on("getLocal",function(){t.getMapJDK().then(function(){t.getCurrentLocation()})}),this.controls&&this.addControls()},hideMapView:function(){var t=this.$element;MIP.util.css(t,{width:0,height:0})},loadSdk:function(){var t=window.BMap;Object.defineProperty(MIP.sandbox,"BMap",{value:t,writable:!1,enumerable:!0,configurable:!0}),this.$emit("loaded",{})},getCurrentLocation:function(){var t=this,n=window.BMap,e=new n.Geolocation;e.getCurrentPosition(function(i){if(!i.accuracy)return t.$emit("getPositionFailed",i);e.getStatus()===window.BMAP_STATUS_SUCCESS&&(t.currentMarker=new n.Marker(i.point),t.map.addOverlay(t.currentMarker),t.map.panTo(i.point),t.$emit("getPositionComplete",i))},{enableHighAccuracy:!0})},searchLocation:function(){var t=this,n=window.BMap,e=this.location,i=this.map,o=this.traverseAndConcat(e);if(!o||!this.location.city)return this.getCurrentLocation(),void this.$emit("searchLocalFailed",{});var r={onSearchComplete:function(e){if(a.getStatus()===window.BMAP_STATUS_SUCCESS){var o=e.getPoi(0);if(t.point=o.point,o&&t.point){t.marker=new n.Marker(t.point);var r=t.marker,c=t.point;i.addOverlay(r),i.centerAndZoom(c,15),t.setInfoWindow()}}}},a=new n.LocalSearch(i,r);a.search(o)},setInfoWindow:function(){var t=window.BMap,n=this.info,e=this.map,i=this.marker,o=this.point;if(n){var r=new t.InfoWindow(n.content,n);i.addEventListener("click",function(){e.openInfoWindow(r,o)})}},addControls:function(){var t=window.BMap,n=this.controls,e=this.map;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i]||{},r=t[i];r&&e.addControl(new r(o))}},traverseAndConcat:function(t){var n="";for(var e in t)t.hasOwnProperty(e)&&t[e]&&(n+=t[e]);return n}}},c=(e(90),e(0)),u=e.n(c)()(a,i,[],!1,null,"0f7f3812",null);n.default=u.exports},89:function(t,n,e){(t.exports=e(3)(!1)).push([t.i,"\n#allmap[data-v-0f7f3812] {\n  width: 100%;\n  height: 100%;\n}\n#allmap.hideMap[data-v-0f7f3812] {\n  width: 0;\n  height: 0;\n  visibility: hidden;\n}\n#allmap[data-v-0f7f3812] img {\n  width: auto;\n}\n",""])},90:function(t,n,e){"use strict";var i=e(45);e.n(i).a}});n=n.default||n,MIP["function"==typeof n?"registerCustomElement":"registerVueCustomElement"]("mip-map",n)});