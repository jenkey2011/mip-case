(window.MIP=window.MIP||[]).push({name:"mip-story",func:function(){define("mip-story/audio",["require","util"],function(require){"use strict";var util=require("util");function Audio(){}return Audio.prototype.build=function(ele,audioSrc){if(audioSrc){var audioEl=document.createElement("audio");return audioEl.setAttribute("src",audioSrc),audioEl.setAttribute("preload","auto"),audioEl.setAttribute("loop",""),audioEl.setAttribute("autoplay",""),util.css(audioEl,{display:"hidden"}),ele.appendChild(audioEl),audioEl}},Audio}),define("mip-story/jsmpeg/jsmpeg",["require"],function(require){var JSMpeg={Player:null,VideoElement:null,BitBuffer:null,Source:{},Demuxer:{},Decoder:{},Renderer:{},AudioOutput:{},Now:function(){return window.performance?window.performance.now()/1e3:Date.now()/1e3},CreateVideoElements:function(){for(var elements=document.querySelectorAll(".jsmpeg"),i=0;i<elements.length;i++)new JSMpeg.VideoElement(elements[i])},Fill:function(array,value){if(array.fill)array.fill(value);else for(var i=0;i<array.length;i++)array[i]=value}};return JSMpeg.Player=function(){"use strict";var Player=function(url,options){this.options=options||{},options.source?(this.source=new options.source(url,options),options.streaming=!!this.source.streaming):url.match(/^wss?:\/\//)?(this.source=new JSMpeg.Source.WebSocket(url,options),options.streaming=!0):(this.source=new JSMpeg.Source.Ajax(url,options),options.streaming=!1),this.maxAudioLag=options.maxAudioLag||.25,this.loop=!1!==options.loop,this.autoplay=!!options.autoplay||options.streaming,this.demuxer=new JSMpeg.Demuxer.TS(options),this.source.connect(this.demuxer),!1!==options.video&&(this.video=new JSMpeg.Decoder.MPEG1Video(options),this.renderer=!options.disableGl&&JSMpeg.Renderer.WebGL.IsSupported()?new JSMpeg.Renderer.WebGL(options):new JSMpeg.Renderer.Canvas2D(options),this.demuxer.connect(JSMpeg.Demuxer.TS.STREAM.VIDEO_1,this.video),this.video.connect(this.renderer)),!1!==options.audio&&JSMpeg.AudioOutput.WebAudio.IsSupported()&&(this.audio=new JSMpeg.Decoder.MP2Audio(options),this.audioOut=new JSMpeg.AudioOutput.WebAudio(options),this.demuxer.connect(JSMpeg.Demuxer.TS.STREAM.AUDIO_1,this.audio),this.audio.connect(this.audioOut)),Object.defineProperty(this,"currentTime",{get:this.getCurrentTime,set:this.setCurrentTime}),Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this.unpauseOnShow=!1,!1!==options.pauseWhenHidden&&document.addEventListener("visibilitychange",this.showHide.bind(this)),this.source.start(),this.autoplay&&this.play()};return Player.prototype.showHide=function(ev){"hidden"===document.visibilityState?(this.unpauseOnShow=this.wantsToPlay,this.pause()):this.unpauseOnShow&&this.play()},Player.prototype.on=function(eventName,callback){this.options.canvas.addEventListener(eventName,callback,!1)},Player.prototype.off=function(eventName){this.options.canvas.removeEventListener(eventName)},Player.prototype.trigger=function(eventName){var event=new Event(eventName);this.options.canvas.dispatchEvent(event)},Player.prototype.play=function(ev){this.animationId=requestAnimationFrame(this.update.bind(this)),this.wantsToPlay=!0,this.playingSign=!1,this.trigger("play")},Player.prototype.pause=function(ev){cancelAnimationFrame(this.animationId),this.wantsToPlay=!1,this.isPlaying=!1,this.playingSign=!1,this.audio&&this.audio.canPlay&&(this.audioOut.stop(),this.seek(this.currentTime))},Player.prototype.getVolume=function(){return this.audioOut?this.audioOut.volume:0},Player.prototype.setVolume=function(volume){this.audioOut&&(this.audioOut.volume=volume)},Player.prototype.stop=function(ev){this.pause(),this.seek(0),this.video&&!1!==this.options.decodeFirstFrame&&this.video.decode()},Player.prototype.destroy=function(){this.pause(),this.source.destroy(),this.renderer.destroy(),this.audioOut.destroy()},Player.prototype.seek=function(time){var startOffset=this.audio&&this.audio.canPlay?this.audio.startTime:this.video.startTime;this.video&&this.video.seek(time+startOffset),this.audio&&this.audio.seek(time+startOffset),this.startTime=JSMpeg.Now()-time},Player.prototype.getCurrentTime=function(){return this.audio&&this.audio.canPlay?this.audio.currentTime-this.audio.startTime:this.video.currentTime-this.video.startTime},Player.prototype.setCurrentTime=function(time){this.seek(time)},Player.prototype.update=function(){this.animationId=requestAnimationFrame(this.update.bind(this)),this.source.established?(this.isPlaying||(this.isPlaying=!0,this.startTime=JSMpeg.Now()-this.currentTime),this.options.streaming?this.updateForStreaming():(this.updateForStaticFile(),this.options.playingCallBack&&this.options.playingCallBack(this.currentTime))):this.renderer&&this.renderer.renderProgress(this.source.progress)},Player.prototype.updateForStreaming=function(){if(this.video&&this.video.decode(),this.audio){var decoded=!1;do{this.audioOut.enqueuedTime>this.maxAudioLag&&(this.audioOut.resetEnqueuedTime(),this.audioOut.enabled=!1),decoded=this.audio.decode()}while(decoded);this.audioOut.enabled=!0}},Player.prototype.updateForStaticFile=function(){var notEnoughData=!1,headroom=0;if(this.video.currentTime>0&&(this.playingSign||(this.playingSign=!0,this.trigger("playing"))),this.audio&&this.audio.canPlay){for(;!notEnoughData&&this.audio.decodedTime-this.audio.currentTime<.25;)notEnoughData=!this.audio.decode();this.video&&this.video.currentTime<this.audio.currentTime&&(notEnoughData=!this.video.decode()),headroom=this.demuxer.currentTime-this.audio.currentTime}else if(this.video){var targetTime=JSMpeg.Now()-this.startTime+this.video.startTime,lateTime=targetTime-this.video.currentTime,frameTime=1/this.video.frameRate;this.video&&lateTime>0&&(lateTime>2*frameTime&&(this.startTime+=lateTime),notEnoughData=!this.video.decode()),headroom=this.demuxer.currentTime-targetTime}this.source.resume(headroom),notEnoughData&&this.source.completed&&(this.loop?this.seek(0):this.pause(),this.trigger("end"))},Player}(),JSMpeg.BitBuffer=function(){"use strict";var BitBuffer=function(bufferOrLength,mode){"object"==typeof bufferOrLength?(this.bytes=bufferOrLength instanceof Uint8Array?bufferOrLength:new Uint8Array(bufferOrLength),this.byteLength=this.bytes.length):(this.bytes=new Uint8Array(bufferOrLength||1048576),this.byteLength=0),this.mode=mode||BitBuffer.MODE.EXPAND,this.index=0};return BitBuffer.prototype.resize=function(size){var newBytes=new Uint8Array(size);0!==this.byteLength&&(this.byteLength=Math.min(this.byteLength,size),newBytes.set(this.bytes,0,this.byteLength)),this.bytes=newBytes,this.index=Math.min(this.index,this.byteLength<<3)},BitBuffer.prototype.evict=function(sizeNeeded){var bytePos=this.index>>3,available=this.bytes.length-this.byteLength;if(this.index===this.byteLength<<3||sizeNeeded>available+bytePos)return this.byteLength=0,void(this.index=0);0!==bytePos&&(this.bytes.copyWithin?this.bytes.copyWithin(0,bytePos,this.byteLength):this.bytes.set(this.bytes.subarray(bytePos,this.byteLength)),this.byteLength=this.byteLength-bytePos,this.index-=bytePos<<3)},BitBuffer.prototype.write=function(buffers){var isArrayOfBuffers="object"==typeof buffers[0],totalLength=0,available=this.bytes.length-this.byteLength;if(isArrayOfBuffers)for(var totalLength=0,i=0;i<buffers.length;i++)totalLength+=buffers[i].byteLength;else totalLength=buffers.byteLength;if(totalLength>available)if(this.mode===BitBuffer.MODE.EXPAND){var newSize=Math.max(2*this.bytes.length,totalLength-available);this.resize(newSize)}else this.evict(totalLength);if(isArrayOfBuffers)for(var i=0;i<buffers.length;i++)this.appendSingleBuffer(buffers[i]);else this.appendSingleBuffer(buffers)},BitBuffer.prototype.appendSingleBuffer=function(buffer){buffer=buffer instanceof Uint8Array?buffer:new Uint8Array(buffer),this.bytes.set(buffer,this.byteLength),this.byteLength+=buffer.length},BitBuffer.prototype.findNextStartCode=function(){for(var i=this.index+7>>3;i<this.byteLength;i++)if(0==this.bytes[i]&&0==this.bytes[i+1]&&1==this.bytes[i+2])return this.index=i+4<<3,this.bytes[i+3];return this.index=this.byteLength<<3,-1},BitBuffer.prototype.findStartCode=function(code){for(var current=0;;)if((current=this.findNextStartCode())===code||-1===current)return current;return-1},BitBuffer.prototype.nextBytesAreStartCode=function(){var i=this.index+7>>3;return i>=this.byteLength||0==this.bytes[i]&&0==this.bytes[i+1]&&1==this.bytes[i+2]},BitBuffer.prototype.peek=function(count){for(var offset=this.index,value=0;count;){var currentByte,remaining=8-(7&offset),read=remaining<count?remaining:count,shift=remaining-read,mask;value=value<<read|(this.bytes[offset>>3]&255>>8-read<<shift)>>shift,offset+=read,count-=read}return value},BitBuffer.prototype.read=function(count){var value=this.peek(count);return this.index+=count,value},BitBuffer.prototype.skip=function(count){return this.index+=count},BitBuffer.prototype.rewind=function(count){this.index=Math.max(this.index-count,0)},BitBuffer.prototype.has=function(count){return(this.byteLength<<3)-this.index>=count},BitBuffer.MODE={EVICT:1,EXPAND:2},BitBuffer}(),JSMpeg.Source.Ajax=function(){"use strict";var AjaxSource=function(url,options){this.url=url,this.destination=null,this.request=null,this.completed=!1,this.established=!1,this.progress=0};return AjaxSource.prototype.connect=function(destination){this.destination=destination},AjaxSource.prototype.start=function(){this.request=new XMLHttpRequest,this.request.onreadystatechange=function(){this.request.readyState===this.request.DONE&&200===this.request.status&&this.onLoad(this.request.response)}.bind(this),this.request.onprogress=this.onProgress.bind(this),this.request.open("GET",this.url),this.request.responseType="arraybuffer",this.request.send()},AjaxSource.prototype.resume=function(secondsHeadroom){},AjaxSource.prototype.destroy=function(){this.request.abort()},AjaxSource.prototype.onProgress=function(ev){this.progress=ev.loaded/ev.total},AjaxSource.prototype.onLoad=function(data){this.established=!0,this.completed=!0,this.progress=1,this.destination&&this.destination.write(data)},AjaxSource}(),JSMpeg.Source.AjaxProgressive=function(){"use strict";var AjaxProgressiveSource=function(url,options){this.url=url,this.destination=null,this.request=null,this.completed=!1,this.established=!1,this.progress=0,this.fileSize=0,this.loadedSize=0,this.chunkSize=options.chunkSize||1048576,this.isLoading=!1,this.loadStartTime=0,this.throttled=!1!==options.throttled,this.aborted=!1};return AjaxProgressiveSource.prototype.connect=function(destination){this.destination=destination},AjaxProgressiveSource.prototype.start=function(){this.request=new XMLHttpRequest,this.request.onreadystatechange=function(){this.request.readyState===this.request.DONE&&(this.fileSize=parseInt(this.request.getResponseHeader("Content-Length")),this.loadNextChunk())}.bind(this),this.request.onprogress=this.onProgress.bind(this),this.request.open("HEAD",this.url),this.request.send()},AjaxProgressiveSource.prototype.resume=function(secondsHeadroom){var worstCaseLoadingTime;!this.isLoading&&this.throttled&&(8*this.loadTime+2>secondsHeadroom&&this.loadNextChunk())},AjaxProgressiveSource.prototype.destroy=function(){this.request.abort(),this.aborted=!0},AjaxProgressiveSource.prototype.loadNextChunk=function(){var start=this.loadedSize,end=Math.min(this.loadedSize+this.chunkSize-1,this.fileSize-1);start>=this.fileSize||this.aborted?this.completed=!0:(this.isLoading=!0,this.loadStartTime=JSMpeg.Now(),this.request=new XMLHttpRequest,this.request.onreadystatechange=function(){this.request.readyState===this.request.DONE&&this.request.status>=200&&this.request.status<300?this.onChunkLoad(this.request.response):this.request.readyState===this.request.DONE&&this.loadFails++<3&&this.loadNextChunk()}.bind(this),0===start&&(this.request.onprogress=this.onProgress.bind(this)),this.request.open("GET",this.url+"?"+start+"-"+end),this.request.setRequestHeader("Range","bytes="+start+"-"+end),this.request.responseType="arraybuffer",this.request.send())},AjaxProgressiveSource.prototype.onProgress=function(ev){this.progress=ev.loaded/ev.total},AjaxProgressiveSource.prototype.onChunkLoad=function(data){this.established=!0,this.progress=1,this.loadedSize+=data.byteLength,this.loadFails=0,this.isLoading=!1,this.destination&&this.destination.write(data),this.loadTime=JSMpeg.Now()-this.loadStartTime,this.throttled||this.loadNextChunk()},AjaxProgressiveSource}(),JSMpeg.Source.WebSocket=function(){"use strict";var WSSource=function(url,options){this.url=url,this.options=options,this.socket=null,this.callbacks={connect:[],data:[]},this.destination=null,this.reconnectInterval=void 0!==options.reconnectInterval?options.reconnectInterval:5,this.shouldAttemptReconnect=!!this.reconnectInterval,this.completed=!1,this.established=!1,this.progress=0,this.reconnectTimeoutId=0};return WSSource.prototype.connect=function(destination){this.destination=destination},WSSource.prototype.destroy=function(){clearTimeout(this.reconnectTimeoutId),this.shouldAttemptReconnect=!1,this.socket.close()},WSSource.prototype.start=function(){this.shouldAttemptReconnect=!!this.reconnectInterval,this.progress=0,this.established=!1,this.socket=new WebSocket(this.url,this.options.protocols||null),this.socket.binaryType="arraybuffer",this.socket.onmessage=this.onMessage.bind(this),this.socket.onopen=this.onOpen.bind(this),this.socket.onerror=this.onClose.bind(this),this.socket.onclose=this.onClose.bind(this)},WSSource.prototype.resume=function(secondsHeadroom){},WSSource.prototype.onOpen=function(){this.progress=1,this.established=!0},WSSource.prototype.onClose=function(){this.shouldAttemptReconnect&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(function(){this.start()}.bind(this),1e3*this.reconnectInterval))},WSSource.prototype.onMessage=function(ev){this.destination&&this.destination.write(ev.data)},WSSource}(),JSMpeg.Demuxer.TS=function(){"use strict";var TS=function(options){this.bits=null,this.leftoverBytes=null,this.guessVideoFrameEnd=!0,this.pidsToStreamIds={},this.pesPacketInfo={},this.startTime=0,this.currentTime=0};return TS.prototype.connect=function(streamId,destination){this.pesPacketInfo[streamId]={destination:destination,currentLength:0,totalLength:0,pts:0,buffers:[]}},TS.prototype.write=function(buffer){if(this.leftoverBytes){var totalLength=buffer.byteLength+this.leftoverBytes.byteLength;this.bits=new JSMpeg.BitBuffer(totalLength),this.bits.write([this.leftoverBytes,buffer])}else this.bits=new JSMpeg.BitBuffer(buffer);for(;this.bits.has(1504)&&this.parsePacket(););var leftoverCount=this.bits.byteLength-(this.bits.index>>3);this.leftoverBytes=leftoverCount>0?this.bits.bytes.subarray(this.bits.index>>3):null},TS.prototype.parsePacket=function(){if(71!==this.bits.read(8)&&!this.resync())return!1;var end=187+(this.bits.index>>3),transportError=this.bits.read(1),payloadStart=this.bits.read(1),transportPriority=this.bits.read(1),pid=this.bits.read(13),transportScrambling=this.bits.read(2),adaptationField=this.bits.read(2),continuityCounter=this.bits.read(4),streamId=this.pidsToStreamIds[pid],pi;payloadStart&&streamId&&((pi=this.pesPacketInfo[streamId])&&pi.currentLength&&this.packetComplete(pi));if(1&adaptationField){if(2&adaptationField){var adaptationFieldLength=this.bits.read(8);this.bits.skip(adaptationFieldLength<<3)}if(payloadStart&&this.bits.nextBytesAreStartCode()){this.bits.skip(24),streamId=this.bits.read(8),this.pidsToStreamIds[pid]=streamId;var packetLength=this.bits.read(16);this.bits.skip(8);var ptsDtsFlag=this.bits.read(2);this.bits.skip(6);var headerLength=this.bits.read(8),payloadBeginIndex=this.bits.index+(headerLength<<3),pi;if(pi=this.pesPacketInfo[streamId]){var pts=0;if(2&ptsDtsFlag){this.bits.skip(4);var p32_30=this.bits.read(3);this.bits.skip(1);var p29_15=this.bits.read(15);this.bits.skip(1);var p14_0=this.bits.read(15);this.bits.skip(1),pts=(1073741824*p32_30+32768*p29_15+p14_0)/9e4,this.currentTime=pts,-1===this.startTime&&(this.startTime=pts)}var payloadLength=packetLength?packetLength-headerLength-3:0;this.packetStart(pi,pts,payloadLength)}this.bits.index=payloadBeginIndex}var pi;if(streamId)if(pi=this.pesPacketInfo[streamId]){var start=this.bits.index>>3,complete,hasPadding=!payloadStart&&2&adaptationField;(this.packetAddData(pi,start,end)||this.guessVideoFrameEnd&&hasPadding)&&this.packetComplete(pi)}}return this.bits.index=end<<3,!0},TS.prototype.resync=function(){if(!this.bits.has(9024))return!1;for(var byteIndex=this.bits.index>>3,i=0;i<187;i++)if(71===this.bits.bytes[byteIndex+i]){for(var foundSync=!0,j=1;j<5;j++)if(71!==this.bits.bytes[byteIndex+i+188*j]){foundSync=!1;break}if(foundSync)return this.bits.index=byteIndex+i+1<<3,!0}return console.warn("JSMpeg: Possible garbage data. Skipping."),this.bits.skip(1496),!1},TS.prototype.packetStart=function(pi,pts,payloadLength){pi.totalLength=payloadLength,pi.currentLength=0,pi.pts=pts},TS.prototype.packetAddData=function(pi,start,end){var complete;return pi.buffers.push(this.bits.bytes.subarray(start,end)),pi.currentLength+=end-start,0!==pi.totalLength&&pi.currentLength>=pi.totalLength},TS.prototype.packetComplete=function(pi){pi.destination.write(pi.pts,pi.buffers),pi.totalLength=0,pi.currentLength=0,pi.buffers=[]},TS.STREAM={PACK_HEADER:186,SYSTEM_HEADER:187,PROGRAM_MAP:188,PRIVATE_1:189,PADDING:190,PRIVATE_2:191,AUDIO_1:192,VIDEO_1:224,DIRECTORY:255},TS}(),JSMpeg.Decoder.Base=function(){"use strict";var BaseDecoder=function(options){this.destination=null,this.canPlay=!1,this.collectTimestamps=!options.streaming,this.timestamps=[],this.timestampIndex=0,this.startTime=0,this.decodedTime=0,Object.defineProperty(this,"currentTime",{get:this.getCurrentTime})};return BaseDecoder.prototype.connect=function(destination){this.destination=destination},BaseDecoder.prototype.write=function(pts,buffers){this.collectTimestamps&&(0===this.timestamps.length&&(this.startTime=pts,this.decodedTime=pts),this.timestamps.push({index:this.bits.byteLength<<3,time:pts})),this.bits.write(buffers),this.canPlay=!0},BaseDecoder.prototype.seek=function(time){if(this.collectTimestamps){this.timestampIndex=0;for(var i=0;i<this.timestamps.length&&!(this.timestamps[i].time>time);i++)this.timestampIndex=i;var ts=this.timestamps[this.timestampIndex];ts?(this.bits.index=ts.index,this.decodedTime=ts.time):(this.bits.index=0,this.decodedTime=this.startTime)}},BaseDecoder.prototype.decode=function(){this.advanceDecodedTime(0)},BaseDecoder.prototype.advanceDecodedTime=function(seconds){if(this.collectTimestamps){for(var newTimestampIndex=-1,i=this.timestampIndex;i<this.timestamps.length&&!(this.timestamps[i].index>this.bits.index);i++)newTimestampIndex=i;if(-1!==newTimestampIndex&&newTimestampIndex!==this.timestampIndex)return this.timestampIndex=newTimestampIndex,void(this.decodedTime=this.timestamps[this.timestampIndex].time)}this.decodedTime+=seconds},BaseDecoder.prototype.getCurrentTime=function(){return this.decodedTime},BaseDecoder}(),JSMpeg.Decoder.MPEG1Video=function(){"use strict";var MPEG1=function(options){JSMpeg.Decoder.Base.call(this,options);var bufferSize=options.videoBufferSize||524288,bufferMode=options.streaming?JSMpeg.BitBuffer.MODE.EVICT:JSMpeg.BitBuffer.MODE.EXPAND;this.bits=new JSMpeg.BitBuffer(bufferSize,bufferMode),this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.currentFrame=0,this.decodeFirstFrame=!1!==options.decodeFirstFrame};return(MPEG1.prototype=Object.create(JSMpeg.Decoder.Base.prototype)).constructor=MPEG1,MPEG1.prototype.write=function(pts,buffers){if(JSMpeg.Decoder.Base.prototype.write.call(this,pts,buffers),!this.hasSequenceHeader){if(-1===this.bits.findStartCode(MPEG1.START.SEQUENCE))return!1;this.decodeSequenceHeader(),this.decodeFirstFrame&&this.decode()}},MPEG1.prototype.decode=function(){if(!this.hasSequenceHeader)return!1;if(-1===this.bits.findStartCode(MPEG1.START.PICTURE)){var bufferedBytes=this.bits.byteLength-(this.bits.index>>3);return!1}return this.decodePicture(),this.advanceDecodedTime(1/this.frameRate),!0},MPEG1.prototype.readHuffman=function(codeTable){var state=0;do{state=codeTable[state+this.bits.read(1)]}while(state>=0&&0!==codeTable[state]);return codeTable[state+2]},MPEG1.prototype.frameRate=30,MPEG1.prototype.decodeSequenceHeader=function(){var newWidth=this.bits.read(12),newHeight=this.bits.read(12);if(this.bits.skip(4),this.frameRate=MPEG1.PICTURE_RATE[this.bits.read(4)],this.bits.skip(30),newWidth===this.width&&newHeight===this.height||(this.width=newWidth,this.height=newHeight,this.initBuffers(),this.destination&&this.destination.resize(newWidth,newHeight)),this.bits.read(1)){for(var i=0;i<64;i++)this.customIntraQuantMatrix[MPEG1.ZIG_ZAG[i]]=this.bits.read(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.bits.read(1)){for(var i=0;i<64;i++){var idx=MPEG1.ZIG_ZAG[i];this.customNonIntraQuantMatrix[idx]=this.bits.read(8)}this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}this.hasSequenceHeader=!0},MPEG1.prototype.initBuffers=function(){this.intraQuantMatrix=MPEG1.DEFAULT_INTRA_QUANT_MATRIX,this.nonIntraQuantMatrix=MPEG1.DEFAULT_NON_INTRA_QUANT_MATRIX,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.currentY=new Uint8ClampedArray(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new Uint8ClampedArray(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new Uint8ClampedArray(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new Uint8ClampedArray(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new Uint8ClampedArray(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new Uint8ClampedArray(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer)},MPEG1.prototype.currentY=null,MPEG1.prototype.currentCr=null,MPEG1.prototype.currentCb=null,MPEG1.prototype.pictureType=0,MPEG1.prototype.forwardY=null,MPEG1.prototype.forwardCr=null,MPEG1.prototype.forwardCb=null,MPEG1.prototype.fullPelForward=!1,MPEG1.prototype.forwardFCode=0,MPEG1.prototype.forwardRSize=0,MPEG1.prototype.forwardF=0,MPEG1.prototype.decodePicture=function(skipOutput){if(this.currentFrame++,this.bits.skip(10),this.pictureType=this.bits.read(3),this.bits.skip(16),!(this.pictureType<=0||this.pictureType>=MPEG1.PICTURE_TYPE.B)){if(this.pictureType===MPEG1.PICTURE_TYPE.PREDICTIVE){if(this.fullPelForward=this.bits.read(1),this.forwardFCode=this.bits.read(3),0===this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var code=0;do{code=this.bits.findNextStartCode()}while(code===MPEG1.START.EXTENSION||code===MPEG1.START.USER_DATA);for(;code>=MPEG1.START.SLICE_FIRST&&code<=MPEG1.START.SLICE_LAST;)this.decodeSlice(255&code),code=this.bits.findNextStartCode();if(-1!==code&&this.bits.rewind(32),this.destination&&this.destination.render(this.currentY,this.currentCr,this.currentCb),this.pictureType===MPEG1.PICTURE_TYPE.INTRA||this.pictureType===MPEG1.PICTURE_TYPE.PREDICTIVE){var tmpY=this.forwardY,tmpY32=this.forwardY32,tmpCr=this.forwardCr,tmpCr32=this.forwardCr32,tmpCb=this.forwardCb,tmpCb32=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=tmpY,this.currentY32=tmpY32,this.currentCr=tmpCr,this.currentCr32=tmpCr32,this.currentCb=tmpCb,this.currentCb32=tmpCb32}}},MPEG1.prototype.quantizerScale=0,MPEG1.prototype.sliceBegin=!1,MPEG1.prototype.decodeSlice=function(slice){for(this.sliceBegin=!0,this.macroblockAddress=(slice-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.bits.read(5);this.bits.read(1);)this.bits.skip(8);do{this.decodeMacroblock()}while(!this.bits.nextBytesAreStartCode())},MPEG1.prototype.macroblockAddress=0,MPEG1.prototype.mbRow=0,MPEG1.prototype.mbCol=0,MPEG1.prototype.macroblockType=0,MPEG1.prototype.macroblockIntra=!1,MPEG1.prototype.macroblockMotFw=!1,MPEG1.prototype.motionFwH=0,MPEG1.prototype.motionFwV=0,MPEG1.prototype.motionFwHPrev=0,MPEG1.prototype.motionFwVPrev=0,MPEG1.prototype.decodeMacroblock=function(){for(var increment=0,t=this.readHuffman(MPEG1.MACROBLOCK_ADDRESS_INCREMENT);34===t;)t=this.readHuffman(MPEG1.MACROBLOCK_ADDRESS_INCREMENT);for(;35===t;)increment+=33,t=this.readHuffman(MPEG1.MACROBLOCK_ADDRESS_INCREMENT);if(increment+=t,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=increment;else{if(this.macroblockAddress+increment>=this.mbSize)return;for(increment>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureType===MPEG1.PICTURE_TYPE.PREDICTIVE&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));increment>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),increment--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth;var mbTable=MPEG1.MACROBLOCK_TYPE[this.pictureType];this.macroblockType=this.readHuffman(mbTable),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.bits.read(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var cbp=0!=(2&this.macroblockType)?this.readHuffman(MPEG1.CODE_BLOCK_PATTERN):this.macroblockIntra?63:0,block=0,mask=32;block<6;block++)0!=(cbp&mask)&&this.decodeBlock(block),mask>>=1},MPEG1.prototype.decodeMotionVectors=function(){var code,d,r=0;this.macroblockMotFw?(0!==(code=this.readHuffman(MPEG1.MOTION))&&1!==this.forwardF?(r=this.bits.read(this.forwardRSize),d=(Math.abs(code)-1<<this.forwardRSize)+r+1,code<0&&(d=-d)):d=code,this.motionFwHPrev+=d,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),0!==(code=this.readHuffman(MPEG1.MOTION))&&1!==this.forwardF?(r=this.bits.read(this.forwardRSize),d=(Math.abs(code)-1<<this.forwardRSize)+r+1,code<0&&(d=-d)):d=code,this.motionFwVPrev+=d,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureType===MPEG1.PICTURE_TYPE.PREDICTIVE&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},MPEG1.prototype.copyMacroblock=function(motionH,motionV,sY,sCr,sCb){var width,scan,H,V,oddH,oddV,src,dest,last,dY=this.currentY32,dCb=this.currentCb32,dCr=this.currentCr32,x,y1,y2,y,cr1,cr2,cr,cb1,cb2,cb;if(scan=(width=this.codedWidth)-16,H=motionH>>1,V=motionV>>1,oddH=1==(1&motionH),oddV=1==(1&motionV),src=((this.mbRow<<4)+V)*width+(this.mbCol<<4)+H,last=(dest=this.mbRow*width+this.mbCol<<2)+(width<<2),oddH)if(oddV)for(;dest<last;){for(y1=sY[src]+sY[src+width],src++,x=0;x<4;x++)y=y1+(y2=sY[src]+sY[src+width])+2>>2&255,y|=(y1=sY[++src]+sY[src+width])+y2+2<<6&65280,y|=y1+(y2=sY[++src]+sY[src+width])+2<<14&16711680,y1=sY[++src]+sY[src+width],src++,y|=y1+y2+2<<22&4278190080,dY[dest++]=y;dest+=scan>>2,src+=scan-1}else for(;dest<last;){for(y1=sY[src++],x=0;x<4;x++)y=y1+(y2=sY[src++])+1>>1&255,y|=(y1=sY[src++])+y2+1<<7&65280,y|=y1+(y2=sY[src++])+1<<15&16711680,y|=(y1=sY[src++])+y2+1<<23&4278190080,dY[dest++]=y;dest+=scan>>2,src+=scan-1}else if(oddV)for(;dest<last;){for(x=0;x<4;x++)y=sY[src]+sY[src+width]+1>>1&255,y|=sY[++src]+sY[src+width]+1<<7&65280,y|=sY[++src]+sY[src+width]+1<<15&16711680,y|=sY[++src]+sY[src+width]+1<<23&4278190080,src++,dY[dest++]=y;dest+=scan>>2,src+=scan}else for(;dest<last;){for(x=0;x<4;x++)y=sY[src],y|=sY[++src]<<8,y|=sY[++src]<<16,y|=sY[++src]<<24,src++,dY[dest++]=y;dest+=scan>>2,src+=scan}if(scan=(width=this.halfWidth)-8,H=motionH/2>>1,V=motionV/2>>1,oddH=1==(motionH/2&1),oddV=1==(motionV/2&1),src=((this.mbRow<<3)+V)*width+(this.mbCol<<3)+H,last=(dest=this.mbRow*width+this.mbCol<<1)+(width<<1),oddH)if(oddV)for(;dest<last;){for(cr1=sCr[src]+sCr[src+width],cb1=sCb[src]+sCb[src+width],src++,x=0;x<2;x++)cr=cr1+(cr2=sCr[src]+sCr[src+width])+2>>2&255,cb=cb1+(cb2=sCb[src]+sCb[src+width])+2>>2&255,cr|=(cr1=sCr[++src]+sCr[src+width])+cr2+2<<6&65280,cb|=(cb1=sCb[src]+sCb[src+width])+cb2+2<<6&65280,cr|=cr1+(cr2=sCr[++src]+sCr[src+width])+2<<14&16711680,cb|=cb1+(cb2=sCb[src]+sCb[src+width])+2<<14&16711680,cr1=sCr[++src]+sCr[src+width],cb1=sCb[src]+sCb[src+width],src++,cr|=cr1+cr2+2<<22&4278190080,cb|=cb1+cb2+2<<22&4278190080,dCr[dest]=cr,dCb[dest]=cb,dest++;dest+=scan>>2,src+=scan-1}else for(;dest<last;){for(cr1=sCr[src],cb1=sCb[src],src++,x=0;x<2;x++)cr=cr1+(cr2=sCr[src])+1>>1&255,cb=cb1+(cb2=sCb[src++])+1>>1&255,cr|=(cr1=sCr[src])+cr2+1<<7&65280,cb|=(cb1=sCb[src++])+cb2+1<<7&65280,cr|=cr1+(cr2=sCr[src])+1<<15&16711680,cb|=cb1+(cb2=sCb[src++])+1<<15&16711680,cr|=(cr1=sCr[src])+cr2+1<<23&4278190080,cb|=(cb1=sCb[src++])+cb2+1<<23&4278190080,dCr[dest]=cr,dCb[dest]=cb,dest++;dest+=scan>>2,src+=scan-1}else if(oddV)for(;dest<last;){for(x=0;x<2;x++)cr=sCr[src]+sCr[src+width]+1>>1&255,cb=sCb[src]+sCb[src+width]+1>>1&255,cr|=sCr[++src]+sCr[src+width]+1<<7&65280,cb|=sCb[src]+sCb[src+width]+1<<7&65280,cr|=sCr[++src]+sCr[src+width]+1<<15&16711680,cb|=sCb[src]+sCb[src+width]+1<<15&16711680,cr|=sCr[++src]+sCr[src+width]+1<<23&4278190080,cb|=sCb[src]+sCb[src+width]+1<<23&4278190080,src++,dCr[dest]=cr,dCb[dest]=cb,dest++;dest+=scan>>2,src+=scan}else for(;dest<last;){for(x=0;x<2;x++)cr=sCr[src],cb=sCb[src],cr|=sCr[++src]<<8,cb|=sCb[src]<<8,cr|=sCr[++src]<<16,cb|=sCb[src]<<16,cr|=sCr[++src]<<24,cb|=sCb[src]<<24,src++,dCr[dest]=cr,dCb[dest]=cb,dest++;dest+=scan>>2,src+=scan}},MPEG1.prototype.dcPredictorY=0,MPEG1.prototype.dcPredictorCr=0,MPEG1.prototype.dcPredictorCb=0,MPEG1.prototype.blockData=null,MPEG1.prototype.decodeBlock=function(block){var n=0,quantMatrix;if(this.macroblockIntra){var predictor,dctSize;if(block<4?(predictor=this.dcPredictorY,dctSize=this.readHuffman(MPEG1.DCT_DC_SIZE_LUMINANCE)):(predictor=4===block?this.dcPredictorCr:this.dcPredictorCb,dctSize=this.readHuffman(MPEG1.DCT_DC_SIZE_CHROMINANCE)),dctSize>0){var differential=this.bits.read(dctSize);this.blockData[0]=0!=(differential&1<<dctSize-1)?predictor+differential:predictor+(-1<<dctSize|differential+1)}else this.blockData[0]=predictor;block<4?this.dcPredictorY=this.blockData[0]:4===block?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,quantMatrix=this.intraQuantMatrix,n=1}else quantMatrix=this.nonIntraQuantMatrix;for(var level=0,destArray,destIndex,scan;;){var run=0,coeff=this.readHuffman(MPEG1.DCT_COEFF);if(1===coeff&&n>0&&0===this.bits.read(1))break;65535===coeff?(run=this.bits.read(6),0===(level=this.bits.read(8))?level=this.bits.read(8):128===level?level=this.bits.read(8)-256:level>128&&(level-=256)):(run=coeff>>8,level=255&coeff,this.bits.read(1)&&(level=-level));var dezigZagged=MPEG1.ZIG_ZAG[n+=run];n++,level<<=1,this.macroblockIntra||(level+=level<0?-1:1),0==(1&(level=level*this.quantizerScale*quantMatrix[dezigZagged]>>4))&&(level-=level>0?1:-1),level>2047?level=2047:level<-2048&&(level=-2048),this.blockData[dezigZagged]=level*MPEG1.PREMULTIPLIER_MATRIX[dezigZagged]}block<4?(destArray=this.currentY,scan=this.codedWidth-8,destIndex=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&block)&&(destIndex+=8),0!=(2&block)&&(destIndex+=this.codedWidth<<3)):(destArray=4===block?this.currentCb:this.currentCr,scan=(this.codedWidth>>1)-8,destIndex=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1===n?(MPEG1.CopyValueToDestination(this.blockData[0]+128>>8,destArray,destIndex,scan),this.blockData[0]=0):(MPEG1.IDCT(this.blockData),MPEG1.CopyBlockToDestination(this.blockData,destArray,destIndex,scan),JSMpeg.Fill(this.blockData,0)):1===n?(MPEG1.AddValueToDestination(this.blockData[0]+128>>8,destArray,destIndex,scan),this.blockData[0]=0):(MPEG1.IDCT(this.blockData),MPEG1.AddBlockToDestination(this.blockData,destArray,destIndex,scan),JSMpeg.Fill(this.blockData,0)),n=0},MPEG1.CopyBlockToDestination=function(block,dest,index,scan){for(var n=0;n<64;n+=8,index+=scan+8)dest[index+0]=block[n+0],dest[index+1]=block[n+1],dest[index+2]=block[n+2],dest[index+3]=block[n+3],dest[index+4]=block[n+4],dest[index+5]=block[n+5],dest[index+6]=block[n+6],dest[index+7]=block[n+7]},MPEG1.AddBlockToDestination=function(block,dest,index,scan){for(var n=0;n<64;n+=8,index+=scan+8)dest[index+0]+=block[n+0],dest[index+1]+=block[n+1],dest[index+2]+=block[n+2],dest[index+3]+=block[n+3],dest[index+4]+=block[n+4],dest[index+5]+=block[n+5],dest[index+6]+=block[n+6],dest[index+7]+=block[n+7]},MPEG1.CopyValueToDestination=function(value,dest,index,scan){for(var n=0;n<64;n+=8,index+=scan+8)dest[index+0]=value,dest[index+1]=value,dest[index+2]=value,dest[index+3]=value,dest[index+4]=value,dest[index+5]=value,dest[index+6]=value,dest[index+7]=value},MPEG1.AddValueToDestination=function(value,dest,index,scan){for(var n=0;n<64;n+=8,index+=scan+8)dest[index+0]+=value,dest[index+1]+=value,dest[index+2]+=value,dest[index+3]+=value,dest[index+4]+=value,dest[index+5]+=value,dest[index+6]+=value,dest[index+7]+=value},MPEG1.IDCT=function(block){for(var b1,b3,b4,b6,b7,tmp1,tmp2,m0,x0,x1,x2,x3,x4,y3,y4,y5,y6,y7,i=0;i<8;++i)b1=block[32+i],b3=block[16+i]+block[48+i],b4=block[40+i]-block[24+i],tmp1=block[8+i]+block[56+i],tmp2=block[24+i]+block[40+i],x0=(x4=(473*(b6=block[8+i]-block[56+i])-196*b4+128>>8)-(b7=tmp1+tmp2))-(362*(tmp1-tmp2)+128>>8),y3=(x1=(m0=block[0+i])-b1)+(x2=(362*(block[16+i]-block[48+i])+128>>8)-b3),y4=(x3=m0+b1)+b3,y5=x1-x2,y6=x3-b3,y7=-x0-(473*b4+196*b6+128>>8),block[0+i]=b7+y4,block[8+i]=x4+y3,block[16+i]=y5-x0,block[24+i]=y6-y7,block[32+i]=y6+y7,block[40+i]=x0+y5,block[48+i]=y3-x4,block[56+i]=y4-b7;for(var i=0;i<64;i+=8)b1=block[4+i],b3=block[2+i]+block[6+i],b4=block[5+i]-block[3+i],tmp1=block[1+i]+block[7+i],tmp2=block[3+i]+block[5+i],x0=(x4=(473*(b6=block[1+i]-block[7+i])-196*b4+128>>8)-(b7=tmp1+tmp2))-(362*(tmp1-tmp2)+128>>8),y3=(x1=(m0=block[0+i])-b1)+(x2=(362*(block[2+i]-block[6+i])+128>>8)-b3),y4=(x3=m0+b1)+b3,y5=x1-x2,y6=x3-b3,y7=-x0-(473*b4+196*b6+128>>8),block[0+i]=b7+y4+128>>8,block[1+i]=x4+y3+128>>8,block[2+i]=y5-x0+128>>8,block[3+i]=y6-y7+128>>8,block[4+i]=y6+y7+128>>8,block[5+i]=x0+y5+128>>8,block[6+i]=y3-x4+128>>8,block[7+i]=y4-b7+128>>8},MPEG1.PICTURE_RATE=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],MPEG1.ZIG_ZAG=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),MPEG1.DEFAULT_INTRA_QUANT_MATRIX=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),MPEG1.DEFAULT_NON_INTRA_QUANT_MATRIX=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),MPEG1.PREMULTIPLIER_MATRIX=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),MPEG1.MACROBLOCK_ADDRESS_INCREMENT=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),MPEG1.MACROBLOCK_TYPE_INTRA=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),MPEG1.MACROBLOCK_TYPE_PREDICTIVE=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),MPEG1.MACROBLOCK_TYPE_B=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),MPEG1.MACROBLOCK_TYPE=[null,MPEG1.MACROBLOCK_TYPE_INTRA,MPEG1.MACROBLOCK_TYPE_PREDICTIVE,MPEG1.MACROBLOCK_TYPE_B],MPEG1.CODE_BLOCK_PATTERN=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),MPEG1.MOTION=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),MPEG1.DCT_DC_SIZE_LUMINANCE=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),MPEG1.DCT_DC_SIZE_CHROMINANCE=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),MPEG1.DCT_COEFF=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),MPEG1.PICTURE_TYPE={INTRA:1,PREDICTIVE:2,B:3},MPEG1.START={SEQUENCE:179,SLICE_FIRST:1,SLICE_LAST:175,PICTURE:0,EXTENSION:181,USER_DATA:178},MPEG1}(),JSMpeg.Decoder.MP2Audio=function(){"use strict";var MP2=function(options){JSMpeg.Decoder.Base.call(this,options);var bufferSize=options.audioBufferSize||131072,bufferMode=options.streaming?JSMpeg.BitBuffer.MODE.EVICT:JSMpeg.BitBuffer.MODE.EXPAND;this.bits=new JSMpeg.BitBuffer(bufferSize,bufferMode),this.left=new Float32Array(1152),this.right=new Float32Array(1152),this.sampleRate=44100,this.D=new Float32Array(1024),this.D.set(MP2.SYNTHESIS_WINDOW,0),this.D.set(MP2.SYNTHESIS_WINDOW,512),this.V=new Float32Array(1024),this.U=new Int32Array(32),this.VPos=0,this.allocation=[new Array(32),new Array(32)],this.scaleFactorInfo=[new Uint8Array(32),new Uint8Array(32)],this.scaleFactor=[new Array(32),new Array(32)],this.sample=[new Array(32),new Array(32)];for(var j=0;j<2;j++)for(var i=0;i<32;i++)this.scaleFactor[j][i]=[0,0,0],this.sample[j][i]=[0,0,0]};return MP2.prototype=Object.create(JSMpeg.Decoder.Base.prototype),MP2.prototype.constructor=MP2,MP2.prototype.decode=function(){var pos=this.bits.index>>3;if(pos>=this.bits.byteLength)return!1;var decoded=this.decodeFrame(this.left,this.right);return this.bits.index=pos+decoded<<3,!!decoded&&(this.destination&&this.destination.play(this.sampleRate,this.left,this.right),this.advanceDecodedTime(this.left.length/this.sampleRate),!0)},MP2.prototype.getCurrentTime=function(){var enqueuedTime=this.destination?this.destination.enqueuedTime:0;return this.decodedTime-enqueuedTime},MP2.prototype.decodeFrame=function(left,right){var sync=this.bits.read(11),version=this.bits.read(2),layer=this.bits.read(2),hasCRC=!this.bits.read(1);if(sync!==MP2.FRAME_SYNC||version!==MP2.VERSION.MPEG_1||layer!==MP2.LAYER.II)return 0;var bitrateIndex=this.bits.read(4)-1;if(bitrateIndex>13)return 0;var sampleRateIndex=this.bits.read(2),sampleRate=MP2.SAMPLE_RATE[sampleRateIndex];if(3===sampleRateIndex)return 0;version===MP2.VERSION.MPEG_2&&(sampleRateIndex+=4,bitrateIndex+=14);var padding=this.bits.read(1),privat=this.bits.read(1),mode=this.bits.read(2),bound=0;mode===MP2.MODE.JOINT_STEREO?bound=this.bits.read(2)+1<<2:(this.bits.skip(2),bound=mode===MP2.MODE.MONO?0:32),this.bits.skip(4),hasCRC&&this.bits.skip(16);var bitrate,sampleRate,frameSize=144e3*MP2.BIT_RATE[bitrateIndex]/(sampleRate=MP2.SAMPLE_RATE[sampleRateIndex])+padding|0,tab3=0,sblimit=0;if(version===MP2.VERSION.MPEG_2)tab3=2,sblimit=30;else{var tab1=mode===MP2.MODE.MONO?0:1,tab2=MP2.QUANT_LUT_STEP_1[tab1][bitrateIndex];sblimit=63&(tab3=MP2.QUANT_LUT_STEP_2[tab2][sampleRateIndex]),tab3>>=6}bound>sblimit&&(bound=sblimit);for(var sb=0;sb<bound;sb++)this.allocation[0][sb]=this.readAllocation(sb,tab3),this.allocation[1][sb]=this.readAllocation(sb,tab3);for(var sb=bound;sb<sblimit;sb++)this.allocation[0][sb]=this.allocation[1][sb]=this.readAllocation(sb,tab3);for(var channels=mode===MP2.MODE.MONO?1:2,sb=0;sb<sblimit;sb++){for(ch=0;ch<channels;ch++)this.allocation[ch][sb]&&(this.scaleFactorInfo[ch][sb]=this.bits.read(2));mode===MP2.MODE.MONO&&(this.scaleFactorInfo[1][sb]=this.scaleFactorInfo[0][sb])}for(var sb=0;sb<sblimit;sb++){for(var ch=0;ch<channels;ch++)if(this.allocation[ch][sb]){var sf=this.scaleFactor[ch][sb];switch(this.scaleFactorInfo[ch][sb]){case 0:sf[0]=this.bits.read(6),sf[1]=this.bits.read(6),sf[2]=this.bits.read(6);break;case 1:sf[0]=sf[1]=this.bits.read(6),sf[2]=this.bits.read(6);break;case 2:sf[0]=sf[1]=sf[2]=this.bits.read(6);break;case 3:sf[0]=this.bits.read(6),sf[1]=sf[2]=this.bits.read(6)}}mode===MP2.MODE.MONO&&(this.scaleFactor[1][sb][0]=this.scaleFactor[0][sb][0],this.scaleFactor[1][sb][1]=this.scaleFactor[0][sb][1],this.scaleFactor[1][sb][2]=this.scaleFactor[0][sb][2])}for(var outPos=0,part=0;part<3;part++)for(var granule=0;granule<4;granule++){for(var sb=0;sb<bound;sb++)this.readSamples(0,sb,part),this.readSamples(1,sb,part);for(var sb=bound;sb<sblimit;sb++)this.readSamples(0,sb,part),this.sample[1][sb][0]=this.sample[0][sb][0],this.sample[1][sb][1]=this.sample[0][sb][1],this.sample[1][sb][2]=this.sample[0][sb][2];for(var sb=sblimit;sb<32;sb++)this.sample[0][sb][0]=0,this.sample[0][sb][1]=0,this.sample[0][sb][2]=0,this.sample[1][sb][0]=0,this.sample[1][sb][1]=0,this.sample[1][sb][2]=0;for(var p=0;p<3;p++){this.VPos=this.VPos-64&1023;for(var ch=0;ch<2;ch++){MP2.MatrixTransform(this.sample[ch],p,this.V,this.VPos),JSMpeg.Fill(this.U,0);for(var dIndex=512-(this.VPos>>1),vIndex=this.VPos%128>>1;vIndex<1024;){for(var i=0;i<32;++i)this.U[i]+=this.D[dIndex++]*this.V[vIndex++];vIndex+=96,dIndex+=32}for(vIndex=1120-vIndex,dIndex-=480;vIndex<1024;){for(var i=0;i<32;++i)this.U[i]+=this.D[dIndex++]*this.V[vIndex++];vIndex+=96,dIndex+=32}for(var outChannel=0===ch?left:right,j=0;j<32;j++)outChannel[outPos+j]=this.U[j]/2147418112}outPos+=32}}return this.sampleRate=sampleRate,frameSize},MP2.prototype.readAllocation=function(sb,tab3){var tab4=MP2.QUANT_LUT_STEP_3[tab3][sb],qtab=MP2.QUANT_LUT_STEP4[15&tab4][this.bits.read(tab4>>4)];return qtab?MP2.QUANT_TAB[qtab-1]:0},MP2.prototype.readSamples=function(ch,sb,part){var q=this.allocation[ch][sb],sf=this.scaleFactor[ch][sb][part],sample=this.sample[ch][sb],val=0;if(q){if(63===sf)sf=0;else{var shift=sf/3|0;sf=MP2.SCALEFACTOR_BASE[sf%3]+(1<<shift>>1)>>shift}var adj=q.levels;q.group?(val=this.bits.read(q.bits),sample[0]=val%adj,val=val/adj|0,sample[1]=val%adj,sample[2]=val/adj|0):(sample[0]=this.bits.read(q.bits),sample[1]=this.bits.read(q.bits),sample[2]=this.bits.read(q.bits));var scale=65536/(adj+1)|0;val=((adj=(adj+1>>1)-1)-sample[0])*scale,sample[0]=val*(sf>>12)+(val*(4095&sf)+2048>>12)>>12,val=(adj-sample[1])*scale,sample[1]=val*(sf>>12)+(val*(4095&sf)+2048>>12)>>12,val=(adj-sample[2])*scale,sample[2]=val*(sf>>12)+(val*(4095&sf)+2048>>12)>>12}else sample[0]=sample[1]=sample[2]=0},MP2.MatrixTransform=function(s,ss,d,dp){var t01,t02,t03,t04,t05,t06,t07,t08,t09,t10,t11,t12,t13,t14,t15,t16,t17,t18,t19,t20,t21,t22,t23,t24,t25,t26,t27,t28,t29,t30,t31,t32,t33;t01=s[0][ss]+s[31][ss],t02=.500602998235*(s[0][ss]-s[31][ss]),t03=s[1][ss]+s[30][ss],t04=.505470959898*(s[1][ss]-s[30][ss]),t05=s[2][ss]+s[29][ss],t06=.515447309923*(s[2][ss]-s[29][ss]),t07=s[3][ss]+s[28][ss],t08=.53104259109*(s[3][ss]-s[28][ss]),t09=s[4][ss]+s[27][ss],t10=.553103896034*(s[4][ss]-s[27][ss]),t11=s[5][ss]+s[26][ss],t12=.582934968206*(s[5][ss]-s[26][ss]),t13=s[6][ss]+s[25][ss],t14=.622504123036*(s[6][ss]-s[25][ss]),t15=s[7][ss]+s[24][ss],t16=.674808341455*(s[7][ss]-s[24][ss]),t17=s[8][ss]+s[23][ss],t18=.744536271002*(s[8][ss]-s[23][ss]),t19=s[9][ss]+s[22][ss],t20=.839349645416*(s[9][ss]-s[22][ss]),t21=s[10][ss]+s[21][ss],t22=.972568237862*(s[10][ss]-s[21][ss]),t23=s[11][ss]+s[20][ss],t24=1.16943993343*(s[11][ss]-s[20][ss]),t25=s[12][ss]+s[19][ss],t26=1.48416461631*(s[12][ss]-s[19][ss]),t27=s[13][ss]+s[18][ss],t28=2.05778100995*(s[13][ss]-s[18][ss]),t29=s[14][ss]+s[17][ss],t30=3.40760841847*(s[14][ss]-s[17][ss]),t33=t01+(t31=s[15][ss]+s[16][ss]),t31=.502419286188*(t01-t31),t01=t03+t29,t29=.52249861494*(t03-t29),t03=t05+t27,t27=.566944034816*(t05-t27),t05=t07+t25,t25=.64682178336*(t07-t25),t07=t09+t23,t23=.788154623451*(t09-t23),t09=t11+t21,t21=1.06067768599*(t11-t21),t11=t13+t19,t19=1.72244709824*(t13-t19),t13=t15+t17,t17=5.10114861869*(t15-t17),t15=t33+t13,t13=.509795579104*(t33-t13),t33=t01+t11,t01=.601344886935*(t01-t11),t11=t03+t09,t09=.899976223136*(t03-t09),t03=t05+t07,t07=2.56291544774*(t05-t07),t05=t15+t03,t15=.541196100146*(t15-t03),t03=t33+t11,t11=1.30656296488*(t33-t11),t33=t05+t03,t05=.707106781187*(t05-t03),t03=t15+t11,t03+=t15=.707106781187*(t15-t11),t11=t13+t07,t13=.541196100146*(t13-t07),t07=t01+t09,t09=1.30656296488*(t01-t09),t01=t11+t07,t07=.707106781187*(t11-t07),t11=t13+t09,t01+=t11+=t13=.707106781187*(t13-t09),t11+=t07,t07+=t13,t09=t31+t17,t31=.509795579104*(t31-t17),t17=t29+t19,t29=.601344886935*(t29-t19),t19=t27+t21,t21=.899976223136*(t27-t21),t27=t25+t23,t23=2.56291544774*(t25-t23),t25=t09+t27,t09=.541196100146*(t09-t27),t27=t17+t19,t19=1.30656296488*(t17-t19),t17=t25+t27,t27=.707106781187*(t25-t27),t25=t09+t19,t19=.707106781187*(t09-t19),t09=t31+t23,t31=.541196100146*(t31-t23),t23=t29+t21,t21=1.30656296488*(t29-t21),t29=t09+t23,t23=.707106781187*(t09-t23),t09=t31+t21,t17+=t29+=t09+=t31=.707106781187*(t31-t21),t29+=t25+=t19,t25+=t09+=t23,t09+=t27,t27+=t23+=t31,t23+=t19,t19+=t31,t21=t02+(t32=10.1900081235*(s[15][ss]-s[16][ss])),t02=.502419286188*(t02-t32),t32=t04+t30,t04=.52249861494*(t04-t30),t30=t06+t28,t28=.566944034816*(t06-t28),t06=t08+t26,t08=.64682178336*(t08-t26),t26=t10+t24,t10=.788154623451*(t10-t24),t24=t12+t22,t22=1.06067768599*(t12-t22),t12=t14+t20,t20=1.72244709824*(t14-t20),t14=t16+t18,t16=5.10114861869*(t16-t18),t18=t21+t14,t14=.509795579104*(t21-t14),t21=t32+t12,t32=.601344886935*(t32-t12),t12=t30+t24,t24=.899976223136*(t30-t24),t30=t06+t26,t26=2.56291544774*(t06-t26),t06=t18+t30,t18=.541196100146*(t18-t30),t30=t21+t12,t12=1.30656296488*(t21-t12),t21=t06+t30,t30=.707106781187*(t06-t30),t06=t18+t12,t12=.707106781187*(t18-t12),t18=t14+t26,t26=.541196100146*(t14-t26),t14=t32+t24,t24=1.30656296488*(t32-t24),t32=t18+t14,t14=.707106781187*(t18-t14),t18=t26+t24,t32+=t18+=t24=.707106781187*(t26-t24),t18+=t14,t26=t14+t24,t14=t02+t16,t02=.509795579104*(t02-t16),t16=t04+t20,t04=.601344886935*(t04-t20),t20=t28+t22,t22=.899976223136*(t28-t22),t28=t08+t10,t10=2.56291544774*(t08-t10),t08=t14+t28,t14=.541196100146*(t14-t28),t28=t16+t20,t20=1.30656296488*(t16-t20),t16=t08+t28,t28=.707106781187*(t08-t28),t08=t14+t20,t20=.707106781187*(t14-t20),t14=t02+t10,t02=.541196100146*(t02-t10),t10=t04+t22,t22=1.30656296488*(t04-t22),t04=t14+t10,t10=.707106781187*(t14-t10),t14=t02+t22,t21+=t16+=t04+=t14+=t02=.707106781187*(t02-t22),t16+=t32,t32+=t04+=t08+=t20,t04+=t06+=t12,t06+=t08+=t14+=t10,t08+=t18,t18+=t14+=t28,t14+=t30,t30+=t28+=t10+=t02,t28+=t26,t26+=t10+=t20,t10+=t12,t12+=t20+=t02,t20+=t24,t24+=t02,d[dp+48]=-t33,d[dp+49]=d[dp+47]=-t21,d[dp+50]=d[dp+46]=-t17,d[dp+51]=d[dp+45]=-t16,d[dp+52]=d[dp+44]=-t01,d[dp+53]=d[dp+43]=-t32,d[dp+54]=d[dp+42]=-t29,d[dp+55]=d[dp+41]=-t04,d[dp+56]=d[dp+40]=-t03,d[dp+57]=d[dp+39]=-t06,d[dp+58]=d[dp+38]=-t25,d[dp+59]=d[dp+37]=-t08,d[dp+60]=d[dp+36]=-t11,d[dp+61]=d[dp+35]=-t18,d[dp+62]=d[dp+34]=-t09,d[dp+63]=d[dp+33]=-t14,d[dp+32]=-t05,d[dp+0]=t05,d[dp+31]=-t30,d[dp+1]=t30,d[dp+30]=-t27,d[dp+2]=t27,d[dp+29]=-t28,d[dp+3]=t28,d[dp+28]=-t07,d[dp+4]=t07,d[dp+27]=-t26,d[dp+5]=t26,d[dp+26]=-t23,d[dp+6]=t23,d[dp+25]=-t10,d[dp+7]=t10,d[dp+24]=-t15,d[dp+8]=t15,d[dp+23]=-t12,d[dp+9]=t12,d[dp+22]=-t19,d[dp+10]=t19,d[dp+21]=-t20,d[dp+11]=t20,d[dp+20]=-t13,d[dp+12]=t13,d[dp+19]=-t24,d[dp+13]=t24,d[dp+18]=-t31,d[dp+14]=t31,d[dp+17]=-t02,d[dp+15]=t02,d[dp+16]=0},MP2.FRAME_SYNC=2047,MP2.VERSION={MPEG_2_5:0,MPEG_2:2,MPEG_1:3},MP2.LAYER={III:1,II:2,I:3},MP2.MODE={STEREO:0,JOINT_STEREO:1,DUAL_CHANNEL:2,MONO:3},MP2.SAMPLE_RATE=new Uint16Array([44100,48e3,32e3,0,22050,24e3,16e3,0]),MP2.BIT_RATE=new Uint16Array([32,48,56,64,80,96,112,128,160,192,224,256,320,384,8,16,24,32,40,48,56,64,80,96,112,128,144,160]),MP2.SCALEFACTOR_BASE=new Uint32Array([33554432,26632170,21137968]),MP2.SYNTHESIS_WINDOW=new Float32Array([0,-.5,-.5,-.5,-.5,-.5,-.5,-1,-1,-1,-1,-1.5,-1.5,-2,-2,-2.5,-2.5,-3,-3.5,-3.5,-4,-4.5,-5,-5.5,-6.5,-7,-8,-8.5,-9.5,-10.5,-12,-13,-14.5,-15.5,-17.5,-19,-20.5,-22.5,-24.5,-26.5,-29,-31.5,-34,-36.5,-39.5,-42.5,-45.5,-48.5,-52,-55.5,-58.5,-62.5,-66,-69.5,-73.5,-77,-80.5,-84.5,-88,-91.5,-95,-98,-101,-104,106.5,109,111,112.5,113.5,114,114,113.5,112,110.5,107.5,104,100,94.5,88.5,81.5,73,63.5,53,41.5,28.5,14.5,-1,-18,-36,-55.5,-76.5,-98.5,-122,-147,-173.5,-200.5,-229.5,-259.5,-290.5,-322.5,-355.5,-389.5,-424,-459.5,-495.5,-532,-568.5,-605,-641.5,-678,-714,-749,-783.5,-817,-849,-879.5,-908.5,-935,-959.5,-981,-1000.5,-1016,-1028.5,-1037.5,-1042.5,-1043.5,-1040,-1031.5,1018.5,1e3,976,946.5,911,869.5,822,767.5,707,640,565.5,485,397,302.5,201,92.5,-22.5,-144,-272.5,-407,-547.5,-694,-846,-1003,-1165,-1331.5,-1502,-1675.5,-1852.5,-2031.5,-2212.5,-2394,-2576.5,-2758.5,-2939.5,-3118.5,-3294.5,-3467.5,-3635.5,-3798.5,-3955,-4104.5,-4245.5,-4377.5,-4499,-4609.5,-4708,-4792.5,-4863.5,-4919,-4958,-4979.5,-4983,-4967.5,-4931.5,-4875,-4796,-4694.5,-4569.5,-4420,-4246,-4046,-3820,-3567,3287,2979.5,2644,2280.5,1888,1467.5,1018.5,541,35,-499,-1061,-1650,-2266.5,-2909,-3577,-4270,-4987.5,-5727.5,-6490,-7274,-8077.5,-8899.5,-9739,-10594.5,-11464.5,-12347,-13241,-14144.5,-15056,-15973.5,-16895.5,-17820,-18744.5,-19668,-20588,-21503,-22410.5,-23308.5,-24195,-25068.5,-25926.5,-26767,-27589,-28389,-29166.5,-29919,-30644.5,-31342,-32009.5,-32645,-33247,-33814.5,-34346,-34839.5,-35295,-35710,-36084.5,-36417.5,-36707.5,-36954,-37156.5,-37315,-37428,-37496,37519,37496,37428,37315,37156.5,36954,36707.5,36417.5,36084.5,35710,35295,34839.5,34346,33814.5,33247,32645,32009.5,31342,30644.5,29919,29166.5,28389,27589,26767,25926.5,25068.5,24195,23308.5,22410.5,21503,20588,19668,18744.5,17820,16895.5,15973.5,15056,14144.5,13241,12347,11464.5,10594.5,9739,8899.5,8077.5,7274,6490,5727.5,4987.5,4270,3577,2909,2266.5,1650,1061,499,-35,-541,-1018.5,-1467.5,-1888,-2280.5,-2644,-2979.5,3287,3567,3820,4046,4246,4420,4569.5,4694.5,4796,4875,4931.5,4967.5,4983,4979.5,4958,4919,4863.5,4792.5,4708,4609.5,4499,4377.5,4245.5,4104.5,3955,3798.5,3635.5,3467.5,3294.5,3118.5,2939.5,2758.5,2576.5,2394,2212.5,2031.5,1852.5,1675.5,1502,1331.5,1165,1003,846,694,547.5,407,272.5,144,22.5,-92.5,-201,-302.5,-397,-485,-565.5,-640,-707,-767.5,-822,-869.5,-911,-946.5,-976,-1e3,1018.5,1031.5,1040,1043.5,1042.5,1037.5,1028.5,1016,1000.5,981,959.5,935,908.5,879.5,849,817,783.5,749,714,678,641.5,605,568.5,532,495.5,459.5,424,389.5,355.5,322.5,290.5,259.5,229.5,200.5,173.5,147,122,98.5,76.5,55.5,36,18,1,-14.5,-28.5,-41.5,-53,-63.5,-73,-81.5,-88.5,-94.5,-100,-104,-107.5,-110.5,-112,-113.5,-114,-114,-113.5,-112.5,-111,-109,106.5,104,101,98,95,91.5,88,84.5,80.5,77,73.5,69.5,66,62.5,58.5,55.5,52,48.5,45.5,42.5,39.5,36.5,34,31.5,29,26.5,24.5,22.5,20.5,19,17.5,15.5,14.5,13,12,10.5,9.5,8.5,8,7,6.5,5.5,5,4.5,4,3.5,3.5,3,2.5,2.5,2,2,1.5,1.5,1,1,1,1,.5,.5,.5,.5,.5,.5]),MP2.QUANT_LUT_STEP_1=[[0,0,1,1,1,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,1,1,1,2,2,2,2,2]],MP2.QUANT_TAB={A:91,B:94,C:8,D:12},MP2.QUANT_LUT_STEP_2=[[MP2.QUANT_TAB.C,MP2.QUANT_TAB.C,MP2.QUANT_TAB.D],[MP2.QUANT_TAB.A,MP2.QUANT_TAB.A,MP2.QUANT_TAB.A],[MP2.QUANT_TAB.B,MP2.QUANT_TAB.A,MP2.QUANT_TAB.B]],MP2.QUANT_LUT_STEP_3=[[68,68,52,52,52,52,52,52,52,52,52,52],[67,67,67,66,66,66,66,66,66,66,66,49,49,49,49,49,49,49,49,49,49,49,49,32,32,32,32,32,32,32],[69,69,69,69,52,52,52,52,52,52,52,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36]],MP2.QUANT_LUT_STEP4=[[0,1,2,17],[0,1,2,3,4,5,6,17],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17],[0,1,3,5,6,7,8,9,10,11,12,13,14,15,16,17],[0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,17],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],MP2.QUANT_TAB=[{levels:3,group:1,bits:5},{levels:5,group:1,bits:7},{levels:7,group:0,bits:3},{levels:9,group:1,bits:10},{levels:15,group:0,bits:4},{levels:31,group:0,bits:5},{levels:63,group:0,bits:6},{levels:127,group:0,bits:7},{levels:255,group:0,bits:8},{levels:511,group:0,bits:9},{levels:1023,group:0,bits:10},{levels:2047,group:0,bits:11},{levels:4095,group:0,bits:12},{levels:8191,group:0,bits:13},{levels:16383,group:0,bits:14},{levels:32767,group:0,bits:15},{levels:65535,group:0,bits:16}],MP2}(),JSMpeg.Renderer.WebGL=function(){"use strict";var WebGLRenderer=function(options){this.canvas=options.canvas||document.createElement("canvas"),this.width=this.canvas.width,this.height=this.canvas.height,this.enabled=!0;var contextCreateOptions={preserveDrawingBuffer:!!options.preserveDrawingBuffer,alpha:!1,depth:!1,stencil:!1,antialias:!1};if(this.gl=this.canvas.getContext("webgl",contextCreateOptions)||this.canvas.getContext("experimental-webgl",contextCreateOptions),!this.gl)throw new Error("Failed to get WebGL Context");var gl=this.gl,vertexAttr=null;this.vertexBuffer=gl.createBuffer();var vertexCoords=new Float32Array([0,0,0,1,1,0,1,1]);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,vertexCoords,gl.STATIC_DRAW),this.program=this.createProgram(WebGLRenderer.SHADER.VERTEX_IDENTITY,WebGLRenderer.SHADER.FRAGMENT_YCRCB_TO_RGBA),vertexAttr=gl.getAttribLocation(this.program,"vertex"),gl.enableVertexAttribArray(vertexAttr),gl.vertexAttribPointer(vertexAttr,2,gl.FLOAT,!1,0,0),this.textureY=this.createTexture(0,"textureY"),this.textureCb=this.createTexture(1,"textureCb"),this.textureCr=this.createTexture(2,"textureCr"),this.loadingProgram=this.createProgram(WebGLRenderer.SHADER.VERTEX_IDENTITY,WebGLRenderer.SHADER.FRAGMENT_LOADING),vertexAttr=gl.getAttribLocation(this.loadingProgram,"vertex"),gl.enableVertexAttribArray(vertexAttr),gl.vertexAttribPointer(vertexAttr,2,gl.FLOAT,!1,0,0),this.shouldCreateUnclampedViews=!this.allowsClampedTextureData()};return WebGLRenderer.prototype.destroy=function(){var gl=this.gl;gl.deleteTexture(this.textureY),gl.deleteTexture(this.textureCb),gl.deleteTexture(this.textureCr),gl.deleteProgram(this.program),gl.deleteProgram(this.loadingProgram),gl.deleteBuffer(this.vertexBuffer)},WebGLRenderer.prototype.resize=function(width,height){this.width=0|width,this.height=0|height,this.canvas.width=this.width,this.canvas.height=this.height,this.gl.useProgram(this.program),this.gl.viewport(0,0,this.width,this.height)},WebGLRenderer.prototype.createTexture=function(index,name){var gl=this.gl,texture=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.uniform1i(gl.getUniformLocation(this.program,name),index),texture},WebGLRenderer.prototype.createProgram=function(vsh,fsh){var gl=this.gl,program=gl.createProgram();return gl.attachShader(program,this.compileShader(gl.VERTEX_SHADER,vsh)),gl.attachShader(program,this.compileShader(gl.FRAGMENT_SHADER,fsh)),gl.linkProgram(program),gl.useProgram(program),program},WebGLRenderer.prototype.compileShader=function(type,source){var gl=this.gl,shader=gl.createShader(type);if(gl.shaderSource(shader,source),gl.compileShader(shader),!gl.getShaderParameter(shader,gl.COMPILE_STATUS))throw new Error(gl.getShaderInfoLog(shader));return shader},WebGLRenderer.prototype.allowsClampedTextureData=function(){var gl=this.gl,texture=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,1,1,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,new Uint8ClampedArray([0])),0===gl.getError()},WebGLRenderer.prototype.renderProgress=function(progress){var gl=this.gl;gl.useProgram(this.loadingProgram);var loc=gl.getUniformLocation(this.loadingProgram,"progress");gl.uniform1f(loc,progress),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)},WebGLRenderer.prototype.render=function(y,cb,cr){if(this.enabled){var gl=this.gl,w=this.width+15>>4<<4,h=this.height,w2=w>>1,h2=h>>1;this.shouldCreateUnclampedViews&&(y=new Uint8Array(y.buffer),cb=new Uint8Array(cb.buffer),cr=new Uint8Array(cr.buffer)),gl.useProgram(this.program),this.updateTexture(gl.TEXTURE0,this.textureY,w,h,y),this.updateTexture(gl.TEXTURE1,this.textureCb,w2,h2,cb),this.updateTexture(gl.TEXTURE2,this.textureCr,w2,h2,cr),gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}},WebGLRenderer.prototype.updateTexture=function(unit,texture,w,h,data){var gl=this.gl;gl.activeTexture(unit),gl.bindTexture(gl.TEXTURE_2D,texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,w,h,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,data)},WebGLRenderer.IsSupported=function(){try{if(!window.WebGLRenderingContext)return!1;var canvas=document.createElement("canvas");return!(!canvas.getContext("webgl")&&!canvas.getContext("experimental-webgl"))}catch(err){return!1}},WebGLRenderer.SHADER={FRAGMENT_YCRCB_TO_RGBA:["precision mediump float;","uniform sampler2D textureY;","uniform sampler2D textureCb;","uniform sampler2D textureCr;","varying vec2 texCoord;","mat4 rec601 = mat4(","1.16438,  0.00000,  1.59603, -0.87079,","1.16438, -0.39176, -0.81297,  0.52959,","1.16438,  2.01723,  0.00000, -1.08139,","0, 0, 0, 1",");","void main() {","float y = texture2D(textureY, texCoord).r;","float cb = texture2D(textureCb, texCoord).r;","float cr = texture2D(textureCr, texCoord).r;","gl_FragColor = vec4(y, cr, cb, 1.0) * rec601;","}"].join("\n"),FRAGMENT_LOADING:["precision mediump float;","uniform float progress;","varying vec2 texCoord;","void main() {","float c = ceil(progress-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),VERTEX_IDENTITY:["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n")},WebGLRenderer}(),JSMpeg.Renderer.Canvas2D=function(){"use strict";var CanvasRenderer=function(options){this.canvas=options.canvas||document.createElement("canvas"),this.width=this.canvas.width,this.height=this.canvas.height,this.enabled=!0,this.context=this.canvas.getContext("2d")};return CanvasRenderer.prototype.destroy=function(){},CanvasRenderer.prototype.resize=function(width,height){this.width=0|width,this.height=0|height,this.canvas.width=this.width,this.canvas.height=this.height,this.imageData=this.context.getImageData(0,0,this.width,this.height),JSMpeg.Fill(this.imageData.data,255)},CanvasRenderer.prototype.renderProgress=function(progress){var w=this.canvas.width,h=this.canvas.height,ctx=this.context;ctx.fillStyle="#222",ctx.fillRect(0,0,w,h),ctx.fillStyle="#fff",ctx.fillRect(0,h-h*progress,w,h*progress)},CanvasRenderer.prototype.render=function(y,cb,cr){this.YCbCrToRGBA(y,cb,cr,this.imageData.data),this.context.putImageData(this.imageData,0,0)},CanvasRenderer.prototype.YCbCrToRGBA=function(y,cb,cr,rgba){if(this.enabled)for(var w=this.width+15>>4<<4,w2=w>>1,yIndex1=0,yIndex2=w,yNext2Lines=w+(w-this.width),cIndex=0,cNextLine=w2-(this.width>>1),rgbaIndex1=0,rgbaIndex2=4*this.width,rgbaNext2Lines=4*this.width,cols=this.width>>1,rows=this.height>>1,ccb,ccr,r,g,b,row=0;row<rows;row++){for(var col=0;col<cols;col++){ccb=cb[cIndex],ccr=cr[cIndex],cIndex++,r=ccb+(103*ccb>>8)-179,g=(88*ccr>>8)-44+(183*ccb>>8)-91,b=ccr+(198*ccr>>8)-227;var y1=y[yIndex1++],y2=y[yIndex1++];rgba[rgbaIndex1]=y1+r,rgba[rgbaIndex1+1]=y1-g,rgba[rgbaIndex1+2]=y1+b,rgba[rgbaIndex1+4]=y2+r,rgba[rgbaIndex1+5]=y2-g,rgba[rgbaIndex1+6]=y2+b,rgbaIndex1+=8;var y3=y[yIndex2++],y4=y[yIndex2++];rgba[rgbaIndex2]=y3+r,rgba[rgbaIndex2+1]=y3-g,rgba[rgbaIndex2+2]=y3+b,rgba[rgbaIndex2+4]=y4+r,rgba[rgbaIndex2+5]=y4-g,rgba[rgbaIndex2+6]=y4+b,rgbaIndex2+=8}yIndex1+=yNext2Lines,yIndex2+=yNext2Lines,rgbaIndex1+=rgbaNext2Lines,rgbaIndex2+=rgbaNext2Lines,cIndex+=cNextLine}},CanvasRenderer}(),JSMpeg.AudioOutput.WebAudio=function(){"use strict";var WebAudioOut=function(options){this.context=WebAudioOut.CachedContext=WebAudioOut.CachedContext||new(window.AudioContext||window.webkitAudioContext),this.gain=this.context.createGain(),this.destination=this.gain,this.gain.connect(this.context.destination),this.context._connections=(this.context._connections||0)+1,this.startTime=0,this.buffer=null,this.wallclockStartTime=0,this.volume=1,this.enabled=!0,this.unlocked=!WebAudioOut.NeedsUnlocking(),Object.defineProperty(this,"enqueuedTime",{get:this.getEnqueuedTime})};return WebAudioOut.prototype.destroy=function(){this.gain.disconnect(),this.context._connections--,0===this.context._connections&&(this.context.close(),WebAudioOut.CachedContext=null)},WebAudioOut.prototype.play=function(sampleRate,left,right){if(this.enabled){if(!this.unlocked){var ts=JSMpeg.Now();return this.wallclockStartTime<ts&&(this.wallclockStartTime=ts),void(this.wallclockStartTime+=left.length/sampleRate)}this.gain.gain.value=this.volume;var buffer=this.context.createBuffer(2,left.length,sampleRate);buffer.getChannelData(0).set(left),buffer.getChannelData(1).set(right);var source=this.context.createBufferSource();source.buffer=buffer,source.connect(this.destination);var now=this.context.currentTime,duration=buffer.duration;this.startTime<now&&(this.startTime=now,this.wallclockStartTime=JSMpeg.Now()),source.start(this.startTime),this.startTime+=duration,this.wallclockStartTime+=duration}},WebAudioOut.prototype.stop=function(){this.gain.gain.value=0},WebAudioOut.prototype.getEnqueuedTime=function(){return Math.max(this.wallclockStartTime-JSMpeg.Now(),0)},WebAudioOut.prototype.resetEnqueuedTime=function(){this.startTime=this.context.currentTime,this.wallclockStartTime=JSMpeg.Now()},WebAudioOut.prototype.unlock=function(callback){if(this.unlocked)callback&&callback();else{this.unlockCallback=callback;var buffer=this.context.createBuffer(1,1,22050),source=this.context.createBufferSource();source.buffer=buffer,source.connect(this.destination),source.start(0),setTimeout(this.checkIfUnlocked.bind(this,source,0),0)}},WebAudioOut.prototype.checkIfUnlocked=function(source,attempt){source.playbackState===source.PLAYING_STATE||source.playbackState===source.FINISHED_STATE?(this.unlocked=!0,this.unlockCallback&&(this.unlockCallback(),this.unlockCallback=null)):attempt<10&&setTimeout(this.checkIfUnlocked.bind(this,source,attempt+1),100)},WebAudioOut.NeedsUnlocking=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},WebAudioOut.IsSupported=function(){return window.AudioContext||window.webkitAudioContext},WebAudioOut.CachedContext=null,WebAudioOut}(),JSMpeg}),define("mip-story/video-detector",["require"],function(require){"use strict";var UA=navigator.userAgent.toLowerCase(),badUaList=["baiduboxapp"];function isIPhone(){return UA.indexOf("iphone")>-1}function isBadUA(){var badUA=0;return badUaList.forEach(function(val){UA.indexOf(val)>-1&&(badUA=1)}),badUA}function isRenderVideoElement(){return isIPhone()&&isBadUA()}return{isRenderVideoElement:isRenderVideoElement}}),define("mip-story/mip-story-video",["require","customElement","./jsmpeg/jsmpeg","util","./video-detector"],function(require){"use strict";var customElement=require("customElement").create(),JSMpeg=require("./jsmpeg/jsmpeg"),util=require("util"),Detector=require("./video-detector"),css=util.css,dm=util.dom;function getAttributeSet(attributes){var attrs={};return Array.prototype.slice.apply(attributes).forEach(function(attr){attrs[attr.name]=attr.value}),attrs}return customElement.prototype.initStoryVideoElement=function(){var sourceList=[];this.attributes=getAttributeSet(this.element.attributes),this.sourceDoms=this.element.querySelectorAll("source"),Array.prototype.slice.apply(this.sourceDoms).forEach(function(node){sourceList[node.type]=node.src}),this.sourceList=sourceList,Detector.isRenderVideoElement()?(this.isVideo=!0,this.renderVideoElement()):(this.isVideo=!1,this.renderJSMpeg())},customElement.prototype.renderVideoElement=function(){var poster=this.attributes.poster,height,width,sourceHTML,html='<mip-video layout="responsive" loop autoplay height="'+this.attributes.height+'" width="'+this.attributes.width+'" poster="'+poster+'">'+this.element.innerHTML+"</mip-video>",videoElement=dm.create(html);this.element.parentNode.insertBefore(videoElement,this.element),this.player=videoElement.querySelector("video")},customElement.prototype.renderJSMpeg=function(){var self=this,posterEl=document.createElement("div"),canvas=document.createElement("canvas");css(canvas,{position:"absolute",opacity:"0"});var tsUrl=this.sourceList["video/ts"];tsUrl?(this.attributes.poster&&(posterEl.style.backgroundImage="url("+this.attributes.poster+")",posterEl.style.backgroundSize="cover",posterEl.style.height="100%",posterEl.style.width="100%",posterEl.style.position="absolute",this.element.appendChild(posterEl)),this.attributes.canvas=canvas,this.element.appendChild(canvas),this.player=new JSMpeg.Player(tsUrl,this.attributes),this.player.on("playing",function(){var event=new Event("playing");css(canvas,{opacity:"1"}),self.element.dispatchEvent(event)}),this.player.on("play",function(){var event=new Event("play");self.element.dispatchEvent(event)}),this.player.on("end",function(){var event=new Event("end");self.element.dispatchEvent(event)}),this.stop()):console.error("ts file is require")},customElement.prototype.play=function(){this.isVideo||(this.player.play(),this.unlockAudio())},customElement.prototype.unlockAudio=function(){this.player.audioOut.unlock()},customElement.prototype.stop=function(){this.isVideo||this.player.stop()},customElement.prototype.pause=function(){this.isVideo||this.this.player.pause()},customElement.prototype.attributeChangedCallback=function(){this.element.hasAttribute("preload")&&this.initStoryVideoElement()},customElement.prototype.firstInviewCallback=function(){},MIP.registerMipElement("mip-story-video",customElement),customElement}),define("mip-story/mip-story-img",["require","customElement","util"],function(require){"use strict";var customElement=require("customElement").create(),util,dm=require("util").dom;function getAttributeSet(attributes){var attrs={};return Array.prototype.slice.apply(attributes).forEach(function(attr){attrs[attr.name]=attr.value}),attrs}function getJsonString(attrs){var attrString="";for(var prop in attrs)attrString+=prop+"="+attrs[prop]+" ";return attrString}return customElement.prototype.initStoryImg=function(){this.attributes=getAttributeSet(this.element.attributes);var attrString,imgHtml="<mip-img "+getJsonString(this.attributes)+"></mip-img>",storyImg=dm.create(imgHtml);this.element.parentNode.insertBefore(storyImg,this.element)},customElement.prototype.attributeChangedCallback=function(){this.element.hasAttribute("preload")&&this.initStoryImg()},customElement.prototype.firstInviewCallback=function(){},MIP.registerMipElement("mip-story-img",customElement),customElement}),define("mip-story/animation-util",["require"],function(require){function timeStrFormat(time){var match,num,units;return time&&(match=(time=/^[0-9]*$/.test(+time)?time+"ms":time).toLowerCase().match(/^([0-9\.]+)\s*(s|ms)$/))?(num=match[1],units=match[2],!match||3!==match.length||"s"!==units&&"ms"!==units?void 0:"s"===units?1e3*parseFloat(num):parseInt(num,10)):0}return{timeStrFormat:timeStrFormat}}),define("mip-story/animate-preset",["require"],function(require){"use strict";var animatesPresets;return{"fade-in":{duration:500,easing:"ease-in",delay:0,keyframes:[{opacity:0},{opacity:1}]},"fly-in-top":{duration:500,easing:"ease-in",delay:0,keyframes:function(offset){var offsetY;return[{transform:"translate3d(0, "+-(offset.top+offset.height)+"px, 0)"},{transform:"translate3d(0, 0, 0)"}]}},"fly-in-bottom":{duration:500,easing:"ease-in",delay:0,keyframes:function(offset){var offsetY;return[{transform:"translate3d(0, "+(offset.pageHeight-offset.top)+"px, 0)"},{transform:"translate3d(0, 0, 0)"}]}},"fly-in-left":{duration:500,delay:0,easing:"ease-in",keyframes:function(offset){var offsetX;return[{transform:"translate3d("+-(offset.left+offset.width)+"px, 0, 0)"},{transform:"translate3d(0, 0, 0)"}]}},"fly-in-right":{duration:500,delay:0,easing:"ease-in",keyframes:function(offset){var offsetX;return[{transform:"translate3d("+(offset.pageWidth-offset.left)+"px, 0, 0)"},{transform:"translate3d(0, 0, 0)"}]}},"fade-in-top":{duration:500,easing:"ease-in",delay:0,keyframes:function(offset){var offsetY=-50;return[{opacity:0,transform:"translate3d(0, -50px, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}]}},"fade-in-bottom":{duration:500,easing:"ease-in",delay:0,keyframes:function(offset){var offsetY=50;return[{opacity:0,transform:"translate3d(0, 50px, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}]}},"fade-in-left":{duration:500,delay:0,easing:"ease-in",keyframes:function(offset){var offsetX=-50;return[{opacity:0,transform:"translate3d(-50px, 0, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}]}},"fade-in-right":{duration:500,delay:0,easing:"ease-in",keyframes:function(offset){var offsetX=50;return[{opacity:0,transform:"translate3d(50px, 0, 0)"},{opacity:1,transform:"translate3d(0, 0, 0)"}]}},"scale-in":{duration:1e3,delay:0,easing:"linear",keyframes:function(offset){var offsetX=50;return[{transform:"scale(1)"},{transform:"scale(1.1)"}]}},"twirl-in":{duration:1e3,delay:0,easing:"cubic-bezier(.2, .75, .4, 1)",keyframes:[{transform:"rotate(-540deg) scale(0.1)",opacity:0},{transform:"none",opacity:1}]},"whoosh-in-left":{duration:500,delay:0,easing:"ease-in",keyframes:function(offset){var offsetX;return[{opacity:0,transform:"translate3d("+-(offset.left+offset.width)+"px, 0, 0) scale(.15)"},{opacity:1,transform:"translate3d(0, 0, 0) scale(1)"}]}},"whoosh-in-right":{duration:500,delay:0,easing:"ease-in",keyframes:function(offset){var offsetX;return[{opacity:0,transform:"translate3d("+(offset.left+offset.width)+"px, 0, 0) scale(.15)"},{opacity:1,transform:"translate3d(0, 0, 0) scale(1)"}]}},"rotate-in-left":{duration:700,easing:"ease-in",delay:0,keyframes:function(offset){var offsetX;return[{transform:"translate3d("+-(offset.left+offset.width)+"px, 0, 0) rotate(-360deg)"},{transform:"translate3d(0, 0, 0) rotate(0)"}]}},"rotate-in-right":{duration:700,easing:"ease-in",delay:0,keyframes:function(offset){var offsetX;return[{transform:"translate3d("+(offset.left+offset.width)+"px, 0, 0) rotate(360deg)"},{transform:"translate3d(0, 0, 0) rotate(0)"}]}}}}),define("mip-story/animation-runner",["require","util"],function(require){"use strict";var css=require("util").css;function AnimationRunner(el,animationDef){this.el=el,this.animationDef=animationDef,this.isRunner=1,this.create(),this.isStart=0}return AnimationRunner.prototype.create=function(){var animationDef=this.animationDef;animationDef.easing.fill="forwards",this.runner=this.el.animate(animationDef.keyframes,animationDef.easing),this.pause()},AnimationRunner.prototype.play=function(){var self=this;self.isStart||(self.animationDef.delay?self.timer=setTimeout(function(){css(self.el,{visibility:""}),self.runner.play()},self.animationDef.delay):(css(self.el,{visibility:""}),self.runner.play()),self.isStart=1)},AnimationRunner.prototype.pause=function(){this.runner.pause()},AnimationRunner.prototype.cancel=function(){var self=this;clearTimeout(this.timer),this.isStart=0,this.runner.cancel()},AnimationRunner}),define("mip-story/animation",["require","./animate-preset","./animation-runner","util","./animation-util"],function(require){"use strict";var animatePreset=require("./animate-preset"),AnimationRunner=require("./animation-runner"),util=require("util"),extend=util.fn.extend,css=util.css,MIP_STORY_ANIMATE_IN_ATTR="animate-in",MIP_STORY_ANIMATE_IN_DURATION_ATTR="animate-in-duration",MIP_STORY_ANIMATE_IN_DELAY_ATTR="animate-in-delay",MIP_STORY_ANIMATE_IN_AFTER_ATTR="animate-in-after",MIP_STORY_ANIMATE_IN_SELECROR="[animate-in]",timeStrFormat=require("./animation-util").timeStrFormat;function AnimationManager(page){this.page=page,this.sequence=[],this.init()}function hasAnimations(element){return!!element.querySelectorAll(MIP_STORY_ANIMATE_IN_SELECROR).length}function timeStrFormat(time){var match,num,units;return time&&(match=(time=/^[0-9]*$/.test(+time)?time+"ms":time).toLowerCase().match(/^([0-9\.]+)\s*(s|ms)$/))?(num=match[1],units=match[2],!match||3!==match.length||"s"!==units&&"ms"!==units?void 0:"s"==units?1e3*parseFloat(num):parseInt(num,10)):0}function createAnimationDef(el){var keyframes,easing,offset=el.getBoundingClientRect(),animationDef=getPreset(el),duration=timeStrFormat(el.getAttribute(MIP_STORY_ANIMATE_IN_DURATION_ATTR)),delay=timeStrFormat(el.getAttribute(MIP_STORY_ANIMATE_IN_DELAY_ATTR)),after=el.getAttribute(MIP_STORY_ANIMATE_IN_AFTER_ATTR);return offset.pageHeight=window.innerHeight,offset.pageWidth=window.innerWidth,animationDef&&animationDef.keyframes&&(keyframes="function"==typeof animationDef.keyframes?animationDef.keyframes(offset):animationDef.keyframes),easing={duration:+duration||animationDef.duration,easing:animationDef.easing||"ease"},+delay&&(animationDef.delay=delay),animationDef.easing=easing,animationDef.keyframes=keyframes,after&&(animationDef.startAfterId=after),animationDef}function getPreset(el){var animationDef={},name=String(el.getAttribute(MIP_STORY_ANIMATE_IN_ATTR)).split(/\s+/)[0];return extend(animationDef,animatePreset[name]),animationDef}function buildRuner(el){var runner,animationDef=createAnimationDef(el);return runner=new AnimationRunner(el,animationDef)}return AnimationManager.prototype.init=function(){var self=this,EventEmitter=util.EventEmitter,currentEle,$animate=this.page.querySelectorAll(MIP_STORY_ANIMATE_IN_SELECROR);this.emitter=new EventEmitter,[].slice.call($animate).forEach(function(el){var runner,player={runner:buildRuner(el)};el.id&&(player.id=el.id),self.sequence.push(player)})},AnimationManager.prototype.runAllAnimate=function(){var self=this,startAfterId;this.sequence.forEach(function(player){(startAfterId=player.runner.animationDef.startAfterId)&&self.getRunnerById(startAfterId)?self.waitAndStart(self.getRunnerById(startAfterId),player):player.runner.play()})},AnimationManager.prototype.paintFirstFrame=function(){this.sequence.forEach(function(player){css(player.runner.el,player.runner.animationDef.keyframes[0])})},AnimationManager.prototype.getRunnerById=function(id){var runner=null;return id&&this.sequence.forEach(function(val){val.id===id&&val.runner&&val.runner.isRunner&&(runner=val.runner)}),runner},AnimationManager.prototype.cancelAllAnimate=function(){this.sequence.forEach(function(player){player.runner.cancel()})},AnimationManager.prototype.waitAndStart=function(prevPlayer,player){var self=this;prevPlayer.runner&&player.runner&&(self.emitter.on(prevPlayer.el.id,function(){player.runner.play()}),prevPlayer.runner.onfinish=function(){self.emitter.trigger(prevPlayer.el.id)})},{AnimationManager:AnimationManager,hasAnimations:hasAnimations}}),define("mip-story/mip-story-util",["require"],function(require){var regSubjectColor=/^#([a-fA-F\d]{3}|[a-fA-F\d]{6})$/;function isCssColor(color){return regSubjectColor.test(color)}return{isCssColor:isCssColor}}),define("mip-story/mip-story-config",["require","viewport"],function(require){var viewport=require("viewport"),MIP_I_STORY_STANDALONE,PAGE_ROLE,PROGRESS_STATE,BACKGROUND_AUDIO,SWITCHPAGE_THRESHOLD,DIRECTIONMAP,PAGE_STATE,MSITEAPI,PRELOAD_PAGES=2,STORY_PAGE_INDEX,STORY_PREFIX="MIP_STORY_";return{MIP_I_STORY_STANDALONE:"mip-i-story-standalone",PAGE_ROLE:{contentPage:"contentPage",sharePage:"sharePage"},PROGRESS_STATE:{active:"mip-story-page-progress-bar-active",visited:"mip-story-page-progress-bar-visited"},BACKGROUND_AUDIO:"background-audio",SWITCHPAGE_THRESHOLD:{horizontal:.15*viewport.getWidth(),vertical:.1*viewport.getHeight()},DIRECTIONMAP:{back:"back",goto:"goto"},PAGE_STATE:{current:"current",active:"active"},MSITEAPI:"https://msite.baidu.com/home/bar?office_id=",PRELOAD_PAGES:2,STORY_PAGE_INDEX:"STORY_PAGE_INDEX",STORY_PREFIX:"MIP_STORY_"}}),define("mip-story/mip-story-view",["require","customElement","./audio","./mip-story-video","./mip-story-img","./animation-util","./animation","util","./mip-story-util","./mip-story-config"],function(require){"use strict";var customElement=require("customElement").create(),Audio=require("./audio");require("./mip-story-video"),require("./mip-story-img");var timeStrFormat=require("./animation-util").timeStrFormat,AnimationManager=require("./animation").AnimationManager,hasAnimations=require("./animation").hasAnimations,css=require("util").css,isCssColor=require("./mip-story-util").isCssColor,constConfig=require("./mip-story-config");function hasCssAnimation(obj){var ani=null;try{ani=document.defaultView.getComputedStyle(obj).animationName||document.defaultView.getComputedStyle(obj)["-webkit-animationName"]}catch(e){}return!(!ani||"none"==ani)}function toggleDisplay(obj,disp){if(disp)obj.setAttribute("style","display: "+obj.getAttribute("originDisplay"));else{var originDisplay=document.defaultView.getComputedStyle(obj).display;obj.setAttribute("originDisplay",originDisplay),obj.setAttribute("style","display: none")}}return customElement.prototype.resumeAllMedia=function(load){var self=this;self.whenAllMediaElements(function(ele){self.muted?ele.load()&&ele.pause():ele.load()})},customElement.prototype.pauseAllMedia=function(){this.whenAllMediaElements(function(ele){ele.load(),ele.pause()})},customElement.prototype.muteAllMedia=function(){this.whenAllMediaElements(function(ele){ele.muted=!0,ele.pause()})},customElement.prototype.toggleAllMedia=function(e,muted){this.muted=muted;var ele=e.target||null;ele&&ele.hasAttribute&&ele.hasAttribute("muted")?(!this.muted&&this.resumeAllMedia(),!this.muted&&this.unMuteAllMedia()):this.muteAllMedia()},customElement.prototype.unMuteAllMedia=function(){this.whenAllMediaElements(function(ele){ele.muted=!1,ele.play()})},customElement.prototype.getAllMedia=function(){return this.element.querySelectorAll("audio, video")},customElement.prototype.whenAllMediaElements=function(cb){var mediaSet=this.getAllMedia();Array.prototype.map.call(mediaSet,function(mediaEl){return cb(mediaEl)})},customElement.prototype.setPreActive=function(eventEmiter){this.parentEmiter=eventEmiter,this.animationElements=[],this.initAnimationFirstFrame(),this.findAnimationNodes(this.element),this.initFirstFrameStyle(!1)},customElement.prototype.findAnimationNodes=function(parent){if(null!=parent)for(var subNodes=parent.children,index=0;index<subNodes.length;index++)hasCssAnimation(subNodes[index])&&this.animationElements.push(subNodes[index]),subNodes[index].children.length>0&&this.findAnimationNodes(subNodes[index])},customElement.prototype.initFirstFrameStyle=function(disp){if(null!=this.animationElements)for(var index=0;index<this.animationElements.length;index++)toggleDisplay(this.animationElements[index],disp)},customElement.prototype.setAllMedia=function(status,muted,load,eventEmiter,viewType){this.muted=muted,this.parentEmiter=eventEmiter,status?(this.initAnimationFirstFrame(),this.maybeStartAnimation(),this.resumeAllMedia(load),this.muted?this.muteAllMedia():this.unMuteAllMedia(),this.startStoryViedo(),this.maybeSetAutoAdvance()):(this.maybeClearAutoAdvance(),this.pauseAllMedia(),this.maybeClearAnimation(),this.stopStoryViedo())},customElement.prototype.startStoryViedo=function(){this.hasStoryVideo&&Array.prototype.slice.apply(this.canvasVideo).forEach(function(val){val.customElement.play()})},customElement.prototype.stopStoryViedo=function(){this.hasStoryVideo&&Array.prototype.slice.apply(this.canvasVideo).forEach(function(val){val.customElement.stop()})},customElement.prototype.setCssMedia=function(status,muted,eventEmiter){this.muted=muted,this.parentEmiter=eventEmiter,status?this.initFirstFrameStyle(!0):this.initFirstFrameStyle(!1)},customElement.prototype.clearCssMedia=function(status,muted,eventEmiter){if(null!=this.animationElements)for(var index=0;index<this.animationElements.length;index++)toggleDisplay(this.animationElements[index],!0),this.animationElements[index].removeAttribute("originDisplay")},customElement.prototype.initAnimationFirstFrame=function(){hasAnimations(this.element)&&(css(this.element,{visibility:"hidden"}),this.animationManager||(this.animationManager=new AnimationManager(this.element)),this.animationManager.paintFirstFrame(),css(this.element,{visibility:""}))},customElement.prototype.maybeStartAnimation=function(){hasAnimations(this.element)&&(css(this.element,{visibility:"hidden"}),this.animationManager||(this.animationManager=new AnimationManager(this.element)),this.animationManager.paintFirstFrame(),css(this.element,{visibility:""}),this.animationManager.runAllAnimate())},customElement.prototype.maybeClearAnimation=function(){this.animationManager&&this.animationManager.cancelAllAnimate()},customElement.prototype.maybeClearAutoAdvance=function(){var self=this;this.timer&&clearTimeout(this.timer)},customElement.prototype.maybeSetAutoAdvance=function(){var self=this,el,advancment=self.element.getAttribute("auto-advancement-after"),duration=timeStrFormat(advancment);duration&&(self.timer=setTimeout(function(){self.parentEmiter.trigger("switchPage",{status:1})},duration))},customElement.prototype.setSubjectColor=function(){var subjectColor=this.element.getAttribute("background")||"",storyLayer=this.element.getElementsByTagName("mip-story-layer")||"";if(storyLayer&&storyLayer[0]&&subjectColor&&isCssColor(subjectColor)){var newLayer=document.createElement("mip-story-layer");this.element.insertBefore(newLayer,storyLayer[0]),css(this.element.firstElementChild,{backgroundColor:subjectColor})}},customElement.prototype.setPageRole=function(){this.element.setAttribute("page-role",constConfig.PAGE_ROLE.contentPage)},customElement.prototype.initMedia=function(){this.audio=new Audio,this.canvasVideo=this.element.querySelectorAll("mip-story-video"),this.hasStoryVideo=!!this.canvasVideo.length;var node=this.element.parentNode;if(this.animationElements=[],this.setSubjectColor(),!node.hasAttribute(constConfig.BACKGROUND_AUDIO)){var audioSrc=this.element.getAttribute(constConfig.BACKGROUND_AUDIO);this.audio.build(this.element,audioSrc)}},customElement.prototype.initStoryStatic=function(){for(var storyStatic=this.element.querySelectorAll("mip-story-img, mip-story-video"),i=0;i<storyStatic.length;i++)storyStatic[i].setAttribute("preload","")},customElement.prototype.attributeChangedCallback=function(){this.isPreload||this.element.hasAttribute("preload")&&(this.isPreload=!0,this.initStoryStatic(),this.initMedia(),this.pauseAllMedia())},customElement.prototype.firstInviewCallback=function(){this.isPreload=!1,this.setPageRole()},MIP.registerMipElement("mip-story-view",customElement),customElement}),define("mip-story/mip-story-layer",["require","customElement"],function(require){"use strict";var customElement=require("customElement").create();return customElement.prototype.firstInviewCallback=function(){},MIP.registerMipElement("mip-story-layer",customElement),customElement}),define("mip-story/mip-story-share",["require","util","viewer"],function(require){"use strict";var util=require("util"),MIP_STORY_SHARE_SHOW="mip-story-share-show",viewer=require("viewer");function MIPStoryShare(shareConfig,root){this.shareConfig=shareConfig,this.root=root}return MIPStoryShare.prototype.build=function(){var shareCancelStats=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","小故事分享取消","点击",window.location.href]})),html;return this.shareData={title:this.shareConfig.title,titleDefault:document.title,content:this.shareConfig.desc||this.shareConfig.content||document.title,contentDefault:"我发现了一个精彩的小故事，一起来看吧",iconUrl:this.shareConfig.thumbnail,iconUrlDefault:""},viewer.sendMessage("wxshare_config",this.shareData),this.shareUrl=util.parseCacheUrl(location.href),'<aside class="mip-story-share"><div class="mip-share-container"><mip-share url="'+this.shareUrl+'" title="'+this.shareData.title+'" content="'+this.shareData.content+'" iconUrl="'+this.shareData.iconUrl+'"></mip-share></div><span class="mip-story-share-cancel" data-stats-baidu-obj="'+shareCancelStats+'">取消</span></aside>'},MIPStoryShare.prototype.showShareLayer=function(){var scSupport=this.supportCraft(),ele;scSupport.support?this.callSearchCraftShare(scSupport.os):this.root.querySelector(".mip-story-share").classList.add(MIP_STORY_SHARE_SHOW)},MIPStoryShare.prototype.callSearchCraftShare=function(osAndroid){var message={func:"callNativeShare",options:{type:"url",imgurl:this.shareData.iconUrl,title:this.shareData.title,describe:this.shareData.content,url:this.shareUrl||window.location.href}};osAndroid&&(message=JSON.stringify(message));try{window.Viaduct.postMessage(message)}catch(e){}},MIPStoryShare.prototype.supportCraft=function(){var shareUa="undefined"!=typeof navigator?navigator.userAgent:"",craft=/SearchCraft/i.test(shareUa),shareosAndroid=/Android/i.test(shareUa),shareV=craft&&shareUa.match(/SearchCraft\/([\d.]*)/),hostName=util.parseCacheUrl(location.hostname),supportAnd=shareosAndroid&&parseFloat(shareV[1])>1.5&&-1!==hostName.indexOf("baidu.com"),supportIos=!shareosAndroid&&parseFloat(shareV[1])>1.11,support;return{os:shareosAndroid,support:craft&&(supportAnd||supportIos)}},MIPStoryShare.prototype.hideShareLayer=function(){var ele;this.root.querySelector(".mip-story-share").classList.remove(MIP_STORY_SHARE_SHOW)},MIPStoryShare}),define("mip-story/mip-story-hint",["require","util"],function(require){"use strict";var MIP_STORY_HINT_DAMPING_HIDE="mip-story-hint-damping-hide",MIP_STORY_SYSTEM_SHOW="mip-story-system-show",HASSHOWMIPSTORYHINT="has-show-mip-story-hint",FIRST_PAGE_NAVIGATION_OVERLAY_TIMEOUT=250,MIP_STORY_HINT_CLASS=".mip-story-hint",MIP_STORY_PAGE_SWITCH_LEFT_CLASS="mip-story-page-switch-lt",MIP_STORY_PAGE_SWITCH_RIGHT_CLASS="mip-story-page-switch-rt",util=require("util");function MIPStoryHint(root){this.rootEl=root}return MIPStoryHint.prototype.build=function(){var html;return'<aside class="mip-story-hint mip-story-hint-damping-hide"><div class="mip-story-hint-shadow"></div><div class="mip-story-hint-system"><div class="mip-story-hint-left"></div><div class="mip-story-hint-middle"><span class="mip-story-hint-middle-top"></span><span class="mip-story-hint-middle-icon"><span class="mip-story-hint-touch-icon"></span><span>点击屏幕左右区域</span><span>切换内容</span></span><span class="mip-story-hint-middle-bottom"></span></div><div class="mip-story-hint-right"></div></div><div class="mip-story-hint-rotate"><mip-img src="https://www.mipengine.org/static/img/mip-story/mip-story-rotate.png"></mip-img><p>为了更好的体验，请将手机横过来</p></div><div class="mip-story-page-switch"><span class="mip-story-page-switch-left"><span></span><span></span></span><span class="mip-story-page-switch-right"><span></span><span></span></span></div></aside>'},MIPStoryHint.prototype.showDamping=function(){var self=this,ele=this.rootEl.querySelector(".mip-story-hint");util.css(ele,{display:"block"}),ele.classList.remove(MIP_STORY_HINT_DAMPING_HIDE),setTimeout(function(){self.hideDamping()},250)},MIPStoryHint.prototype.hideDamping=function(){var ele=this.rootEl.querySelector(".mip-story-hint");util.css(ele,{display:"none"}),ele.classList.add(MIP_STORY_HINT_DAMPING_HIDE)},MIPStoryHint.prototype.showSystemLater=function(){var ele=this.rootEl.querySelector(".mip-story-hint");util.css(ele,{display:"block"}),ele.classList.add(MIP_STORY_SYSTEM_SHOW)},MIPStoryHint.prototype.hideSystemLater=function(){var ele=this.rootEl.querySelector(".mip-story-hint");util.css(ele,{display:"none"}),ele.classList.remove(MIP_STORY_SYSTEM_SHOW)},MIPStoryHint.prototype.toggleSystemLater=function(){var ele,display;"block"===this.rootEl.querySelector(".mip-story-hint").style.display?this.hideSystemLater():this.showSystemLater()},MIPStoryHint.prototype.showPageSwitchLayer=function(){var hint=this.rootEl.querySelector(".mip-story-hint");hint.classList.add("mip-story-page-switch-rt"),setTimeout(function(){hint.classList.remove("mip-story-page-switch-rt")},400)},MIPStoryHint.prototype.hidePageSwitchLayer=function(){var hint=this.rootEl.querySelector(".mip-story-hint");hint.classList.add("mip-story-page-switch-lt"),setTimeout(function(){hint.classList.remove("mip-story-page-switch-lt")},400)},MIPStoryHint}),define("mip-story/mip-story-bookend",["require","util","viewer","./mip-story-config"],function(require){"use strict";var util=require("util"),viewer=require("viewer"),constConfig,sharePage=require("./mip-story-config").PAGE_ROLE.sharePage,platform=util.platform,naboo=util.naboo;function MIPStoryBackEnd(storyConfig){this.storyConfig=storyConfig||{}}function fillArr(customArr,defaultArr,n){var cusLen=customArr.length;return cusLen>=n?customArr:customArr.concat(defaultArr.slice(0,n-cusLen))}var minRecommend=4,defaultRecommend=[{cover:"https://mipstatic.baidu.com/static/mip-static/mip-story/static/img/rec1.jpg",url:"https://m.baidu.com/paw/c/m.news18a.com/special/mobile/special_1031.shtml?story=1&word=%E8%BF%88%E5%B7%B4%E8%B5%AB%E6%A6%82%E5%BF%B5%E8%BD%A6&title=%E8%BF%88%E5%B7%B4%E8%B5%AB%E6%A6%82%E5%BF%B5%E8%BD%A6&lid=8305767886715286272&referlid=8305767886715286272&ms=1&frsrcid=37224&frorder=2",title:"未来汽车新概念：我真的心动了",from:"网通社汽车",fromUrl:""},{cover:"https://mipstatic.baidu.com/static/mip-static/mip-story/static/img/rec2.jpg",url:"http://story.soogif.com/story/access/41",title:"梅西丢球：盘点世界杯十大罚球时刻",from:"SOOGIF",fromUrl:""},{cover:"https://mipstatic.baidu.com/static/mip-static/mip-story/static/img/rec3.jpg",url:"https://mipstatic.baidu.com/static/mip-static/mip-story/story-heritage/heritage.html",title:"你所不知道的中国非物质文化遗产",from:"百度公益",fromUrl:""},{cover:"https://mipstatic.baidu.com/static/mip-static/mip-story/static/img/rec4.jpg",url:"https://zqmfcdn.huanhuba.com/app_static/baiduStory/index.html",title:"梅西VSC罗：原来差距在这里",from:"足球魔方",fromUrl:""}];return MIPStoryBackEnd.prototype.build=function(){var data=this.storyConfig,replayStats=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","小故事重播","点击",window.location.href]})),shareStats=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","小故事分享","点击",window.location.href]})),closeStatsInBackEnd=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","小故事关闭按钮_分享页","点击",window.location.href]})),recommendStats=function(url){return encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","更多推荐","点击",url]}))},infoStats=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","来源外链","点击",window.location.href]})),share=data.share,recommend=data.recommend,items=recommend&&recommend.items?recommend.items:[],recTpl="";if((items=fillArr(items,defaultRecommend,4))&&items.length){for(var innerTpl="",i=0;i<items.length;i++){var item=items[i];innerTpl+='<a ondragstart="return false;" ondrop="return false;" href="'+item.url+'" class="recommend-item" data-stats-baidu-obj="'+recommendStats(item.url)+'"><div class="mip-backend-preview"> <mip-story-img src='+(item.cover||" ")+'></mip-story-img></div><div class="recommend-detail"><p>'+(item.title||"")+'</p><span class="item-from" data-src="'+item.fromUrl+'">'+(item.from||"")+"</span></div></a>"}recTpl='<div class="recommend-wrap"><p class="readmore">更多阅读</p><div class="recommend-container">'+innerTpl+"</div></div>"}var shareTpl=this.showShareBtn()?'<span class="mip-backend-share" data-stats-baidu-obj="'+shareStats+'"><span class="mip-backend-preview-share-btn"></span></span>':"",historyTpl=history.length>1?'<span class="mip-story-close mip-backend-close" data-stats-baidu-obj="'+closeStatsInBackEnd+'"></span>':"",html;return'<aside class="mip-backend" page-role="'+sharePage+'"><mip-fixed type="top" class="mip-backend-control">'+historyTpl+shareTpl+'</mip-fixed><div class="mip-backend-outer "style=""><div class="mip-backend-background" style="background-image: url('+share.background+')"></div><div class="recommend-item recommend-now"><div class="mip-backend-preview"style="background-position:center;background-size:cover;background-image:url('+share.thumbnail+')" data-stats-baidu-obj="'+replayStats+'"><div class="mip-backend-preview-mask"></div><div class="mip-backend-preview-thumbnail"><span class="mip-backend-preview-replay-btn"></span></div></div><div class="recommend-detail"><p class="mip-backend-description">'+share.title+'</p><span class="mip-backend-info" data-stats-baidu-obj="'+infoStats+'"><a href="'+share.fromUrl+'">'+share.from+"</a></span></div></div>"+recTpl+"</div></aside>"},MIPStoryBackEnd.prototype.showShareBtn=function(){var hostName=util.parseCacheUrl(location.hostname);return!(platform.isBaiduApp()&&!viewer.isIframed&&-1===hostName.indexOf("baidu.com"))},MIPStoryBackEnd.prototype.show=function(){var eleAnimation;document.querySelector(".mip-backend").animate([{transform:"translate3D(0, 100%, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}],{fill:"forwards",easing:"ease-in",duration:280}).play()},MIPStoryBackEnd.prototype.hide=function(){var eleAnimation;document.querySelector(".mip-backend").animate([{transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, 100%, 0)",opacity:0}],{fill:"forwards",easing:"ease-out",duration:280}).play()},MIPStoryBackEnd}),define("mip-story/mip-progress",["require","util","./animation-util","fetch-jsonp","./mip-story-config"],function(require){"use strict";var ACTIVE="mip-story-page-progress-bar-active",VISITED="mip-story-page-progress-bar-visited",css=require("util").css,timeStrFormat=require("./animation-util").timeStrFormat,fetchJsonp=require("fetch-jsonp"),util=require("util"),constConfig,MSITEAPI=require("./mip-story-config").MSITEAPI;function MIPProgress(root,elements,audioHide,storyConfig){this.root=root,this.elements=elements,this.audioHide=audioHide,this.storyConfig=storyConfig,this.win=window,this.items={},this.oldEle}return MIPProgress.prototype.build=function(){var closeStats=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","小故事关闭按钮","点击",window.location.href]})),content='<aside class="mip-story-system-layer">';content+='<ol class="mip-story-progress-bar">';for(var i=0;i<this.elements.length;i++)content+='<li class="mip-story-page-progress-bar"><div class="mip-story-page-progress-value"></div></li>';content+='</ol><div class="control">',history.length>1&&(content+='<span class="mip-story-close" data-stats-baidu-obj="'+closeStats+'"></span>');var muteStats=encodeURIComponent(JSON.stringify({type:"click",data:["_trackEvent","音频静音按钮","点击",window.location.href]}));return content+=this.showAudio()?'<span class="mip-stoy-audio" data-stats-baidu-obj="'+muteStats+'"></span></div></aside>':""},MIPProgress.prototype.showAudio=function(){var ele;return!!this.root.querySelectorAll("audio, video").length&&!this.audioHide},MIPProgress.prototype.updateProgress=function(index,status){this.progressBar=this.root.querySelectorAll(".mip-story-progress-bar .mip-story-page-progress-value"),this.ele=this.progressBar[index],this.setCurrentEleStatus(index,status),this.setOtherEleStatus(index,status),this.oldEle=this.ele},MIPProgress.prototype.setCurrentEleStatus=function(index,status){var autoAdvanceDuration=timeStrFormat(this.elements[index].getAttribute("auto-advancement-after"));this.ele.animatePlayer?(autoAdvanceDuration||status)&&(css(this.ele,{transform:"scale3d(0, 1, 0)"}),this.ele.classList.remove(VISITED),this.ele.animatePlayer.play()):this.setCurrentEleAnimatePlayer(autoAdvanceDuration)},MIPProgress.prototype.setOtherEleStatus=function(index,status){if(this.oldEle&&this.oldEle!==this.ele&&this.resetOldEleStatus(status,index),status)for(var i=index+1;i<this.progressBar.length;i++)this.cancelEleVistedStatus(this.progressBar[i])},MIPProgress.prototype.resetOldEleStatus=function(status,index){status?(this.oldEle.classList.add(VISITED),this.oldEle.animatePlayer&&this.oldEle.animatePlayer.finish()):this.cancelEleVistedStatus(this.oldEle)},MIPProgress.prototype.cancelEleVistedStatus=function(ele){ele&&(css(ele,{transform:"scale3d(0, 1, 0)"}),ele.classList.remove(VISITED),ele.animatePlayer&&ele.animatePlayer.cancel())},MIPProgress.prototype.setCurrentEleAnimatePlayer=function(autoAdvanceDuration){this.ele.animatePlayer=this.ele.animate([{transform:"scale3d(0, 1, 1)"},{transform:"scale3d(1, 1, 1)"}],{easing:"linear",duration:autoAdvanceDuration||200,fill:"forwards"})},MIPProgress.prototype.setXzhInfo=function(){if(!this.storyConfig.xzh_info.appid)return"";var hostName=util.getOriginalUrl(location.href).split("?")[0].split("#")[0],url=MSITEAPI+this.storyConfig.xzh_info.appid+"&url="+encodeURIComponent(hostName);return fetchJsonp(url,{jsonpCallback:"callback"}).then(function(res){return res.json()}).then(function(data){var content="",siteData=data.data;if(siteData.avatar&&siteData.name&&siteData.homepage)var content='<div class="icon-wrap" data-href="'+siteData.homepage+'"><div class="icon"><img src="'+siteData.avatar+'" alt=""></div><div class="icon-name">'+siteData.name+'</div><div class="icon-type">熊掌号</div></i></div>';return content},function(err){console.log(err)})},MIPProgress}),define("mip-story/mip-story-storage",["require","./mip-story-config"],function(require){var prefix=require("./mip-story-config").STORY_PREFIX,storage=window.sessionStorage,get,set,remove;return{get:function(key){var prefixKey=prefix+key,localValue=storage.getItem(prefixKey);try{return JSON.parse(localValue)}catch(e){return localValue}},set:function(key,value){var prefixKey=prefix+key,localValue;try{localValue=JSON.stringify(value)}catch(e){localValue=value}storage.setItem(prefixKey,localValue)},remove:function(key){var prefixKey=prefix+key;storage.removeItem(prefixKey)}}}),define("mip-story/mip-story-slider",["require","viewport","./mip-story-config","util","hash","./mip-story-storage"],function(require){"use strict";var storyContain=[],emitter,viewport=require("viewport"),constConfig=require("./mip-story-config"),PAGE_ROLE=constConfig.PAGE_ROLE,DIRECTIONMAP=constConfig.DIRECTIONMAP,SWITCHPAGE_THRESHOLD=constConfig.SWITCHPAGE_THRESHOLD,CURRENT=constConfig.PAGE_STATE.current,ACTIVE=constConfig.PAGE_STATE.active,preloadPages=constConfig.PRELOAD_PAGES,STYLE="style",screenWidth=viewport.getWidth(),screenHeight=viewport.getHeight(),SWITCHTYPES={},switchPageType="",initViewForSwitchCB,sliderStartCB,resetSlideEndViewCB,showDampingCB,util=require("util"),dm=util.dom,hash=require("hash"),SLIDEMOVING="slideMoving",storyInstance,storyInstanceEle,sliderTime=200,reboundTime=80,recommend,pageViewed=[0],isPageOneViewed=!1,pageViewedData={category:"_trackEvent",action:"翻页进度",optLabel:"滑动",optValue:"翻了1页"},sharePageIndex=1,isSharePageViewed=!1,sharePagedData={category:"_trackEvent",action:"翻页进度",optLabel:"滑动",optValue:"翻到了分享页"},hasPreload=preloadPages,storage=require("./mip-story-storage"),prefix=require("./mip-story-config").STORY_PREFIX,STORY_PAGE_INDEX=constConfig.STORY_PAGE_INDEX,originalUrl=util.getOriginalUrl().split("?")[0].split("#")[0],currentPageIndex=getState()||0;function getState(){var pageIndex=0;try{pageIndex=storage.get(originalUrl)}catch(e){}return pageIndex}var dragStartBind=null,dragMoveBind=null,dragEndBind=null,hasTouch="ontouchstart"in window;function dragStart(e){if(!this.moveFlag){var touch=hasTouch?e.targetTouches[0]||e.changedTouches[0]:e;this.touchstartX=touch.pageX,this.touchstartY=touch.pageY,sliderStartCB(e),storyInstanceEle.addEventListener("mousemove",dragMoveBind),storyInstanceEle.addEventListener("mouseup",dragEndBind),storyInstanceEle.addEventListener("mouseout",dragEndBind)}}function dragMove(e){dm.contains(recommend,e.target)||self.moveFlag||this.slideMoving(e)}function dragEnd(e){if(storyInstanceEle.removeEventListener("mousemove",dragMoveBind),storyInstanceEle.removeEventListener("mouseup",dragEndBind),storyInstanceEle.removeEventListener("mouseout",dragEndBind),!dm.contains(recommend,e.target)&&!this.moveFlag){var touch=hasTouch?e.targetTouches[0]||e.changedTouches[0]:e;this.touchendX=touch.pageX,this.touchendY=touch.pageY,this.touchendX!=this.touchstartX||this.touchendY!=this.touchstartY?(this.moveFlag=!0,this.setMovingEnd(e),this.touchstartX=this.touchendX=0):this.moveFlag=!1}}function MIPStorySlider(param){storyInstance=param.storyInstance,switchPageType=param.switchPageType,SWITCHTYPES=param.SWITCHTYPES,initViewForSwitchCB=param.initfirstViewStatus,sliderStartCB=param.openAutoplay,resetSlideEndViewCB=param.resetSlideEndView,showDampingCB=param.showDamping,storyInstanceEle=storyInstance.element,storyContain=storyInstance.storyContain,sharePageIndex=storyContain.length-1,emitter=storyInstance.emitter;var maxIndex=storyContain.length-3;console.log(currentPageIndex,storyContain.length);var curIndex=0;currentPageIndex&&(curIndex=currentPageIndex),currentPageIndex>storyContain.length-2&&(curIndex=storyContain.length-2,console.log(curIndex)),this.currentIndex=curIndex,this.preIndex=curIndex>0?curIndex-1:0,this.nextIndex=curIndex<maxIndex?curIndex+1:maxIndex;var index={preIndex:this.preIndex,currentIndex:this.currentIndex,nextIndex:this.nextIndex,direction:this.direction===DIRECTIONMAP.back?0:1};resetSlideEndViewCB(index),this.touchstartX=this.touchendX=0,this.moveFlag=!1}function enableScroll(ele){ele&&ele.addEventListener&&(ele.addEventListener("touchstart",function(){0==ele.scrollTop&&(ele.scrollTop=1)}),ele.addEventListener("touchmove",function(e){ele.scrollTop>0&&e.stopPropagation()},!1))}function isPositionChange(index){var currentEle,transformMatrix,matrix;return 0!=storyContain[index].style.transform.replace(/[^0-9\-.,]/g,"").split(",")[0]}function setSliderPosition(ele,isPre,changemove){var width=isPre?-screenWidth:screenWidth,height=isPre?-screenHeight:screenHeight;null!=ele&&(null!=changemove?switchPageType==SWITCHTYPES.slideX?(ele.style.transform="translate("+changemove+"px, 0)",ele.style.webkitTransform="translate("+changemove+"px, 0)"):(ele.style.transform="translate(0, "+changemove+"px)",ele.style.webkitTransform="translate(0, "+changemove+"px)"):switchPageType==SWITCHTYPES.slideX?(ele.style.transform="translate("+width+"px, 0)",ele.style.webkitTransform="translate("+width+"px, 0)"):ele.style.webkitTransform="translate(0, "+height+"px)")}function setTransitionDuration(ele,time){ele.style.transition="transform "+time+"ms ease",ele.style.webkitTransition="transform "+time+"ms ease"}return MIPStorySlider.prototype.build=function(){this.initViewForSlider(),this.bindEvent(),recommend=storyInstanceEle.querySelector(".recommend")},MIPStorySlider.prototype.bindEvent=function(){dragStartBind=dragStart.bind(this),dragMoveBind=dragMove.bind(this),dragEndBind=dragEnd.bind(this),this.sliderStart(),this.sliding(),this.sliderEnd()},MIPStorySlider.prototype.initViewForSlider=function(){var preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex];this.setCurrentPage(),this.clearStyle(),storyContain.length>=2&&(this.nextIndex=this.currentIndex+1,nextEle=storyContain[this.nextIndex],this.setViewStatus(!0,ACTIVE,nextEle),setSliderPosition(nextEle,!1)),initViewForSwitchCB({preIndex:this.preIndex,currentIndex:this.currentIndex,nextIndex:this.nextIndex})},MIPStorySlider.prototype.sliderStart=function(){var self=this,currentEle=storyContain[this.currentIndex];hasTouch?storyInstanceEle.addEventListener("touchstart",dragStartBind):(storyInstanceEle.classList.add("mip-story-pc"),storyInstanceEle.addEventListener("mousedown",dragStartBind))},MIPStorySlider.prototype.sliding=function(){var self=this;storyInstanceEle.addEventListener("touchmove",dragMoveBind)},MIPStorySlider.prototype.sliderEnd=function(){var self=this;storyInstanceEle.addEventListener("touchend",dragEndBind)},MIPStorySlider.prototype.setMovingEnd=function(e){var data=this.getMoveData(e),move=data.move,preActiveMove=data.preActiveMove,nextActiveMove=data.nextActiveMove,threshold=data.threshold;this.setConfineEle(e)?isPositionChange(this.currentIndex)&&this.setRebound():Math.abs(move)<=threshold?(this.setRebound(),this.resetReboundEndStatus()):this.switchEnd(e)},MIPStorySlider.prototype.resetMovingEndStatus=function(direction){var self=this,preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex];setTimeout(function(){self.moveFlag=!1,self.resetViewForSwitch(direction||DIRECTIONMAP.goto)},200)},MIPStorySlider.prototype.resetViewForSwitch=function(direction){var isPre=!1;switch(direction){case DIRECTIONMAP.back:this.nextIndex=this.currentIndex,this.currentIndex=this.preIndex,this.preIndex=this.preIndex-1<0?this.preIndex:this.preIndex-1;break;case DIRECTIONMAP.goto:isPre=!0,this.preIndex=this.currentIndex,this.currentIndex=this.currentIndex+1,this.nextIndex=this.currentIndex+1>=storyContain.length?this.currentIndex:this.currentIndex+1}var preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex],preChangeIndex;this.setCurrentPage(),this.clearStyle(),this.preIndex!=this.currentIndex&&(this.setViewStatus(!0,ACTIVE,preEle),setSliderPosition(preEle,isPre,null)),this.nextIndex!=this.currentIndex&&(this.setViewStatus(!0,ACTIVE,nextEle),setSliderPosition(nextEle,!isPre,null)),this.setViewStatus(!0,CURRENT,currentEle),setSliderPosition(currentEle,null,0);var index={preIndex:this.preIndex,currentIndex:this.currentIndex,nextIndex:this.nextIndex,direction:this.direction===DIRECTIONMAP.back?0:1};resetSlideEndViewCB(index)},MIPStorySlider.prototype.getSwitchDirection=function(e){var data,move;(this.direction=DIRECTIONMAP.goto,e)&&(this.getMoveData(e).move>=0&&(this.direction=DIRECTIONMAP.back))},MIPStorySlider.prototype.switchEnd=function(e){var self=this,preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex],isPre=!1;switch(this.getSwitchDirection(e),this.direction){case DIRECTIONMAP.back:setSliderPosition(preEle,null,0),setTransitionDuration(preEle,200);break;case DIRECTIONMAP.goto:isPre=!0,setSliderPosition(nextEle,null,0),setTransitionDuration(nextEle,200)}setSliderPosition(currentEle,isPre,null),setTransitionDuration(currentEle,200),this.resetMovingEndStatus(this.direction)},MIPStorySlider.prototype.resetReboundEndStatus=function(){var self=this,preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex];setTimeout(function(){self.moveFlag=!1,self.resetViewStyle()},80)},MIPStorySlider.prototype.resetViewStyle=function(){var preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex];this.preIndex!=this.currentIndex&&(preEle.removeAttribute("style"),setSliderPosition(preEle,!0)),this.nextIndex!=this.currentIndex&&(nextEle.removeAttribute("style"),setSliderPosition(nextEle,!1)),currentEle.removeAttribute("style"),this.currentIndex,storyContain.length},MIPStorySlider.prototype.setConfineEle=function(e){var data,move=this.getMoveData(e).move,isConfineEle=!1;return this.currentIndex<=0&&move>0&&(this.moveFlag=!1,showDampingCB(),isConfineEle=!0),this.currentIndex+1>=storyContain.length&&move<=0&&(this.moveFlag=!1,isConfineEle=!0),isConfineEle},MIPStorySlider.prototype.slideMoving=function(e){var data=this.getMoveData(e),move=data.move,preActiveMove=data.preActiveMove,nextActiveMove=data.nextActiveMove,preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex];this.setConfineEle(e)||(this.currentIndex!=this.preIndex&&setSliderPosition(preEle,null,preActiveMove),this.currentIndex!=this.nextIndex&&setSliderPosition(nextEle,null,nextActiveMove),setSliderPosition(currentEle,null,move))},MIPStorySlider.prototype.getMoveData=function(e){var touch=hasTouch?e.targetTouches[0]||e.changedTouches[0]:e,moveX=touch.pageX-this.touchstartX,moveY=touch.pageY-this.touchstartY,move=moveX,preActiveMove=-screenWidth+moveX,nextActiveMove=screenWidth+moveX,threshold=SWITCHPAGE_THRESHOLD.horizontal,data;return switchPageType===SWITCHTYPES.slideY&&(move=moveY,preActiveMove=-screenHeight+moveY,nextActiveMove=screenHeight+moveY,threshold=SWITCHPAGE_THRESHOLD.vertical),{move:move,preActiveMove:preActiveMove,nextActiveMove:nextActiveMove,threshold:threshold}},MIPStorySlider.prototype.setRebound=function(e){var preEle=storyContain[this.preIndex],currentEle=storyContain[this.currentIndex],nextEle=storyContain[this.nextIndex];this.preIndex!==this.currentIndex&&(setSliderPosition(preEle,!0),setTransitionDuration(preEle,80)),this.nextIndex!==this.currentIndex&&(setSliderPosition(nextEle,!1),setTransitionDuration(nextEle,80)),setSliderPosition(currentEle,null,0),setTransitionDuration(currentEle,80)},MIPStorySlider.prototype.setCurrentPage=function(status){for(var storyContainLength=storyContain.length,i=0;i<storyContainLength;i++){var currentPage=storyContain[i];if(i===this.currentIndex){if(this.setState(i),window._hmt&&-1===pageViewed.indexOf(i)){var pageRole=currentPage.getAttribute("page-role");this.triggerStats(i,pageRole)}if(hasPreload-i<=preloadPages&&i<storyContainLength-preloadPages&&(storyContain[i+preloadPages].setAttribute("preload",""),++hasPreload==storyContainLength))for(var storyImgs=storyContain[hasPreload-1].querySelectorAll("mip-story-img"),i=0;i<storyImgs.length;i++)storyImgs[i].setAttribute("preload","");this.setViewStatus(!0,CURRENT,currentPage)}else this.setViewStatus(!1,CURRENT,currentPage);this.hasStatus(ACTIVE,currentPage)&&this.setViewStatus(!1,ACTIVE,currentPage)}},MIPStorySlider.prototype.setState=function(index){storage.set(originalUrl,index)},MIPStorySlider.prototype.triggerStats=function(pageIndex,role){if(role===PAGE_ROLE.sharePage&&!isSharePageViewed)return isSharePageViewed=!0,this.trackEvent(sharePagedData);if(isPageOneViewed||(isPageOneViewed=!0,this.trackEvent(pageViewedData)),role!==PAGE_ROLE.sharePage){pageViewed.push(pageIndex);var pageViewedInfo="翻了"+(+pageViewed[pageIndex]+1)+"页";pageViewedData.optValue=pageViewedInfo,this.trackEvent(pageViewedData)}},MIPStorySlider.prototype.isSharePage=function(pageIndex){return pageIndex===sharePageIndex},MIPStorySlider.prototype.trackEvent=function(obj){var label=obj.optLabel||"",value=obj.optValue||"";window._hmt.push([obj.category,obj.action,label,value])},MIPStorySlider.prototype.clearStyle=function(){for(var i=0;i<storyContain.length;i++)this.hasStatus(STYLE,storyContain[i])&&(this.setViewStatus(!1,STYLE,storyContain[i]),storyContain[i].removeAttribute(STYLE))},MIPStorySlider.prototype.hasStatus=function(viewStatue,viewEle){if(viewStatue&&viewEle)return viewEle.hasAttribute(viewStatue)},MIPStorySlider.prototype.setViewStatus=function(isSetStatus,viewStatue,viewEle){viewEle&&viewStatue&&(isSetStatus?viewEle.setAttribute(viewStatue,""):viewEle.removeAttribute(viewStatue))},MIPStorySlider}),define("mip-story/mip-story-clickswitch",["require","util"],function(require){"use strict";var CURRENT="current",storyContain,storyViews,util=require("util"),Gesture=util.Gesture,dm=util.dom,storyInstance,storyInstanceEle,showDampingCB,resetClickEndStatusCB,isShowSwitchLayerCB;function MIPStoryClickSwitch(param){storyInstance=param.storyInstance,this.hint=storyInstance.hint,storyContain=storyInstance.storyContain,storyViews=storyInstance.storyViews,showDampingCB=param.showDamping,resetClickEndStatusCB=param.resetClickEndStatus,isShowSwitchLayerCB=param.showSwitchLayer,this.preIndex=this.currentIndex=this.nextIndex=0}return MIPStoryClickSwitch.prototype.build=function(){this.initViewForSwitch(),this.swipe()},MIPStoryClickSwitch.prototype.initViewForSwitch=function(){this.switchTo({status:1,notIncrease:1})},MIPStoryClickSwitch.prototype.switchPage=function(e){var centerX=(storyInstance.element.offsetLeft+storyInstance.element.offsetWidth)/2;e.pageX>centerX?this.switchTo({e:e,status:1}):this.switchTo({e:e,status:0})},MIPStoryClickSwitch.prototype.swipe=function(){var gesture=new Gesture(storyInstance.element,{preventX:!1}),self=this;gesture.on("swipe",function(e,data){if("left"===data.swipeDirection||"right"===data.swipeDirection){var backend=document.querySelector(".mip-backend");if(dm.contains(backend,e.target))return;self.hint.toggleSystemLater()}})},MIPStoryClickSwitch.prototype.switchTo=function(data){if(this.hint.hideDamping(),this.hint.hideSystemLater(),0===data.status&&this.currentIndex<=0)showDampingCB();else{if(!data.notIncrease&&1===data.status&&this.currentIndex+1>=storyViews.length)return this.setViewStatue(!1,CURRENT,storyViews[this.currentIndex]),void this.showBookEnd();data.notIncrease||(1===data.status?this.currentIndex++:this.currentIndex--);var currentEle=storyViews[this.currentIndex],preEle=storyViews[this.preIndex];this.currentIndex!==this.preIndex&&this.setViewStatue(!1,CURRENT,preEle),this.setViewStatue(!0,CURRENT,currentEle);var index={preIndex:this.preIndex,currentIndex:this.currentIndex,status:data.status};resetClickEndStatusCB(index),this.preIndex=this.currentIndex,data.notIncrease||isShowSwitchLayerCB(data.status)}},MIPStoryClickSwitch.prototype.showBookEnd=function(){var ele=storyContain[storyContain.length-1],eleAnimation;this.setViewStatue(!0,CURRENT,ele),ele.animate([{transform:"translate3D(0, 100%, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}],{fill:"forwards",easing:"ease-in",duration:280}).play()},MIPStoryClickSwitch.prototype.goBack=function(){this.setViewStatue(!0,CURRENT,storyViews[this.currentIndex]),this.closeBookEnd()},MIPStoryClickSwitch.prototype.closeBookEnd=function(){var ele=storyContain[storyContain.length-1],eleAnimation;this.setViewStatue(!0,CURRENT,ele),ele.animate([{transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, 100%, 0)",opacity:0}],{fill:"forwards",easing:"ease-out",duration:280}).play()},MIPStoryClickSwitch.prototype.setViewStatue=function(isSetStatus,viewStatue,viewEle){viewEle&&viewStatue&&(isSetStatus?viewEle.setAttribute(viewStatue,""):viewEle.removeAttribute(viewStatue))},MIPStoryClickSwitch.prototype.swip=function(e){if("left"===e.data.swipeDirection||"right"===e.data.swipeDirection){var backend=document.querySelector(".mip-backend");if(dm.contains(backend,e.target))return;this.hint.toggleSystemLater()}},MIPStoryClickSwitch}),define("mip-story/mip-story-service",["require","viewport","./mip-story-slider","./mip-story-clickswitch","util"],function(require){"use strict";var storyContain=[],storyViews=[],emitter,viewport=require("viewport"),CURRENT="current",ACTIVE="active",STYLE="style",screenWidth=viewport.getWidth(),screenHeight=viewport.getHeight(),SWITCHTYPES={click:"click",slideX:"slideX",slideY:"slideY",autoPlay:"autoPlay"},switchPageType=SWITCHTYPES.slideX,Slider=require("./mip-story-slider"),slider,ClickSwitch=require("./mip-story-clickswitch"),clickSwitch,util=require("util"),dm=util.dom,EventEmitter=util.EventEmitter,OPENAUTOPLAY="openAutoplay",UNMUTE="unmute",MUTE="mute",TAPNAVIGATION="tapnavigation",REPLAY="replay",VISIBILITYCHANGE="visibilitychange",CREATESLIDER="createSlider",CLICKSWITCH="clickSwitch",SWITCHPAGE="switchPage",reload;function MIPStoryService(storyInstance){this.storyInstance=storyInstance,this.audio=storyInstance.audio,this.share=storyInstance.share,this.viewMuted=storyInstance.viewMuted,this.bookEnd=storyInstance.bookEnd,this.progress=storyInstance.progress,this.hint=storyInstance.hint,storyContain=storyInstance.storyContain,storyViews=storyInstance.storyViews,this.preIndex=this.currentIndex=this.nextIndex=0,this.preEle=storyViews[this.preIndex].customElement,this.currentEle=storyViews[this.currentIndex].customElement,this.nextEle=storyViews[this.nextIndex].customElement}function findParent(el,tagName){for(tagName=tagName.toLowerCase();el&&el.parentNode;)if((el=el.parentNode).tagName&&el.tagName.toLowerCase()===tagName)return el;return null}return MIPStoryService.prototype.build=function(){var self=this;reload=this.storyInstance.element.hasAttribute("audio-reload"),this.bindEvent(),switchPageType==SWITCHTYPES.slideX||switchPageType==SWITCHTYPES.slideY?self.emitter.trigger(CREATESLIDER):switchPageType==SWITCHTYPES.click&&self.emitter.trigger(CLICKSWITCH),document.addEventListener(VISIBILITYCHANGE,function(e){self.emitter.trigger(VISIBILITYCHANGE,e)}),this.storyInstance.element.addEventListener("click",function(e){self.emitter.trigger(TAPNAVIGATION,e)})},MIPStoryService.prototype.clickSwitch=function(){var self=this,clickSwitchParam={storyInstance:this.storyInstance,showDamping:this.showDamping.bind(this),resetClickEndStatus:this.resetClickEndStatus.bind(this),showSwitchLayer:this.showSwitchLayer.bind(this)};(clickSwitch=new ClickSwitch(clickSwitchParam)).build()},MIPStoryService.prototype.resetClickEndStatus=function(data){this.preIndex=data.preIndex,this.currentIndex=data.currentIndex,this.resetViewEle(),this.currentIndex!==this.preIndex&&this.preEle.setAllMedia(!1,this.viewMuted,reload,this.emitter),this.currentEle.setAllMedia(!0,this.viewMuted,reload,this.emitter),this.progress.updateProgress(this.currentIndex,data.status)},MIPStoryService.prototype.showSwitchLayer=function(data){1===data.status?this.hint.showPageSwitchLayer():this.hint.hidePageSwitchLayer()},MIPStoryService.prototype.createSlider=function(){var self=this,sliderParam={storyInstance:this.storyInstance,switchPageType:switchPageType,SWITCHTYPES:SWITCHTYPES,initfirstViewStatus:this.initfirstViewStatus.bind(this),openAutoplay:this.openAutoplay.bind(this),resetSlideEndView:this.resetSlideEndView.bind(this),showDamping:this.showDamping.bind(this)};(slider=new Slider(sliderParam)).build()},MIPStoryService.prototype.showDamping=function(){this.hint.showDamping()},MIPStoryService.prototype.resetSlideEndView=function(index){this.preIndex=index.preIndex,this.currentIndex=index.currentIndex,this.nextIndex=index.nextIndex,this.resetViewEle(),this.preIndex!=this.currentIndex&&(this.preEle.setPreActive(this.emitter),this.preEle.setAllMedia(!1,this.viewMuted,reload,this.emitter)),this.nextIndex!=this.currentIndex&&this.nextIndex<=storyViews.length-1&&(this.nextEle.setPreActive(this.emitter),this.nextEle.setAllMedia(!1,this.viewMuted,reload,this.emitter)),this.currentIndex+1<storyContain.length&&(this.currentEle.setAllMedia(!0,this.viewMuted,reload,this.emitter),this.currentEle.setCssMedia(!0,this.viewMuted,this.emitter),this.progress.updateProgress(this.currentIndex,index.direction)),this.clearCssMedia()},MIPStoryService.prototype.resetViewEle=function(){this.preEle=storyViews&&storyViews[this.preIndex]&&storyViews[this.preIndex].customElement||null,this.currentEle=storyViews&&storyViews[this.currentIndex]&&storyViews[this.currentIndex].customElement||null,this.nextEle=storyViews&&storyViews[this.nextIndex]&&storyViews[this.nextIndex].customElement||null},MIPStoryService.prototype.initfirstViewStatus=function(index){this.preIndex=index.preIndex,this.currentIndex=index.currentIndex,this.nextIndex=index.nextIndex,this.resetViewEle(),this.nextIndex!=this.currentIndex&&this.nextIndex<=storyViews.length-1&&(this.currentEle.setAllMedia(!0,this.viewMuted,reload,this.emitter),this.currentEle.setCssMedia(!0,this.viewMuted,this.emitter),this.nextEle.setPreActive(this.emitter)),this.clearCssMedia()},MIPStoryService.prototype.clearCssMedia=function(){for(var i=0;i<storyViews.length;i++)i!=this.preIndex&&i!=this.currentIndex&&i!=this.nextIndex&&storyViews[i].customElement.clearCssMedia()},MIPStoryService.prototype.bindEvent=function(){this.emitter=new EventEmitter,this.emitter.on(OPENAUTOPLAY,this.openAutoplay.bind(this)),this.emitter.on(MUTE,this.mute.bind(this)),this.emitter.on(UNMUTE,this.unmute.bind(this)),this.emitter.on(TAPNAVIGATION,this.tapnavigation.bind(this)),this.emitter.on(REPLAY,this.replay.bind(this)),this.emitter.on(VISIBILITYCHANGE,this.visibilitychange.bind(this)),this.emitter.on(CREATESLIDER,this.createSlider.bind(this)),this.emitter.on(CLICKSWITCH,this.clickSwitch.bind(this)),this.emitter.on(SWITCHPAGE,this.switchPage.bind(this))},MIPStoryService.prototype.switchPage=function(param){switchPageType==SWITCHTYPES.click&&clickSwitch&&clickSwitch.switchTo(param),switchPageType!=SWITCHTYPES.click&&slider&&slider.switchEnd()},MIPStoryService.prototype.tapnavigation=function(e){e.stopPropagation();var storyEle=this.storyInstance.element,backend=storyEle.querySelector(".mip-backend"),replay=storyEle.querySelector(".mip-backend-preview"),shareBtn=storyEle.querySelector(".mip-backend-share"),shareArea=storyEle.querySelector(".mip-story-share"),cancelBtn=storyEle.querySelector(".mip-story-share-cancel"),back="mip-story-close",audio=storyEle.querySelector(".mip-stoy-audio"),recommend=storyEle.querySelector(".recommend-wrap"),shareAreaShow=storyEle.querySelector(".mip-story-share-show"),xzhSite=storyEle.querySelector(".icon-wrap");if(dm.contains(shareArea,e.target)||!shareAreaShow)if(dm.contains(xzhSite,e.target)){var href=xzhSite.getAttribute("data-href");window.top.location.href=href}else{if(dm.contains(recommend,e.target)){var target=e.target,eleParent=findParent(target,"a");if(e.preventDefault(),"span"!==target.nodeName.toLocaleLowerCase()){var href=eleParent.getAttribute("href");return void(window.top.location.href=href)}var src=target.getAttribute("data-src");if(!src)return;window.top.location.href=src}if(this.hasClass(e,back))history.back();else if(e.target!==audio){if(dm.contains(replay,e.target))return this.emitter.trigger(REPLAY),void this.progress.updateProgress(0,1);if(dm.contains(backend,e.target))dm.contains(shareBtn,e.target)?this.share.showShareLayer():switchPageType==SWITCHTYPES.click&&clickSwitch.goBack();else if(dm.contains(shareArea,e.target))e.target===cancelBtn&&this.share.hideShareLayer();else if(this.hasPlay||this.muted||(this.emitter.trigger(UNMUTE,e),this.hasPlay=!0),switchPageType==SWITCHTYPES.click&&clickSwitch){var self=this;clickSwitch.switchPage(e)}}else{var enabled;audio.hasAttribute("muted")?this.emitter.trigger(UNMUTE,e):this.emitter.trigger(MUTE,e)}}else this.share.hideShareLayer()},MIPStoryService.prototype.hasClass=function(e,clsName){var reg;return!!new RegExp("\\s*"+clsName+"\\s*").exec(e.target.className)},MIPStoryService.prototype.replay=function(){var self=this;if(switchPageType==SWITCHTYPES.click)return clickSwitch=null,this.clickSwitch(),clickSwitch.closeBookEnd(),void this.share.hideShareLayer();slider.initViewForSlider(function(preIndex,currentIndex,nextIndex){self.initfirstViewStatus(preIndex,currentIndex,nextIndex)}),this.replayBookEnd()},MIPStoryService.prototype.replayBookEnd=function(){this.share.hideShareLayer()},MIPStoryService.prototype.openAutoplay=function(e){this.muted||(this.unMuteGlobalAudio(),this.playGlobalAudio(),e.target.removeAttribute("muted"),this.resetViewEle(),this.nextIndex<=storyViews.length-1&&this.nextEle.muteAllMedia(),this.preIndex!=this.currentIndex&&this.preEle.muteAllMedia())},MIPStoryService.prototype.unmute=function(e){this.muted=!1,this.viewMuted=!1,this.unMuteGlobalAudio(),this.playGlobalAudio(),this.currentIndex<=storyViews.length-1&&(this.resetViewEle(),this.currentEle.toggleAllMedia(e,this.viewMuted)),e.target.removeAttribute("muted")},MIPStoryService.prototype.mute=function(e){this.muted=!0,this.viewMuted=!0,this.muteGlobalAudio(),this.currentIndex<=storyViews.length-1&&(this.resetViewEle(),this.currentEle.toggleAllMedia(e,this.viewMuted)),e.target.setAttribute("muted","")},MIPStoryService.prototype.muteGlobalAudio=function(){this.audio&&(this.audio.pause(),this.audio.muted=!0)},MIPStoryService.prototype.unMuteGlobalAudio=function(){this.audio&&(this.audio.play(),this.audio.muted=!1)},MIPStoryService.prototype.playGlobalAudio=function(){this.audio&&!this.muted&&this.audio.play()},MIPStoryService.prototype.visibilitychange=function(e){var hiddenProperty="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null;this.currentIndex<=storyViews.length-1&&(this.resetViewEle(),this.currentEle.toggleAllMedia(e,this.viewMuted),document[hiddenProperty]?(this.pauseGlobalAudio(),this.currentEle.pauseAllMedia()):(this.playGlobalAudio(),this.currentEle.resumeAllMedia()))},MIPStoryService.prototype.pauseGlobalAudio=function(){this.audio&&this.audio.pause()},MIPStoryService}),define("mip-story/web-animation",[],function(){var a,b,c,d;a={},b=function(){return this}(),d={},function(a,b){function c(a){if("number"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function d(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=x}function e(){return a.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function f(b,c,e){var f=new d;return c&&(f.fill="both",f.duration="auto"),"number"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if("auto"!=b[c]){if(("number"==typeof f[c]||"duration"==c)&&("number"!=typeof b[c]||isNaN(b[c])))return;if("fill"==c&&-1==v.indexOf(b[c]))return;if("direction"==c&&-1==w.indexOf(b[c]))return;if("playbackRate"==c&&1!==b[c]&&a.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;f[c]=b[c]}}):f.duration=b,f}function g(a){return"number"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function h(b,c){return f(b=a.numericTimingToObject(b),c)}function i(a,b,c,d){return a<0||a>1||c<0||c>1?x:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(e<=0){var g=0;return a>0?g=b/a:!b&&c>0&&(g=d/c),g*e}if(e>=1){var h=0;return c<1?h=(d-1)/(c-1):1==c&&a<1&&(h=(b-1)/(a-1)),1+h*(e-1)}for(var i=0,j=1;i<j;){var k=(i+j)/2,l=f(a,c,k);if(Math.abs(e-l)<1e-5)return f(b,d,k);l<e?i=k:j=k}return f(b,d,k)}}function j(a,b){return function(c){if(c>=1)return 1;var d=1/a;return(c+=b*d)-c%d}}function k(a){C||(C=document.createElement("div").style),C.animationTimingFunction="",C.animationTimingFunction=a;var b=C.animationTimingFunction;if(""==b&&e())throw new TypeError(a+" is not a valid value for easing");return b}function l(a){if("linear"==a)return x;var b=E.exec(a);if(b)return i.apply(this,b.slice(1).map(Number));var c=F.exec(a);return c?j(Number(c[1]),{start:y,middle:z,end:A}[c[2]]):B[a]||x}function m(a){return Math.abs(n(a)/a.playbackRate)}function n(a){return 0===a.duration||0===a.iterations?0:a.duration*a.iterations}function o(a,b,c){if(null==b)return G;var d=c.delay+a+c.endDelay;return b<Math.min(c.delay,d)?H:b>=Math.min(c.delay+a,d)?I:J}function p(a,b,c,d,e){switch(d){case H:return"backwards"==b||"both"==b?0:null;case J:return c-e;case I:return"forwards"==b||"both"==b?a:null;case G:return null}}function q(a,b,c,d,e){var f=e;return 0===a?b!==H&&(f+=c):f+=d/a,f}function r(a,b,c,d,e,f){var g=a===1/0?b%1:a%1;return 0!==g||c!==I||0===d||0===e&&0!==f||(g=1),g}function s(a,b,c,d){return a===I&&b===1/0?1/0:1===c?Math.floor(d)-1:Math.floor(d)}function t(a,b,c){var d=a;if("normal"!==a&&"reverse"!==a){var e=b;"alternate-reverse"===a&&(e+=1),d="normal",e!==1/0&&e%2!=0&&(d="reverse")}return"normal"===d?c:1-c}function u(a,b,c){var d=o(a,b,c),e=p(a,c.fill,b,d,c.delay);if(null===e)return null;var f=q(c.duration,d,c.iterations,e,c.iterationStart),g=r(f,c.iterationStart,d,c.iterations,e,c.duration),h=s(d,c.iterations,g,f),i=t(c.direction,h,g);return c._easingFunction(i)}var v="backwards|forwards|both|none".split("|"),w="reverse|alternate|alternate-reverse".split("|"),x=function(a){return a};d.prototype={_setMember:function(b,c){this["_"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember("delay",a)},get delay(){return this._delay},set endDelay(a){this._setMember("endDelay",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember("fill",a)},get fill(){return this._fill},set iterationStart(a){if((isNaN(a)||a<0)&&e())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",a)},get iterationStart(){return this._iterationStart},set duration(a){if("auto"!=a&&(isNaN(a)||a<0)&&e())throw new TypeError("duration must be non-negative or auto, received: "+a);this._setMember("duration",a)},get duration(){return this._duration},set direction(a){this._setMember("direction",a)},get direction(){return this._direction},set easing(a){this._easingFunction=l(k(a)),this._setMember("easing",a)},get easing(){return this._easing},set iterations(a){if((isNaN(a)||a<0)&&e())throw new TypeError("iterations must be non-negative, received: "+a);this._setMember("iterations",a)},get iterations(){return this._iterations}};var y=1,z=.5,A=0,B={ease:i(.25,.1,.25,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1),"step-start":j(1,y),"step-middle":j(1,z),"step-end":j(1,A)},C=null,D="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",E=new RegExp("cubic-bezier\\("+D+","+D+","+D+","+D+"\\)"),F=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,G=0,H=1,I=2,J=3;a.cloneTimingInput=c,a.makeTiming=f,a.numericTimingToObject=g,a.normalizeTimingInput=h,a.calculateActiveDuration=m,a.calculateIterationProgress=u,a.calculatePhase=o,a.normalizeEasing=k,a.parseEasingFunction=l}(c={}),function(a,b){function c(a,b){return a in k&&k[a][b]||b}function d(a){return"display"===a||0===a.lastIndexOf("animation",0)||0===a.lastIndexOf("transition",0)}function e(a,b,e){if(!d(a)){var f=h[a];if(f)for(var g in i.style[a]=b,f){var j=f[g],k=i.style[j];e[j]=c(j,k)}else e[a]=c(a,b)}}function f(a){var b=[];for(var c in a)if(!(c in["easing","offset","composite"])){var d=a[c];Array.isArray(d)||(d=[d]);for(var e,f=d.length,g=0;g<f;g++)(e={}).offset="offset"in a?a.offset:1==f?1:g/(f-1),"easing"in a&&(e.easing=a.easing),"composite"in a&&(e.composite=a.composite),e[c]=d[g],b.push(e)}return b.sort(function(a,b){return a.offset-b.offset}),b}function g(b){function c(){var a=d.length;null==d[a-1].offset&&(d[a-1].offset=1),a>1&&null==d[0].offset&&(d[0].offset=0);for(var b=0,c=d[0].offset,e=1;e<a;e++){var f=d[e].offset;if(null!=f){for(var g=1;g<e-b;g++)d[b+g].offset=c+(f-c)*g/(e-b);b=e,c=f}}}if(null==b)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||(b=f(b));for(var d=b.map(function(b){var c={};for(var d in b){var f=b[d];if("offset"==d){if(null!=f){if(f=Number(f),!isFinite(f))throw new TypeError("Keyframe offsets must be numbers.");if(f<0||f>1)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if("composite"==d){if("add"==f||"accumulate"==f)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=f)throw new TypeError("Invalid composite mode "+f+".")}else f="easing"==d?a.normalizeEasing(f):""+f;e(d,f,c)}return null==c.offset&&(c.offset=null),null==c.easing&&(c.easing="linear"),c}),g=!0,h=-1/0,i=0;i<d.length;i++){var j=d[i].offset;if(null!=j){if(j<h)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");h=j}else g=!1}return d=d.filter(function(a){return a.offset>=0&&a.offset<=1}),g||c(),d}var h={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},i=document.createElementNS("http://www.w3.org/1999/xhtml","div"),j={thin:"1px",medium:"3px",thick:"5px"},k={borderBottomWidth:j,borderLeftWidth:j,borderRightWidth:j,borderTopWidth:j,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:j,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};a.convertToArrayForm=f,a.normalizeKeyframes=g}(c),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?"are":"is",g=new Date,h=new Date(c);return h.setMonth(h.getMonth()+3),!(g<h&&(a in b||console.warn("Web Animations: "+a+" "+f+" deprecated and will stop working on "+h.toDateString()+". "+d),b[a]=!0,1))},a.deprecated=function(b,c,d,e){var f=e?"are":"is";if(a.isDeprecated(b,c,d,e))throw new Error(b+" "+f+" no longer supported. "+d)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}!function(a,b,c){function d(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if("offset"!=d&&"easing"!=d&&"composite"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return b}function e(c){var d=[];for(var e in c)for(var f=c[e],g=0;g<f.length-1;g++){var h=g,i=g+1,j=f[h].offset,k=f[i].offset,l=j,m=k;0==g&&(l=-1/0,0==k&&(i=h)),g==f.length-2&&(m=1/0,1==j&&(h=i)),d.push({applyFrom:l,applyTo:m,startOffset:f[h].offset,endOffset:f[i].offset,easingFunction:a.parseEasingFunction(f[h].easing),property:e,interpolation:b.propertyInterpolation(e,f[h].value,f[i].value)})}return d.sort(function(a,b){return a.startOffset-b.startOffset}),d}b.convertEffectInput=function(c){var f,g=d(a.normalizeKeyframes(c)),h=e(g);return function(a,c){if(null!=c)h.filter(function(a){return c>=a.applyFrom&&c<a.applyTo}).forEach(function(d){var e=c-d.startOffset,f=d.endOffset-d.startOffset,g=0==f?0:d.easingFunction(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)"offset"!=d&&"easing"!=d&&"composite"!=d&&b.clear(a,d)}}}(c,d),function(a,b,c){function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a,b,c){h[c]=h[c]||[],h[c].push([a,b])}function f(a,b,c){for(var f=0;f<c.length;f++)e(a,b,d(c[f]))}function g(c,e,f){var g=c;/-/.test(c)&&!a.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(g=d(c)),"initial"!=e&&"initial"!=f||("initial"==e&&(e=i[g]),"initial"==f&&(f=i[g]));for(var j=e==f?[]:h[g],k=0;j&&k<j.length;k++){var l=j[k][0](e),m=j[k][0](f);if(void 0!==l&&void 0!==m){var n=j[k][1](l,m);if(n){var o=b.Interpolation.apply(null,n);return function(a){return 0==a?e:1==a?f:o(a)}}}}return b.Interpolation(!1,!0,function(a){return a?f:e})}var h={};b.addPropertiesHandler=f;var i={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};b.propertyInterpolation=g}(c,d),function(a,b,c){function d(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateIterationProgress(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d}b.KeyframeEffect=function(c,e,f,g){var h,i=d(a.normalizeTimingInput(f)),j=b.convertEffectInput(e),k=function(){j(c,h)};return k._update=function(a){return null!==(h=i(a))},k._clear=function(){j(c,null)},k._hasSameTarget=function(a){return c===a},k._target=c,k._totalDuration=i._totalDuration,k._id=g,k}}(c,d),function(a,b){function c(a,b){return!(!b.namespaceURI||-1==b.namespaceURI.indexOf("/svg"))&&(g in a||(a[g]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(a.navigator.userAgent)),a[g])}function d(a,b,c){c.enumerable=!0,c.configurable=!0,Object.defineProperty(a,b,c)}function e(a){this._element=a,this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=a.style,this._length=0,this._isAnimatedProperty={},this._updateSvgTransformAttr=c(window,a),this._savedTransformAttr=null;for(var b=0;b<this._style.length;b++){var d=this._style[b];this._surrogateStyle[d]=this._style[d]}this._updateIndices()}function f(a){if(!a._webAnimationsPatchedStyle){var b=new e(a);try{d(a,"style",{get:function(){return b}})}catch(b){a.style._set=function(b,c){a.style[b]=c},a.style._clear=function(b){a.style[b]=""}}a._webAnimationsPatchedStyle=a.style}}var g="_webAnimationsUpdateSvgTransformAttr",h={cssText:1,length:1,parentRule:1},i={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},j={removeProperty:1,setProperty:1};for(var k in e.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(a){for(var b={},c=0;c<this._surrogateStyle.length;c++)b[this._surrogateStyle[c]]=!0;this._surrogateStyle.cssText=a,this._updateIndices();for(var c=0;c<this._surrogateStyle.length;c++)b[this._surrogateStyle[c]]=!0;for(var d in b)this._isAnimatedProperty[d]||this._style.setProperty(d,this._surrogateStyle.getPropertyValue(d))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(a){return function(){return this._surrogateStyle[a]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(b,c){this._style[b]=c,this._isAnimatedProperty[b]=!0,this._updateSvgTransformAttr&&"transform"==a.unprefixedPropertyName(b)&&(null==this._savedTransformAttr&&(this._savedTransformAttr=this._element.getAttribute("transform")),this._element.setAttribute("transform",a.transformToSvgMatrix(c)))},_clear:function(b){this._style[b]=this._surrogateStyle[b],this._updateSvgTransformAttr&&"transform"==a.unprefixedPropertyName(b)&&(this._savedTransformAttr?this._element.setAttribute("transform",this._savedTransformAttr):this._element.removeAttribute("transform"),this._savedTransformAttr=null),delete this._isAnimatedProperty[b]}},i)e.prototype[k]=function(a,b){return function(){var c=this._surrogateStyle[a].apply(this._surrogateStyle,arguments);return b&&(this._isAnimatedProperty[arguments[0]]||this._style[a].apply(this._style,arguments),this._updateIndices()),c}}(k,k in j);for(var l in document.documentElement.style)l in h||l in i||function(a){d(e.prototype,a,{get:function(){return this._surrogateStyle[a]},set:function(b){this._surrogateStyle[a]=b,this._updateIndices(),this._isAnimatedProperty[a]||(this._style[a]=b)}})}(l);a.apply=function(b,c,d){f(b),b.style._set(a.propertyName(c),d)},a.clear=function(b,c){b._webAnimationsPatchedStyle&&b.style._clear(a.propertyName(c))}}(d),function(a){window.Element.prototype.animate=function(b,c){var d="";return c&&c.id&&(d=c.id),a.timeline._play(a.KeyframeEffect(this,b,c,d))}}(d),function(a,b){function c(a,b,d){if("number"==typeof a&&"number"==typeof b)return a*(1-d)+b*d;if("boolean"==typeof a&&"boolean"==typeof b)return d<.5?a:b;if(a.length==b.length){for(var e=[],f=0;f<a.length;f++)e.push(c(a[f],b[f],d));return e}throw"Mismatched interpolation arguments "+a+":"+b}a.Interpolation=function(a,b,d){return function(e){return d(c(a,b,e))}}}(d),function(a,b){function c(a,b,c){return Math.max(Math.min(a,c),b)}function d(b,d,e){var f=a.dot(b,d),g=[];if(1===(f=c(f,-1,1)))g=b;else for(var h=Math.acos(f),i=1*Math.sin(e*h)/Math.sqrt(1-f*f),j=0;j<4;j++)g.push(b[j]*(Math.cos(e*h)-f*i)+d[j]*i);return g}var e=function(){function a(a,b){for(var c=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],d=0;d<4;d++)for(var e=0;e<4;e++)for(var f=0;f<4;f++)c[d][e]+=b[d][f]*a[f][e];return c}function b(a){return 0==a[0][2]&&0==a[0][3]&&0==a[1][2]&&0==a[1][3]&&0==a[2][0]&&0==a[2][1]&&1==a[2][2]&&0==a[2][3]&&0==a[3][2]&&1==a[3][3]}function c(c,d,e,f,g){for(var h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],i=0;i<4;i++)h[i][3]=g[i];for(var i=0;i<3;i++)for(var j=0;j<3;j++)h[3][i]+=c[j]*h[j][i];var k=f[0],l=f[1],m=f[2],n=f[3],o=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[0][0]=1-2*(l*l+m*m),o[0][1]=2*(k*l-m*n),o[0][2]=2*(k*m+l*n),o[1][0]=2*(k*l+m*n),o[1][1]=1-2*(k*k+m*m),o[1][2]=2*(l*m-k*n),o[2][0]=2*(k*m-l*n),o[2][1]=2*(l*m+k*n),o[2][2]=1-2*(k*k+l*l),h=a(h,o);var p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];e[2]&&(p[2][1]=e[2],h=a(h,p)),e[1]&&(p[2][1]=0,p[2][0]=e[0],h=a(h,p)),e[0]&&(p[2][0]=0,p[1][0]=e[0],h=a(h,p));for(var i=0;i<3;i++)for(var j=0;j<3;j++)h[i][j]*=d[i];return b(h)?[h[0][0],h[0][1],h[1][0],h[1][1],h[3][0],h[3][1]]:h[0].concat(h[1],h[2],h[3])}return c}();a.composeMatrix=e,a.quat=d}(d),function(a,b,c){a.sequenceNumber=0;var d=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this.id="",b&&b._id&&(this.id=b._id),this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(a,!0),b.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var c=this.currentTime;this._playbackRate=a,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.applyDirtiedAnimation(this)),null!=c&&(this.currentTime=c)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(this._playbackRate>=0)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,b.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),b.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){"function"==typeof b&&"finish"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if("finish"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){if(this._isFinished){if(!this._finishedFlag){var b=new d(this,this._currentTime,a),c=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){c.forEach(function(a){a.call(b.target,b)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(a,b){this._idle||this._paused||(null==this._startTime?b&&(this.startTime=a-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),b&&(this._currentTimePending=!1,this._fireEvents(a))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var a=this._effect._target;return a._activeAnimations||(a._activeAnimations=[]),a._activeAnimations},_markTarget:function(){var a=this._targetAnimations();-1===a.indexOf(this)&&a.push(this)},_unmarkTarget:function(){var a=this._targetAnimations(),b=a.indexOf(this);-1!==b&&a.splice(b,1)}}}(c,d),function(a,b,c){function d(a){var b=j;j=[],a<q.currentTime&&(a=q.currentTime),q._animations.sort(e),q._animations=h(a,!0,q._animations)[0],b.forEach(function(b){b[1](a)}),g(),l=void 0}function e(a,b){return a._sequenceNumber-b._sequenceNumber}function f(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function g(){o.forEach(function(a){a()}),o.length=0}function h(a,c,d){p=!0,n=!1,b.timeline.currentTime=a,m=!1;var e=[],f=[],g=[],h=[];return d.forEach(function(b){b._tick(a,c),b._inEffect?(f.push(b._effect),b._markTarget()):(e.push(b._effect),b._unmarkTarget()),b._needsTick&&(m=!0);var d=b._inEffect||b._needsTick;b._inTimeline=d,d?g.push(b):h.push(b)}),o.push.apply(o,e),o.push.apply(o,f),m&&requestAnimationFrame(function(){}),p=!1,[g,h]}var i=window.requestAnimationFrame,j=[],k=0;window.requestAnimationFrame=function(a){var b=k++;return 0==j.length&&i(d),j.push([b,a]),b},window.cancelAnimationFrame=function(a){j.forEach(function(b){b[0]==a&&(b[1]=function(){})})},f.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.applyDirtiedAnimation(d),d}};var l=void 0,m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n},b.applyDirtiedAnimation=function(a){if(!p){a._markTarget();var c=a._targetAnimations();c.sort(e),h(b.timeline.currentTime,!1,c.slice())[1].forEach(function(a){var b=q._animations.indexOf(a);-1!==b&&q._animations.splice(b,1)}),g()}};var o=[],p=!1,q=new f;b.timeline=q}(c,d),function(a,b){function c(a,b){for(var c=0,d=0;d<a.length;d++)c+=a[d]*b[d];return c}function d(a,b){return[a[0]*b[0]+a[4]*b[1]+a[8]*b[2]+a[12]*b[3],a[1]*b[0]+a[5]*b[1]+a[9]*b[2]+a[13]*b[3],a[2]*b[0]+a[6]*b[1]+a[10]*b[2]+a[14]*b[3],a[3]*b[0]+a[7]*b[1]+a[11]*b[2]+a[15]*b[3],a[0]*b[4]+a[4]*b[5]+a[8]*b[6]+a[12]*b[7],a[1]*b[4]+a[5]*b[5]+a[9]*b[6]+a[13]*b[7],a[2]*b[4]+a[6]*b[5]+a[10]*b[6]+a[14]*b[7],a[3]*b[4]+a[7]*b[5]+a[11]*b[6]+a[15]*b[7],a[0]*b[8]+a[4]*b[9]+a[8]*b[10]+a[12]*b[11],a[1]*b[8]+a[5]*b[9]+a[9]*b[10]+a[13]*b[11],a[2]*b[8]+a[6]*b[9]+a[10]*b[10]+a[14]*b[11],a[3]*b[8]+a[7]*b[9]+a[11]*b[10]+a[15]*b[11],a[0]*b[12]+a[4]*b[13]+a[8]*b[14]+a[12]*b[15],a[1]*b[12]+a[5]*b[13]+a[9]*b[14]+a[13]*b[15],a[2]*b[12]+a[6]*b[13]+a[10]*b[14]+a[14]*b[15],a[3]*b[12]+a[7]*b[13]+a[11]*b[14]+a[15]*b[15]]}function e(a){var b=a.rad||0;return((a.deg||0)/360+(a.grad||0)/400+(a.turn||0))*(2*Math.PI)+b}function f(a){switch(a.t){case"rotatex":var b=e(a.d[0]);return[1,0,0,0,0,Math.cos(b),Math.sin(b),0,0,-Math.sin(b),Math.cos(b),0,0,0,0,1];case"rotatey":var b=e(a.d[0]);return[Math.cos(b),0,-Math.sin(b),0,0,1,0,0,Math.sin(b),0,Math.cos(b),0,0,0,0,1];case"rotate":case"rotatez":var b=e(a.d[0]);return[Math.cos(b),Math.sin(b),0,0,-Math.sin(b),Math.cos(b),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var c=a.d[0],d=a.d[1],f=a.d[2],b=e(a.d[3]),g=c*c+d*d+f*f;if(0===g)c=1,d=0,f=0;else if(1!==g){var h=Math.sqrt(g);c/=h,d/=h,f/=h}var i=Math.sin(b/2),j=i*Math.cos(b/2),k=i*i;return[1-2*(d*d+f*f)*k,2*(c*d*k+f*j),2*(c*f*k-d*j),0,2*(c*d*k-f*j),1-2*(c*c+f*f)*k,2*(d*f*k+c*j),0,2*(c*f*k+d*j),2*(d*f*k-c*j),1-2*(c*c+d*d)*k,0,0,0,0,1];case"scale":return[a.d[0],0,0,0,0,a.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[a.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,a.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,a.d[0],0,0,0,0,1];case"scale3d":return[a.d[0],0,0,0,0,a.d[1],0,0,0,0,a.d[2],0,0,0,0,1];case"skew":var l=e(a.d[0]),m=e(a.d[1]);return[1,Math.tan(m),0,0,Math.tan(l),1,0,0,0,0,1,0,0,0,0,1];case"skewx":var b=e(a.d[0]);return[1,0,0,0,Math.tan(b),1,0,0,0,0,1,0,0,0,0,1];case"skewy":var b=e(a.d[0]);return[1,Math.tan(b),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":var c,d;return[1,0,0,0,0,1,0,0,0,0,1,0,c=a.d[0].px||0,d=a.d[1].px||0,0,1];case"translatex":var c;return[1,0,0,0,0,1,0,0,0,0,1,0,c=a.d[0].px||0,0,0,1];case"translatey":var d;return[1,0,0,0,0,1,0,0,0,0,1,0,0,d=a.d[0].px||0,0,1];case"translatez":var f;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,f=a.d[0].px||0,1];case"translate3d":var c,d,f;return[1,0,0,0,0,1,0,0,0,0,1,0,c=a.d[0].px||0,d=a.d[1].px||0,f=a.d[2].px||0,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,a.d[0].px?-1/a.d[0].px:0,0,0,0,1];case"matrix":return[a.d[0],a.d[1],0,0,a.d[2],a.d[3],0,0,0,0,1,0,a.d[4],a.d[5],0,1];case"matrix3d":return a.d}}function g(a){return 0===a.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:a.map(f).reduce(d)}function h(a){return[i(g(a))]}var i=function(){function a(a){return a[0][0]*a[1][1]*a[2][2]+a[1][0]*a[2][1]*a[0][2]+a[2][0]*a[0][1]*a[1][2]-a[0][2]*a[1][1]*a[2][0]-a[1][2]*a[2][1]*a[0][0]-a[2][2]*a[0][1]*a[1][0]}function b(b){for(var c=1/a(b),d=b[0][0],e=b[0][1],f=b[0][2],g=b[1][0],h=b[1][1],i=b[1][2],j=b[2][0],k=b[2][1],l=b[2][2],m=[[(h*l-i*k)*c,(f*k-e*l)*c,(e*i-f*h)*c,0],[(i*j-g*l)*c,(d*l-f*j)*c,(f*g-d*i)*c,0],[(g*k-h*j)*c,(j*e-d*k)*c,(d*h-e*g)*c,0]],n=[],o=0;o<3;o++){for(var p=0,q=0;q<3;q++)p+=b[3][q]*m[q][o];n.push(p)}return n.push(1),m.push(n),m}function d(a){return[[a[0][0],a[1][0],a[2][0],a[3][0]],[a[0][1],a[1][1],a[2][1],a[3][1]],[a[0][2],a[1][2],a[2][2],a[3][2]],[a[0][3],a[1][3],a[2][3],a[3][3]]]}function e(a,b){for(var c=[],d=0;d<4;d++){for(var e=0,f=0;f<4;f++)e+=a[f]*b[f][d];c.push(e)}return c}function f(a){var b=g(a);return[a[0]/b,a[1]/b,a[2]/b]}function g(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])}function h(a,b,c,d){return[c*a[0]+d*b[0],c*a[1]+d*b[1],c*a[2]+d*b[2]]}function i(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function j(j){var k=[j.slice(0,4),j.slice(4,8),j.slice(8,12),j.slice(12,16)];if(1!==k[3][3])return null;for(var l=[],m=0;m<4;m++)l.push(k[m].slice());for(var m=0;m<3;m++)l[m][3]=0;if(0===a(l))return null;var n,o=[];k[0][3]||k[1][3]||k[2][3]?(o.push(k[0][3]),o.push(k[1][3]),o.push(k[2][3]),o.push(k[3][3]),n=e(o,d(b(l)))):n=[0,0,0,1];var p=k[3].slice(0,3),q=[];q.push(k[0].slice(0,3));var r=[];r.push(g(q[0])),q[0]=f(q[0]);var s=[];q.push(k[1].slice(0,3)),s.push(c(q[0],q[1])),q[1]=h(q[1],q[0],1,-s[0]),r.push(g(q[1])),q[1]=f(q[1]),s[0]/=r[1],q.push(k[2].slice(0,3)),s.push(c(q[0],q[2])),q[2]=h(q[2],q[0],1,-s[1]),s.push(c(q[1],q[2])),q[2]=h(q[2],q[1],1,-s[2]),r.push(g(q[2])),q[2]=f(q[2]),s[1]/=r[2],s[2]/=r[2];var t=i(q[1],q[2]);if(c(q[0],t)<0)for(var m=0;m<3;m++)r[m]*=-1,q[m][0]*=-1,q[m][1]*=-1,q[m][2]*=-1;var u,v,w=q[0][0]+q[1][1]+q[2][2]+1;return w>1e-4?(u=.5/Math.sqrt(w),v=[(q[2][1]-q[1][2])*u,(q[0][2]-q[2][0])*u,(q[1][0]-q[0][1])*u,.25/u]):q[0][0]>q[1][1]&&q[0][0]>q[2][2]?v=[.25*(u=2*Math.sqrt(1+q[0][0]-q[1][1]-q[2][2])),(q[0][1]+q[1][0])/u,(q[0][2]+q[2][0])/u,(q[2][1]-q[1][2])/u]:q[1][1]>q[2][2]?(u=2*Math.sqrt(1+q[1][1]-q[0][0]-q[2][2]),v=[(q[0][1]+q[1][0])/u,.25*u,(q[1][2]+q[2][1])/u,(q[0][2]-q[2][0])/u]):(u=2*Math.sqrt(1+q[2][2]-q[0][0]-q[1][1]),v=[(q[0][2]+q[2][0])/u,(q[1][2]+q[2][1])/u,.25*u,(q[1][0]-q[0][1])/u]),[p,r,s,v,n]}return j}();a.dot=c,a.makeMatrixDecomposition=h,a.transformListToMatrix=g}(d),function(a){function b(a,b){var c=a.exec(b);if(c)return[c=a.ignoreCase?c[0].toLowerCase():c[0],b.substr(c.length)]}function c(a,b){var c=a(b=b.replace(/^\s*/,""));if(c)return[c[0],c[1].replace(/^\s*/,"")]}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),!(g=b(d,e=g[1]))||""==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=c);d++)if("("==b[d])c++;else if(")"==b[d]&&(0==--c&&d++,c<=0))break;var e=a(b.substr(0,d));return null==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){return a(c)||[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||""==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}if(""==c)return d}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;k<j;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if("function"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b="",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c,c,c;return(c=a.consumeToken(/^inset/i,b))?(d.inset=!0,c):(c=a.consumeLengthOrPercent(b))?(d.lengths.push(c[0]),c):(c=a.consumeColor(b))?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);if(e&&e[0].length)return[d,e[1]]}function c(c){var d=a.consumeRepeated(b,/^,/,c);if(d&&""==d[1])return d[0]}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?"inset ":" ",f=0;f<e.length;f++)c+=e[f](a[0][f])+" ";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,", ");a.addPropertiesHandler(c,f,["box-shadow","text-shadow"])}(d),function(a,b){function c(a){return a.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a))return Number(a)}function f(a,b){return[a,b,c]}function g(a,b){if(0!=a)return i(0,1/0)(a,b)}function h(a,b){return[a,b,function(a){return Math.round(d(1,1/0,a))}]}function i(a,b){return function(e,f){return[e,f,function(e){return c(d(a,b,e))}]}}function j(a){var b=a.trim().split(/\s*[\s,]\s*/);if(0!==b.length){for(var c=[],d=0;d<b.length;d++){var f=e(b[d]);if(void 0===f)return;c.push(f)}return c}}function k(a,b){if(a.length==b.length)return[a,b,function(a){return a.map(c).join(" ")}]}function l(a,b){return[a,b,Math.round]}a.clamp=d,a.addPropertiesHandler(j,k,["stroke-dasharray"]),a.addPropertiesHandler(e,i(0,1/0),["border-image-width","line-height"]),a.addPropertiesHandler(e,i(0,1),["opacity","shape-image-threshold"]),a.addPropertiesHandler(e,g,["flex-grow","flex-shrink"]),a.addPropertiesHandler(e,h,["orphans","widows"]),a.addPropertiesHandler(e,l,["z-index"]),a.parseNumber=e,a.parseNumberList=j,a.mergeNumbers=f,a.numberToString=c}(d),function(a,b){function c(a,b){if("visible"==a||"visible"==b)return[0,1,function(c){return c<=0?a:c>=1?b:"visible"}]}a.addPropertiesHandler(String,c,["visibility"])}(d),function(a,b){function c(a){a=a.trim(),f.fillStyle="#000",f.fillStyle=a;var b=f.fillStyle;if(f.fillStyle="#fff",f.fillStyle=a,b==f.fillStyle){f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1).data;f.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function d(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;d<3;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),"rgba("+b.join(",")+")"}]}var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=e.height=1;var f=e.getContext("2d");a.addPropertiesHandler(c,d,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]),a.consumeColor=a.consumeParenthesised.bind(null,c),a.mergeColors=d}(d),function(a,b){function c(a){function b(){var b=h.exec(a);g=b?b[0]:void 0}function c(){var a=Number(g);return b(),a}function d(){if("("!==g)return c();b();var a=f();return")"!==g?NaN:(b(),a)}function e(){for(var a=d();"*"===g||"/"===g;){var c=g;b();var e=d();"*"===c?a*=e:a/=e}return a}function f(){for(var a=e();"+"===g||"-"===g;){var c=g;b();var d=e();"+"===c?a+=d:a-=d}return a}var g,h=/([\+\-\w\.]+|[\(\)\*\/])/g;return b(),f()}function d(a,b){if("0"==(b=b.trim().toLowerCase())&&"px".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var d={};b=b.replace(a,function(a){return d[a]=null,"U"+a});for(var e="U("+a.source+")",f=b.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+e,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),g=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],h=0;h<g.length;)g[h].test(f)?(f=f.replace(g[h],"$1"),h=0):h++;if("D"==f){for(var i in d){var j=c(b.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(e,"g"),"*0"));if(!isFinite(j))return;d[i]=j}return d}}}function e(a,b){return f(a,b,!0)}function f(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(" + ");return b.length>1?"calc("+c+")":c}]}var g="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",h=d.bind(null,new RegExp(g,"g")),i=d.bind(null,new RegExp(g+"|%","g")),j=d.bind(null,/deg|rad|grad|turn/g);a.parseLength=h,a.parseLengthOrPercent=i,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,i),a.parseAngle=j,a.mergeDimensions=f;var k=a.consumeParenthesised.bind(null,h),l=a.consumeRepeated.bind(void 0,k,/^/),m=a.consumeRepeated.bind(void 0,l,/^,/);a.consumeSizePairList=m;var n=function(a){var b=m(a);if(b&&""==b[1])return b[0]},o=a.mergeNestedRepeated.bind(void 0,e," "),p=a.mergeNestedRepeated.bind(void 0,o,",");a.mergeNonNegativeSizePair=o,a.addPropertiesHandler(n,p,["background-size"]),a.addPropertiesHandler(i,e,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(i,f,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"])}(d),function(a,b){function c(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function d(b){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\(/)),a.consumeRepeated.bind(null,c,/^,/),a.ignore(a.consumeToken.bind(null,/^\)/))],b);if(d&&4==d[0].length)return d[0]}function e(b,c){return"auto"==b||"auto"==c?[!0,!1,function(d){var e=d?b:c;if("auto"==e)return"auto";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function f(a){return"rect("+a+")"}var g=a.mergeWrappedNestedRepeated.bind(null,f,e,", ");a.parseBox=d,a.mergeBoxes=g,a.addPropertiesHandler(d,g,["clip"])}(d),function(a,b){function c(a){return function(b){var c=0;return a.map(function(a){return a===k?b[c++]:a})}}function d(a){return a}function e(b){if("none"==(b=b.toLowerCase().trim()))return[];for(var c,d=/\s*(\w+)\(([^)]*)\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=n[g];if(!h)return;var i=c[2].split(","),j=h[0];if(j.length<i.length)return;for(var k=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(void 0===(p=q?{A:function(b){return"0"==b.trim()?m:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:m,n:k[0],t:l}[r]))return;k.push(p)}if(e.push({t:g,d:k}),d.lastIndex==b.length)return e}}function f(a){return a.toFixed(6).replace(".000000","")}function g(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var e=a.makeMatrixDecomposition(c)}return null==d[0]||null==e[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),e[0].push(1),[d,e,function(b){var c=a.quat(d[0][3],e[0][3],b[5]);return a.composeMatrix(b[0],b[1],b[2],c,b[4]).map(f).join(",")}])}function h(a){return a.replace(/[xy]/,"")}function i(a){return a.replace(/(x|y|z|3d)?$/,"3d")}function j(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var f=0;f<b.length;f++){var j=b[f].t,k=b[f].d,l="scale"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if("number"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var m=function(a,b){return"perspective"==a&&"perspective"==b||("matrix"==a||"matrix3d"==a)&&("matrix"==b||"matrix3d"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r;o=[(r=g(b,c))[0]],p=[r[1]],q=[["matrix",[r[2]]]]}else for(var f=0;f<b.length;f++){var j,s=b[f].t,t=c[f].t,u=b[f].d,v=c[f].d,w=n[s],x=n[t];if(m(s,t)){if(!d)return;var r=g([b[f]],[c[f]]);o.push(r[0]),p.push(r[1]),q.push(["matrix",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&h(s)==h(t))j=h(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||i(s)!=i(t)){if(!d)return;var r;o=[(r=g(b,c))[0]],p=[r[1]],q=[["matrix",[r[2]]]];break}j=i(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C,r=("number"==typeof u[B]?a.mergeNumbers:a.mergeDimensions)(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(",");return"matrix"==q[b][0]&&16==c.split(",").length&&(q[b][0]="matrix3d"),q[b][0]+"("+c+")"}).join(" ")}]}var k=null,l={px:0},m={deg:0},n={matrix:["NNNNNN",[k,k,0,0,k,k,0,0,0,0,1,0,k,k,0,1],d],matrix3d:["NNNNNNNNNNNNNNNN",d],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",c([k,k,1]),d],scalex:["N",c([k,1,1]),c([k,1])],scaley:["N",c([1,k,1]),c([1,k])],scalez:["N",c([1,1,k])],scale3d:["NNN",d],skew:["Aa",null,d],skewx:["A",null,c([k,m])],skewy:["A",null,c([m,k])],translate:["Tt",c([k,k,l]),d],translatex:["T",c([k,l,l]),c([k,l])],translatey:["T",c([l,k,l]),c([l,k])],translatez:["L",c([l,l,k])],translate3d:["TTL",d]};a.addPropertiesHandler(e,j,["transform"]),a.transformToSvgMatrix=function(b){var c=a.transformListToMatrix(e(b));return"matrix("+f(c[0])+" "+f(c[1])+" "+f(c[4])+" "+f(c[5])+" "+f(c[12])+" "+f(c[13])+")"}}(d),function(a){function b(a){var b=Number(a);if(!(isNaN(b)||b<100||b>900||b%100!=0))return b}function c(b){return b=100*Math.round(b/100),400===(b=a.clamp(100,900,b))?"normal":700===b?"bold":String(b)}function d(a,b){return[a,b,c]}a.addPropertiesHandler(b,d,["font-weight"])}(d),function(a){function b(a){var b={};for(var c in a)b[c]=-a[c];return b}function c(b){return a.consumeToken(/^(left|center|right|top|bottom)\b/i,b)||a.consumeLengthOrPercent(b)}function d(b,d){var e=a.consumeRepeated(c,/^/,d);if(e&&""==e[1]){var f=e[0];if(f[0]=f[0]||"center",f[1]=f[1]||"center",3==b&&(f[2]=f[2]||{px:0}),f.length==b){if(/top|bottom/.test(f[0])||/left|right/.test(f[1])){var h=f[0];f[0]=f[1],f[1]=h}if(/left|right|center|Object/.test(f[0])&&/top|bottom|center|Object/.test(f[1]))return f.map(function(a){return"object"==typeof a?a:g[a]})}}}function e(d){var e=a.consumeRepeated(c,/^/,d);if(e){for(var f=e[0],h=[{"%":50},{"%":50}],i=0,j=!1,k=0;k<f.length;k++){var l=f[k];"string"==typeof l?(j=/bottom|right/.test(l),h[i={left:0,right:0,center:i,top:1,bottom:1}[l]]=g[l],"center"==l&&i++):(j&&((l=b(l))["%"]=(l["%"]||0)+100),h[i]=l,i++,j=!1)}return[h,e[1]]}}function f(b){var c=a.consumeRepeated(e,/^,/,b);if(c&&""==c[1])return c[0]}var g={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},h=a.mergeNestedRepeated.bind(null,a.mergeDimensions," ");a.addPropertiesHandler(d.bind(null,3),h,["transform-origin"]),a.addPropertiesHandler(d.bind(null,2),h,["perspective-origin"]),a.consumePosition=e,a.mergeOffsetList=h;var i=a.mergeNestedRepeated.bind(null,h,", ");a.addPropertiesHandler(f,i,["background-position","object-position"])}(d),function(a){function b(b){var c=a.consumeToken(/^circle/,b);if(c&&c[0])return["circle"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\(/)),d,a.ignore(a.consumeToken.bind(void 0,/^at/)),a.consumePosition,a.ignore(a.consumeToken.bind(void 0,/^\)/))],c[1]));var f=a.consumeToken(/^ellipse/,b);if(f&&f[0])return["ellipse"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\(/)),e,a.ignore(a.consumeToken.bind(void 0,/^at/)),a.consumePosition,a.ignore(a.consumeToken.bind(void 0,/^\)/))],f[1]));var g=a.consumeToken(/^polygon/,b);return g&&g[0]?["polygon"].concat(a.consumeList([a.ignore(a.consumeToken.bind(void 0,/^\(/)),a.optional(a.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),a.consumeSizePairList,a.ignore(a.consumeToken.bind(void 0,/^\)/))],g[1])):void 0}function c(b,c){if(b[0]===c[0])return"circle"==b[0]?a.mergeList(b.slice(1),c.slice(1),["circle(",a.mergeDimensions," at ",a.mergeOffsetList,")"]):"ellipse"==b[0]?a.mergeList(b.slice(1),c.slice(1),["ellipse(",a.mergeNonNegativeSizePair," at ",a.mergeOffsetList,")"]):"polygon"==b[0]&&b[1]==c[1]?a.mergeList(b.slice(2),c.slice(2),["polygon(",b[1],g,")"]):void 0}var d=a.consumeParenthesised.bind(null,a.parseLengthOrPercent),e=a.consumeRepeated.bind(void 0,d,/^/),f=a.mergeNestedRepeated.bind(void 0,a.mergeDimensions," "),g=a.mergeNestedRepeated.bind(void 0,f,",");a.addPropertiesHandler(b,c,["shape-outside"])}(d),function(a,b){function c(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(d[a]=b),e[b]=a})}var d={},e={};c("transform",["webkitTransform","msTransform"]),c("transformOrigin",["webkitTransformOrigin"]),c("perspective",["webkitPerspective"]),c("perspectiveOrigin",["webkitPerspectiveOrigin"]),a.propertyName=function(a){return d[a]||a},a.unprefixedPropertyName=function(a){return e[a]||a}}(d)}(),function(){if(void 0===document.createElement("div").animate([]).oncancel){var a;if(window.performance&&performance.now)var a=function(){return performance.now()};else var a=function(){return Date.now()};var b=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},c=window.Element.prototype.animate;window.Element.prototype.animate=function(d,e){var f=c.call(this,d,e);f._cancelHandlers=[],f.oncancel=null;var g=f.cancel;f.cancel=function(){g.call(this);var c=new b(this,null,a()),d=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){d.forEach(function(a){a.call(c.target,c)})},0)};var h=f.addEventListener;f.addEventListener=function(a,b){"function"==typeof b&&"cancel"==a?this._cancelHandlers.push(b):h.call(this,a,b)};var i=f.removeEventListener;return f.removeEventListener=function(a,b){if("cancel"==a){var c=this._cancelHandlers.indexOf(b);c>=0&&this._cancelHandlers.splice(c,1)}else i.call(this,a,b)},f}}}(),function(a){var b=document.documentElement,c=null,d=!1;try{var e,f="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";(c=b.animate({opacity:[f,f]},{duration:1})).currentTime=0,d=getComputedStyle(b).getPropertyValue("opacity")==f}catch(a){}finally{c&&c.cancel()}if(!d){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(b,c){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||null===b||(b=a.convertToArrayForm(b)),g.call(this,b,c)}}}(c),b.true=a}),define("mip-story/mip-story",["require","customElement","./mip-story-view","./mip-story-layer","./mip-story-config","./audio","./mip-story-share","./mip-story-hint","./mip-story-bookend","./animate-preset","util","./mip-progress","viewport","viewer","zepto","./mip-story-service","./mip-story-util","./mip-story-storage","./web-animation"],function(require){"use strict";var customElement=require("customElement").create();require("./mip-story-view"),require("./mip-story-layer");var constConfig=require("./mip-story-config"),MIP_I_STORY_STANDALONE=constConfig.MIP_I_STORY_STANDALONE,preloadPages=constConfig.PRELOAD_PAGES,Audio=require("./audio"),ShareLayer=require("./mip-story-share"),HintLayer=require("./mip-story-hint"),BookEnd=require("./mip-story-bookend"),animatePreset=require("./animate-preset"),util=require("util"),platform=util.platform,dm=util.dom,EventEmitter=util.EventEmitter,Gesture=util.Gesture,Progress=require("./mip-progress"),storyViews=[],storyContain=[],viewport=require("viewport"),viewer=require("viewer"),$=require("zepto"),Service=require("./mip-story-service"),service,isCssColor=require("./mip-story-util").isCssColor;function MIPStory(element){this.element=element,this.win=window,this.storyViews=[],this.storyContain=[]}function loadScript(url){var d=document,s=d.createElement("script");s.src=url,(d.body||d.documentElement).appendChild(s)}return MIPStory.prototype.getConfigData=function(){var configData=this.element.querySelector('mip-story > script[type="application/json"]');try{return JSON.parse(configData.innerText)}catch(e){console.error(e)}return{}},MIPStory.prototype.initAudio=function(){var au=this.element.getAttribute("background-audio");au&&(this.audio=(new Audio).build(this.element,au)),this.muted=!1,this.viewMuted=!(!this.muted&&!this.audio)},MIPStory.prototype.initBookend=function(storyConfig){this.bookEnd=new BookEnd(storyConfig);var html=dm.create(this.bookEnd.build());this.element.appendChild(html)},MIPStory.prototype.initStoryViews=function(){this.storyViews=this.element.querySelectorAll("mip-story-view"),this.initPreload()},MIPStory.prototype.initStoryContain=function(){this.bookEndContainer=document.querySelector(".mip-backend");for(var index=0;index<this.storyViews.length;index++)this.storyContain.push(this.storyViews[index].customElement.element);this.storyContain.push(this.bookEndContainer)},MIPStory.prototype.initHintLayer=function(element){this.hint=new HintLayer(element);var html=dm.create(this.hint.build());this.element.appendChild(html)},MIPStory.prototype.initShare=function(storyConfig,element){var shareConfig=storyConfig.share||{};this.share=new ShareLayer(shareConfig,element);var html=dm.create(this.share.build());this.element.appendChild(html)},MIPStory.prototype.initService=function(){(service=new Service(this)).build()},MIPStory.prototype.initProgress=function(storyConfig){if(!this.progress){var audioHide=this.element.hasAttribute("audio-hide");this.progress=new Progress(this.element,this.storyViews,audioHide,storyConfig);var html=dm.create(this.progress.build());this.element.appendChild(html);for(var storage=require("./mip-story-storage"),prefix=require("./mip-story-config").STORY_PREFIX,STORY_PAGE_INDEX=constConfig.STORY_PAGE_INDEX,originalUrl=util.getOriginalUrl().split("?")[0].split("#")[0],currentPageIndex=getState()||0,p=0;p<currentPageIndex;p++)this.progress.updateProgress(p,1);var sys=this.element.querySelector(".mip-story-system-layer");viewer.isIframed&&this.getConfigData().xzh_info&&this.progress.setXzhInfo().then(function(data){var icon=dm.create(data);try{sys.appendChild(icon)}catch(err){}})}function getState(){var pageIndex=0;try{pageIndex=storage.get(originalUrl)}catch(e){}return pageIndex}},MIPStory.prototype.setSubjectColor=function(){var subjectColor=this.element.getAttribute("background")||"";subjectColor&&isCssColor(subjectColor)&&(this.element.style.backgroundColor=subjectColor)},MIPStory.prototype.insertScript=function(){loadScript("https://c.mipcdn.com/static/v1/mip-fixed/mip-fixed.js")},MIPStory.prototype.resolveSwipe=function(){for(var i=0;i<this.storyViews.length;i++)this.storyViews[i].addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1});var isSimpleSearch=navigator.userAgent.toLowerCase().indexOf("searchcraft"),backOuter,recommendWrap;platform.isBaiduApp()||platform.isQQApp()||isSimpleSearch||this.element.querySelector(".mip-backend").addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1});this.element.querySelector(".recommend-wrap").addEventListener("touchmove",function(e){e.stopPropagation()},{passive:!0})},MIPStory.prototype.initPreload=function(){for(var storyViewData=this.storyViews,i=0;i<=preloadPages;i++){if(!storyViewData[i])return;storyViewData[i].setAttribute("preload","")}},MIPStory.prototype.init=function(){var element=this.element,html=this.win.document.documentElement,mipStoryConfigData=this.getConfigData();this.insertScript(),this.setSubjectColor(),html.setAttribute("id",MIP_I_STORY_STANDALONE),this.initAudio(),this.initBookend(mipStoryConfigData),this.initStoryViews(),this.initStoryContain(),this.initHintLayer(element),this.initShare(mipStoryConfigData,element),this.initProgress(mipStoryConfigData),this.initService(),this.resolveSwipe()},customElement.prototype.firstInviewCallback=function(){var mipStory=new MIPStory(this.element);require("./web-animation"),mipStory.init()},customElement}),define("mip-story",["mip-story/mip-story"],function(main){return main}),function(){function registerComponent(mip,component){mip.registerMipElement("mip-story",component,"html#mip-i-story-standalone,html#mip-i-story-standalone body{width:100% !important;height:100% !important;margin:0 !important;padding:0 !important;cursor:auto !important}mip-story{position:relative !important;display:block;overflow:auto;-webkit-overflow-scrolling:touch;width:100% !important;height:100% !important;background:#000;overflow-scrolling:touch;-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent}mip-story.mip-story-pc{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:default}mip-story.mip-story-pc mip-story-view::after{content:'';display:block;width:100%;height:100%;position:absolute;left:0;top:0}mip-story.mip-story-pc .mip-story-close{display:none}mip-story,mip-story-view,mip-story-layer{overflow:hidden !important}mip-story-view{position:absolute !important;top:0 !important;right:0 !important;bottom:0 !important;left:0 !important;display:none !important;height:auto !important}mip-story-view[active]{display:block !important;will-change:transform}mip-story-view[current]{display:block !important;will-change:transform}mip-story-layer{position:absolute !important;top:0 !important;right:0 !important;bottom:0 !important;left:0 !important;overflow:hidden !important;padding:68px 32px 32px !important}mip-story-layer[template=cover]{box-sizing:border-box}mip-story-layer *{box-sizing:border-box;margin:0}.mip-story-system-layer{position:absolute;z-index:100000;top:0;right:0;left:0;padding:0 0 72px 0;background:-webkit-linear-gradient(top, #000, transparent);background:linear-gradient(top, #000, transparent)}.mip-story-progress{overflow:hidden}.mip-story-system-layer .control{width:50%;height:24px;position:absolute;top:20px;right:17px}.mip-story-system-layer span{width:24px;height:24px;float:right;margin-left:20px;background-repeat:no-repeat;background-position:center center;background-size:24px 24px}.mip-story-close{display:block;opacity:1;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQyQzc4MzE2N0NFMTFFODk1NUVCQ0Q3REIxMTdDRjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQyQzc4MzI2N0NFMTFFODk1NUVCQ0Q3REIxMTdDRjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NDAzQjA3ODY3QzExMUU4OTU1RUJDRDdEQjExN0NGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDJDNzgzMDY3Q0UxMUU4OTU1RUJDRDdEQjExN0NGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqdVduYAAAF5SURBVHja7NxJDoMgFIDh2mu6c8fpPQId4sI0WkDeRPu/hJ1h+GKRsVPO+Uacxx0CgAACCCCAAAIIIOIwXiPpUtqem59p3dIyYDuXXf3nmna/21754LRlvI80EE76qPtqATQE0gGOPNDuFc0jIZ3g5K0tskCFAtNAOKm2720GGgWppo5qQNGRauumChQVqaVO6kDRkFrrYgIUBelKHcyAvJGulm0K5IXUU6Y5kDVSb1kuQFZIEmW4AWkjSeXtCqSFJJmnO5BCg0TBQwAJ9hcab2MMIIHPsUp/FgqoY7Sr2dnHArowmVQdLoQEalirsRhLxQQqAViNxkMDFZCspiqxgRqQklLZ8YEqkDRXAqoSW88SkvzE6KT5zDNQZKrx41MNJqssd7BgxpIri/Zs+8QHYuPQGUeqLA4vRALi+EtQnM5ROkfwXI/gcYiTY8AcJOcqguVVBC6zcB2KC3Xa98X+8krmxL+/fA+2ngECCCCAAAIIIICIw3gIMAC6gmoP9K42PAAAAABJRU5ErkJggg==')}.mip-story-close:active{opacity:.6}.mip-story-shares{background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQyQzc4MzU2N0NFMTFFODk1NUVCQ0Q3REIxMTdDRjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQyQzc4MzY2N0NFMTFFODk1NUVCQ0Q3REIxMTdDRjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RDJDNzgzMzY3Q0UxMUU4OTU1RUJDRDdEQjExN0NGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDJDNzgzNDY3Q0UxMUU4OTU1RUJDRDdEQjExN0NGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhAGK/EAAAS5SURBVHja7JtLbE1BGMePlnpdlWi6IPVIqEelLDxi4bWSYlVVYUEiqUclSCSEhQWxEmyQIISKRARdEIJVPRISRZC4goVHxatNxCNX0F7/L/1u3Ezm9LxmzuN2vuSXdM65Z843/858Z+Y7Z/pks1nLmL0VGQmMQEYgI5ARyAhkBDIC9VLrG8E9i8F0MA9UgQlgDEgxHWAjOBsHgfqENJMmURaAVWARKHX4fQYMBX8KvQdRj2gA28BwD9f1ByU2AtHxqWCwD3/+gifgm+srqAdpoAisB+1Zf7bTpt5S8DgbzDpAldu26OhB1eA4mOnwu/fgFkiDF+AL+AHego821ywEUwL6NwysA5ujGGI0nA6CATbnX4ImcJ5F8WpfFfk5NOwYREH4EFhvc/4e2AWu06gOcJ8bYC9YCQa5iGMDArdMQbwpARdsxnsbqNcU53qiArzqIQ6dCisGFfN8ZYnk3Dmw1tMTQ41VgBYwNg4z6cMScbrAJrA8RuL8iUKgBn4aiI4s40BtxUScy/xUDVWgaokIXdxrLsZMnKXgd5gC0TUnJE8Imlc0F5I4fgWiwDtDEpAPFZo4fgSitdUe4Vgbi1Zw4vgRaA0oE45tidHTSqk4XgWiOdNW4dhdXjYUpDheBVogSVnsLmRxvAq0UijTYvNaQsTpFFdYqgXqy5nAfGtKUM95KJQfq16szpIs+CojXnhe4oWymzootbwDtIB9Hq5zLdA2wbl3CRInEG6H2GShfLMQA3KQGDRRKD/vDeJ4EWi0JHWaVHEGgn6qBUoJ5c+axBmhWZztPOun3PYKlU8x0WZoCopHNQbkcqHedpVBOixLaYw5Y4Rymcoh9tOhIapsH/jEf19UHJBTDm2ynSG7MXqhl/+qt1yTQI84DqU0ZAjKJW1S1oPeCOXxGodZl6b0yXiHNgUS6LnDvCgJ5msu51agtFCem0CB5jq0KZBALUJ5JKhMkDiV7HNPbQokUKskqNUnSKB6SYBuVSkQfXh01SGBFmcTfb3KbVKaUWySBL2aBIhTIwnQrpN9Xr5RpDkTfdyUn5e+A+bEXKDbYHZe+QMYpaMHUYX7hWN047oYi1MniGNxG/7q6EG56fprYR1DLw4nuZ2ZhryuS3P6JGcdvCZz7avXxSpVvFOSvzkSw95zRBDHYt+9/SN9fsHaKklLNEbwJZkdjRL/Wtl3T3X5daAaZAQHOkFtDMSpZV/yLcM+W2EJRDRI/ku/Ihapln0QrcFvnUEdOiZxpjOi4dYo6TlZ9tGKSqBi0GzzJekZkApBmBTfS2bN7GNkAuU+A7YTiV4w1mkUp47vYSdO4Fy2KkeLbYZbzm6BGoXC1HCddnYsaM9RLVCOtZKnW76l+R35OB91j+Nr0z3Un2EflLVJx34x+gL2JJjmIo1La7lnVveLSNrM8p3PDeEcMuVxqni5MNqhvgdgNXiqtDUat0NtCLAdyou1872KdLRF945DWg/RBpctlrcNdW6MVuUHeEmhbR0Y1pZMehee25K52PK3WzD3LusKOG117/zRvmUzLIHEvBJ9Zz2fswATrf+begfybzLcK17z24c055Dve0lVJFWgRJnZN28EMgIZgYxARiAjkBGot9o/AQYASDRwsINjlt4AAAAASUVORK5CYII=')}.icon-wrap{position:absolute;left:17px;top:14px;height:35px}.icon-wrap .icon,.icon-wrap .icon-name,.icon-wrap .icon-type{display:inline-block;vertical-align:middle}.icon-wrap .icon{width:35px;height:35px;border-radius:50%;-webkit-border-radius:50%;overflow:hidden}.icon-wrap .icon-name{font-size:16px;color:#ffffff;margin-left:8px;margin-right:6px}.icon-wrap .icon-type{position:relative;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;vertical-align:middle;text-align:center;height:10px;line-height:11px;font-size:10px;color:#ffffff;border:1px solid rgba(255,255,255,0.5);border-radius:2px;-webkit-border-radius:2px;padding:1px 2px;font-family:Arial,Helvetica,sans-serif}.mip-stoy-audio{background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzJDNkRCQTI2N0NGMTFFODk1NUVCQ0Q3REIxMTdDRjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzJDNkRCQTM2N0NGMTFFODk1NUVCQ0Q3REIxMTdDRjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMkM2REJBMDY3Q0YxMUU4OTU1RUJDRDdEQjExN0NGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMkM2REJBMTY3Q0YxMUU4OTU1RUJDRDdEQjExN0NGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvfuaLwAAAS1SURBVHja7JtpSFRRFMdnzMo2rQyzrKD8IkRku5EY2p5Y2IJlUEErJQkV0Yc2UDCiKIiiD1F9KFok+iJFtBJFRUEpVFC4lAu2WZa22/S/cAceh/Nm3rx5b+bZuwd+H+6b85b5z33n3nvOHa/P5/Mo0zevEkgJpARSAimBlEBKICWQEkgZZzEOepZscAV8BW/BSTBY9SCPpws4CIrE85DPGkAGaHSrQL3BBTAngM9ZUOhGgVJABUgP4vcd9HRbDBoNHjDiNMhYpLUebotB4nU6D/qQ409BLmgC9KG8bhFoPTgMYsnxy6AAtMm2YwTyCIEiQAzY5+PtCOhC/KkZucccUA/egzVWPXskxOkBypkv3QE265xjRqA6cs5e4HW6QEngPvOFv4H8AOeZEaiaOe+QkwVK03noZjAxyLlmBJoFvjPnljlRoKmghXnYZ2C4gfPNCCTIZO77Fywz+13MjGJ9wVqQB1JBHOMTL5cQWrsJFoFPRsaOMEaxCeAaSCCTzcmg0u5RLFeOEqHaSdAthPuY7UF+csBvco0noKudr9g88CdEYUT33mliNAlXIMFG5jq77BIoUSemBLIXYInJL2dEoAXgHaiVAZrzuUSu8xOk2iFQKbmR6Em7wVDQT4dwgrwRgZrI83CTw2TwkVzrtB0CVZGb7LB5/mREoDqDo1UR8ROxaZjVAv0kN0lxgEBiovmDeYXGEb840Ej8Sq0WiFqCAwTyz3tamblWHPErJj7VRgeOzi6Q3pC+jfj0Z3rbKCPP4qSkvVkTE9AScmwL6K5pt0g/WiToVFWNcGwvqNW0k8Bc4nObtMe7SaBf4BA5RgWiy4w0Nwkk7CJpTyTtWtIeZmXK1ccsWFvtTHSaXKy2yoWysC9kwToQNGvaP4wUBP6nHuQhmYL4ICLHuu0V8xci/dbOpGBob3OVQENAoqZdTz4fTtrNbhMol7Qfk/ZI0n7uJoFEfFlHjl0l7RzSrnLTKLYCnCLxJUUTh0Ra+D2JUZngnht6ULycSWvtOAnS+UScFrk3wBWv2BGQrGmL+c8+4rOJmVR2WJm0/0JWwkMcsprfzvgWEZ9sxifD6nxQJbnBTgcIVCCziFq7LvcBaPcEPCI+d+xIuZYwOek9sggYrZz0G+JTL0vdgRJlPplks1yg/kzyO5iJrN1KGwWq0Xz+GaSTz0X1oo1cp8LOuliuibqYf3tLVxsEmg1eg5cgi8lD01erLdSSj5na/CxZiwrV7soSTKQKhyeYaxRHqjYv5hMb5NR+BOjF+PRhVstiK+9C8NDm2vx2UEaO3QLTwV+n7DAbw9StfDJxvsrGHrSWGdkaQuy9EdsfNADc0HnljgaJS2YEms/EyHYwyck7zGLBgQBxaZCFAtUwRcS8zrBHUVAof00f0/0zLBLoFZmnFXaWTZzauFSrE5dWWyDQTFli/gCWW/Xckd4nPQCcA9OYz46BYvCbGW3++33SWsSe6P0B4tIMZkesJ1pE888sS2XeJtgfVUTeZnK0HjKa+SDxN6cpoC6I35mo5nId8Ie6RCnWDJ3ekyXjkmsF8gfhxWANGCuXKeVgK/js9h7k7HKJEkgJpARSAimBlEBKICWQEkgZZ/8EGADUHYH/5J6b0QAAAABJRU5ErkJggg==')}.mip-stoy-audio[muted]{background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQyQzc4Mzk2N0NFMTFFODk1NUVCQ0Q3REIxMTdDRjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQyQzc4M0E2N0NFMTFFODk1NUVCQ0Q3REIxMTdDRjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RDJDNzgzNzY3Q0UxMUU4OTU1RUJDRDdEQjExN0NGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDJDNzgzODY3Q0UxMUU4OTU1RUJDRDdEQjExN0NGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pl6qyekAAAYWSURBVHja7FtrbBVFFL5tsZJSoFgi8jJWQ2LRGiSKPxSlVyOU2hB8BKVGSjBXI+EPCQ0kSkJCgsYHCUn9YVB8JUZ+yKtUBSG0iomxQRRRfIClAvXRYmmRQq29fmMOyeTk7L37mN27N5mTfMmd2Zmzs9/uzJw559yCdDqdsOIshZYCS5AlyBJkCbIEWYIsQZYgK3En6H5gL3AB6AJeByaHcJ9HgTNAJzAva2t11MgxRgCvpmX5FZho8F5PA/9q+s9k65NrckYDH6czy2ZD91oNDDPdsSZoKvBNOrucM3CvDYLeS0BtXAmaCZwWBv0zUC3U+71PAdAk6PsbqHGjIxfkPAD0C4P+HBgPjDVEUBHwtqCrF5jtVk/U5CwHhoRBbwVGUhsTBF0JbBf0/ElfbyJuBBUCrzisMc/TVEgYImgUsFfQoaZ0pdexR0FOCfCBMOB/gJTQPghBZcBBof8JoMLP+MMmZwLwhTDgPmCuQx+/BF0NHBL6fhvElgqTnOn05iTjrypDPz8EXQt8L/T7EigP8hxhkZMEzgoDVm94Upa+XgmaBnQIfVqBMUGfxU+nMrJK1VzvIiI4pJ1qN1DqQr8XgqpoDFxaaO1bTDvXb8D8KAiqpRt6lSaySxIGCZoF9Aht3weK6YzXx+yfKWEStNDhy8gk6mC40uOg3BCUZA+vn9uKNEORG6TbwiLoKuAvj+S0A3U+T/cXmXGnX1c6B4T7bWT2lMIaoV11GAStFQ56jbS1hrHIr6Gvb4is78v1jwGDwkOvy0D2Eda2LQyC2tlNVkV02td3vJQwxYddTOEagdDbTRPEp9eEiM9wqwRfjiJrGV2/k7b6TmCOcKI/7NfH5HaAptwPfrDewZezSGujW9Bdgv3zBOuvTJEr8p0g9eY3Cfe+IDi6vmNtXmDXRwo7mqvFOq5RjSLgDWAFq+8H5gO7Wf1LrJwCSrXyRWAPa3NXvoZ9ioGtQAOr7wGSwAGhzxbgsFYuAxawNm2sfGs+ElQC7AIeZPUqDHQP0O4UnAGahDCSLkdYeZqbAY2IETljgWbh0+8A7gOOZ+n/ISvPYuWTrHxNPn1B44H9AjnHgNkuyFFyGujTylPZ9fOsXJovBE2h9WEmqz9E5JzyoKuXTdfAsyXXBN0AfApUsvrPaEHu9qiv3IEsJeNYuS/uBN1E5FzH6tV2PBc451GfWnRHaeUT7Pr1rHwqzgTdBrQCE1n9NqCOEhi8Sp0wRXW5hZWPxpWgOcA+Nh2UvAk8AgySLbQEqHe5dhSScahLCysnWflrV6ON+KhRS0cFLpuYL2eHdu0tF3qXMH1/kFdRdxNzN0lV3M5ii+iQyWW9cG4aZnH0THpV1OL3LP6hFUIQMVan+WUOvpzGgE579dU1s7bdpEOP6h5lbV42TRA/CXtxfq908OU8ZSCqIaW1LGVtFgsvZnrYHsXnXPZbJzzAILlOg0Y1UkK7XWwtU+vQj6xNcxgu12eFL2At+XydPv2NwgMMuHDkuyWom7X5hYILmV7QsBd3q9eohhQPe9EhL2ez0LafwjWm4mL6wtwj7EozhJ3rvTDjYjXCLtTK2hRT4I6LeoA7DAcOH6KI6U8UROQ6fhBS+SaHHVmdR4mPl2U5S3NpER6uy63NYSg/qMAheSoVVWxexdfrWRrbGPqauHRQckEiQoKknW2HEFSMLLujnNJMuByjtBSe/RUmQY1CXzUFx+Uq/WUSJShx+YrFzpR1vFNLgbk5BIIaBHur1+P0NkpQhUOC1EE6++ht64U03AbDBJ0VwkPJoDPE72m+kpxaFaz+E3KWc2fVgOCc30IoMeQluKT9HqL/ZOwPrNVnErhkE22n9FunLNfXHLJAVHLBjQa+oAVkG6mD6MOmApheO9xN85rLuxmsah1LHVJXztMfTQoMJpJHTlANrR1S9piXLXSGcD7SU+fuFYzM2BNU5+DL2eDzxspuesdlItaBfCCoUxj4agMDeNxhyuryZD4QdJzlHT5jOFFqnwM5bR6SP3NKUDWtGydN7hDs/KT0fkTJWmrdUf9CHJ1LchT+X1yt2H89W4IsQZYgS5AlyBJkCbJiCfIo/wkwAEb1xvYv6O9NAAAAAElFTkSuQmCC')}.mip-story-progress-bar{position:absolute;right:17px;left:17px;display:flex !important;display:-webkit-flex !important;display:-webkit-box;height:14px;-webkit-align-items:center !important;align-items:center !important;-webkit-box-align:center;-moz-box-align:center;-webkit-box-pack:center;-moz-box-pack:center;-webkit-justify-content:center !important;justify-content:center !important}.mip-story-progress-bar>:last-child{margin-right:0 !important}.mip-story-page-progress-bar{overflow:hidden;height:2px;margin:0 6px 0 0;list-style-type:none;border-radius:2px;-webkit-border-radius:2px;background:rgba(255,255,255,0.3);-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 !important;flex:1 !important}.mip-story-page-progress-bar-active{transition:transform 200ms ease !important;-webkit-transform:scale(1, 1) !important;transform:scale(1, 1) !important;-webkit-transform-origin:left;transform-origin:left}.mip-story-page-progress-bar-visited{background:#fff;-webkit-transform:scale(1, 1) !important;transform:scale(1, 1) !important}.mip-story-page-progress-value{width:100%;height:100%;background:#fff;-webkit-transform:scale(0, 1);transform:scale(0, 1);-webkit-transform-origin:left;transform-origin:left}mip-story-layer[template=fill],mip-story-layer[template=cover],mip-story-layer[template=vertical],mip-story-layer[template=horizontal],mip-story-layer[template=thirds]{display:flex !important;display:-webkit-flex !important;display:-webkit-box;height:100%}mip-story-layer[template=magazine]{padding-right:0 !important;overflow:hidden}[flex-area=magazine-img]{position:relative;overflow:hidden;height:70%;max-height:450px;margin-top:10px}[flex-area=magazine-content]{padding-right:32px !important;height:34%;overflow:hidden;display:flex !important;display:-webkit-flex !important;display:-webkit-box;flex-direction:column;justify-content:center;min-height:100px;text-align:left}mip-story-layer[template=magazine]>h1{font-size:28px}[flex-area=magazine-content]>h1{font-size:28px;text-align:left}[flex-area=magazine-content]>h2{font-size:20px;text-align:left}[flex-area=magazine-content]>p{font-size:100%;line-height:200%;margin-top:11px}mip-story-layer[template=center],mip-story-layer[template=under-center],mip-story-layer[template=under-left],mip-story-layer[template=under-right],mip-story-layer[template=up-left],mip-story-layer[template=up-center],mip-story-layer[template=up-right]{display:flex !important;display:-webkit-flex !important;flex-direction:column;font-size:16px}mip-story-layer[template=center]>h1,mip-story-layer[template=under-center]>h1,mip-story-layer[template=under-left]>h1,mip-story-layer[template=under-right]>h1,mip-story-layer[template=up-left]>h1,mip-story-layer[template=up-center]>h1,mip-story-layer[template=up-right]>h1{font-size:45px}mip-story-layer[template=center]>h2,mip-story-layer[template=under-center]>h2,mip-story-layer[template=under-left]>h2,mip-story-layer[template=under-right]>h2,mip-story-layer[template=up-left]>h2,mip-story-layer[template=up-center]>h2,mip-story-layer[template=up-right]>h2{font-size:40px}mip-story-layer[template=center]>h3,mip-story-layer[template=under-center]>h3,mip-story-layer[template=under-left]>h3,mip-story-layer[template=under-right]>h3,mip-story-layer[template=up-left]>h3,mip-story-layer[template=up-center]>h3,mip-story-layer[template=up-right]>h3{font-size:35px}mip-story-layer[template=center]>h4,mip-story-layer[template=under-center]>h4,mip-story-layer[template=under-left]>h4,mip-story-layer[template=under-right]>h4,mip-story-layer[template=up-left]>h4,mip-story-layer[template=up-center]>h4,mip-story-layer[template=up-right]>h4{font-size:30px}mip-story-layer[template=center]>h5,mip-story-layer[template=under-center]>h5,mip-story-layer[template=under-left]>h5,mip-story-layer[template=under-right]>h5,mip-story-layer[template=up-left]>h5,mip-story-layer[template=up-center]>h5,mip-story-layer[template=up-right]>h5{font-size:25px}mip-story-layer[template=center]>h6,mip-story-layer[template=under-center]>h6,mip-story-layer[template=under-left]>h6,mip-story-layer[template=under-right]>h6,mip-story-layer[template=up-left]>h6,mip-story-layer[template=up-center]>h6,mip-story-layer[template=up-right]>h6{font-size:20px}mip-story-layer[template=center]>p,mip-story-layer[template=under-center]>p,mip-story-layer[template=under-left]>p,mip-story-layer[template=under-right]>p,mip-story-layer[template=up-left]>p,mip-story-layer[template=up-center]>p,mip-story-layer[template=up-right]>p{font-size:16px;line-height:30px}mip-story-layer[template=under-left]>h1,mip-story-layer[template=up-left]>h1{text-align:left}mip-story-layer[template=under-right]>h1,mip-story-layer[template=up-right]>h1{text-align:right}mip-story-layer[template=under-center],mip-story-layer[template=under-left],mip-story-layer[template=under-right]{justify-content:flex-end}mip-story-layer[template=up-center],mip-story-layer[template=up-left],mip-story-layer[template=up-right]{justify-content:flex-start}mip-story-layer[template=center]{justify-content:center;align-items:center}mip-story-layer[template=up-center],mip-story-layer[template=under-center]{align-items:center}mip-story-layer[template=up-left],mip-story-layer[template=under-left]{align-items:flex-start}mip-story-layer[template=up-right],mip-story-layer[template=under-right]{align-items:flex-end}mip-story-layer[template=fill]>:first-child,mip-story-layer[template=cover]>:first-child{position:absolute;top:0;right:0;bottom:0;left:0;display:block;width:auto;height:auto;object-fit:cover}mip-story-layer[template=fill]>:not(:first-child),mip-story-layer[template=cover]>:not(:first-child){display:none !important}mip-story-layer[template=fill]>mip-anim img,mip-story-layer[template=fill]>mip-img img,mip-story-layer[template=fill]>mip-video video,mip-story-layer[template=cover]>mip-anim img,mip-story-layer[template=cover]>mip-img img,mip-story-layer[template=cover]>mip-video video{object-fit:cover !important}mip-story-layer[template=horizontal]{flex-direction:row;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-flex-direction:row}mip-story-layer[template=vertical]{flex-direction:column;margin-bottom:16px;-webkit-align-content:flex-start;align-content:flex-start;-webkit-align-items:stretch;align-items:stretch;-webkit-flex-direction:column}mip-story-layer[template=vertical]>*{width:100%}mip-story-layer[template=thirds]{flex-direction:column !important;-webkit-box-orient:vertical;-webkit-flex-direction:column !important}[flex-area=upper-third],[flex-area=middle-third],[flex-area=lower-third]{height:33%}.mip-backend{position:absolute;z-index:100002;top:0;left:0;display:none !important;width:100%;height:100%;text-align:center;color:#fff;background:#000}.mip-backend[active]{display:block !important}.mip-backend[current]{display:block !important}.mip-backend-outer{overflow-y:scroll;width:100%;height:100%;padding-top:86px;-webkit-box-sizing:border-box;box-sizing:border-box;background-size:cover;-webkit-overflow-scrolling:touch;overflow-scrolling:touch}.mip-backend-outer::-webkit-scrollbar{display:none}.mip-backend-outer .mip-backend-background{background-size:cover;position:absolute;left:0;top:0;width:100%;height:100%;-webkit-filter:blur(5px);filter:blur(5px);opacity:.3}.mip-story-middle{display:flex !important;display:-webkit-flex !important;display:-webkit-box;flex-direction:column !important;-webkit-box-orient:vertical;-webkit-box-pack:center;-webkit-flex-direction:column !important;-webkit-justify-content:center !important;justify-content:center !important}.mip-story-middle .mip-backend-preview{margin-top:0}.mip-backend-preview-mask{position:absolute;top:0;left:0;width:100%;height:100%;opacity:.5;background:#000}.mip-backend-preview-thumbnail{position:relative}.mip-backend-preview-thumbnail:active{opacity:.6}.mip-backend-preview-replay-btn{width:24px;height:24px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAAEi6oPRAAAAAXNSR0IArs4c6QAACPhJREFUeAHtnGeoHUUUx32aaBILUTGIohE1ih0/GCviJwtEBAtKUMgnC4lYPggigoJKhNhQQROQfLNFv9h7oqigIliwBoypiC12jeX5++/d2Xt2dmbLvXvve944cN6cOed/yszOzu7O7n3bbOOV8fHxp6G1nrjTRKEy1yolyNq5RibtGiccoAM8Xb4J4LO8pNjaFlE4SR+Lt/t8WaFdK3FZCajiPMA+YNtOLuA0KSjnZELHIJwljWurVpvyi/4kcuofLcDxyMcSUPLHSQN1LZDsNJiVpRKUpZMxnk/kd0IzMrEPVJtylABjGcow0ppmjJ0yNjb2d0GJ7Ww5oPxSUAYE4PZM0OmfBOIEAXylCNuXZa9DfXzCVJpUAOREpQJWqdax3aESVRdAQl/2mpXsVHKxOiJPmEN0G2A3pfg7u1KPA3CccxqpK1egnEucLIK+TZ09klNWNTA6PDUsq9aV+jGW/8SAYK52OGHgdUJ2B9sqY06s3OGpu45o/CqFBdbhZeOKW2ymY3hiHWOL4ezvrh54/EdeLaAJj+lNib3+UN5qYhzEdvyMTw0qmwjlqAk+hk0GG1+HxgC15WnXimtvbQ8doDJ6EXLToKF5MrP/zoYnzeqDxl4wSG3nJ7Y0FqaCA5s4S23yBwvh16nigTrOgk6cIcrkBExBVzu5q5Fv5xyodnLV3XPFSMHoKJYdgGmcZn8Yk2YsAWZDH0NNywoMyhKrnwiONkSiv4N8HlQYHWQzoEXQd1Co3G0zALBLCgqfFyiPCHg5wzrphcfn0oBf3TtmcyXnF0VyY2mM1uYALTUCcf50MbMQCOY7oepMMUCGMPvbmFlcmHOMYssAcwi6NrE7EzLLDHjuchc0H6xwW5K534QoPu4Y5TDYztNRGmmiR0dpaLHanOYzOSoOmRYwV26eFFm5bFRPREKE3S/N4fckPo0pqSCphpkUAQ8Lxkbor9JnDzoxYr5rkolexz40ILFHt50YPpPtFhPngsoYgNcYA8ceXGkYAeDgSufE1Nf78MKtgw/AeBdk30Hb+bq0/Rv1KuirtD2H+jgodv/zPutdsn+S4vuvSPIG6HfT0xi7DkX14eg/peS2/GSC3QV9ZrLZDP8mdCNUvsfYUhLXmeB12d8AntpG/MwHDp+qG70Cd1nmtBcG56dHAughfAm0T8gv8rnQCihWuruGOAD0QQrsPJlFnL4W8PZYCFsmw8dMaGPA1/nOzuqcLFcDcE97Drs6B+ihgaPdnDNT3yFXpl28lqL0H3taPW3xv8omAJ87UXJ9Rfm4B270cJ1zVtIghuZfsGRmaOd4iCMy5QAYYj3oxUuaWShPuSRTDJAh5o9e3M4cQmjvGqP7jIPILZaQle87iMAxnwReboPrlNsrJ4hZDlBu4i9XQs8ZwYIBxq3lelI+l9XKfFgge1cXvskeViZpHJvQmiHHDoazCf0URAxZaBPaa8ixg+H+P8uCw2KEOmR6rkoKC+Sujp+wmiTshXXlRCRCDnp+U5mXxO/wnb/DToioBxTiI/jSCJcNMyni/mVin+tGaHsjFNv/W70avSLOAhs3Z4JiZVSZQ7bTIJb70MWFPbbg2WnSen0B0KLAi/VJ0DWgnT3gpiCwDyH+/elRfBaz/jEIvQnayWJ65fF9mtfh8mRcIIwO8g1pP+H0TWtsp0Pf+D4b+cF4qu8gbb9DXetCDE6bFckHV6mtqz6OJVNnS+8ejBfGHCB/H/oc+hraAzoGKntyOYktvdfB9Ffo2grXvR7ry/vLIGJNMkdDuTWrJMHl6BqdEJWHLJJXI7E6gcFZ0CmQdmjb+J5qA35egp6BnmQa/Ew9+QuDoa+rNN2SjzCoh11WE/BSaPs2RqvvGUQi2ue/BboUiu31l+Wq+1UtGhshfb2omSCZPpDaEdKKtzek7VX7SEKzVtGidDkz7NUqNH3RVuz50CzoWWzeq7IJ6nGkJTz7FAG+qmhp1wdstZb3YFBPiC/loMuAXiuFLgWIC0WvHILbgsivKKDZOvbCljdxoAvumoAjX/QEgp5fY5VnEdcSU7c1i6DYBzCosnKt9YQ0eMAtJspjrNsjfx89i5QyOpKNrhDRgC0pyEe3XhvT/GLVrQqHsvkAYaSbWf/tqw20iUbrb2NbGp/MDTnqdNQlvqwE33VlTnwGTwtLvK1HN5D3DX4ebbfJ+56SfhVUhfggtFe0soDsCgb+YUEhqZYFdEUf6+nCUVlyoUFrkbP7DdaB3j4O5VE/l9QAG/Rnge1giM/Co9R3MbHBGerGTJbUEBj6fAhkN4JodkuWAqIXuuIcd18GGlGG3mrrLnTn/2fSZZS6dwiVlSM6JsFuMQAXQR9BOpNug2bo+q91J/kBBbUtGtGJ36oOdmV4Qj3bXAzpuccvi3kW+d4XbnVtZsmLdtoYvv8feIzCaDIg35tBcexXo9C3NvqgU2xmwFGzp9iAg1ERxfZXdh6VDvbdD84p+1mmO8V04zRSd829DpRm0CsBY+0MnhmQb30iZkryE2k3dUz91tY3GpEeMyj2Ay8zRuMLIiYjKabj+ondhZA2/bsv02jokzx9exwqg/9EfBIMNx1/KND5NVlqKO2P2yx2C43uaGYWo8PQv6W2w4Z/I9dLFLGHVs2uE3LgEWnQr+fNgFh2NY3ibRDC+Rbl8UtGZFz0kK7fiW72+ueab8PE3xminAOFnvDlQF9eB98t/RcGj9y1pfwwFCu31+oH1nLk/zDAOl1L4z+zcZ/2J/hqJ+3Uz9SH1RocC8JoNrQBihW91Wz15x02fr88uc2CXo0ln8qv6TeOztk6Lw+1sJ3Rd7A+HZDD7tAyqKosBhBfa3rJA4c6IqGfTvnJ6Mr3GJT7h2C9xKyyIcZM6CpIp31V0dp6XpXPVvQE0scDZaefn6wGTe+jlkDzoH2gWkcQnN5lHQvpVkQDX+f9O7Cs3AuX+yFdK4NQ1wnBD4eCr2+zFIfLaDZdAk2p24eh4khsNqTfzvXyf1Iwa1T0w9RHIc3oWjOy7mC06qxOUDowDZzWpSOhOSnpdmF3aDfIlh9o6Mck66G10KeQPmp6lxcKX1APvPwLxaeA9DukJlMAAAAASUVORK5CYII=');background-size:cover}.mip-backend-close{position:absolute;z-index:1000;top:12px;left:7px}.mip-story-hint{position:absolute;z-index:100005;top:0;right:0;bottom:0;left:0;display:none}.mip-story-hint-shadow{display:block;width:25%;height:100%;background:-webkit-linear-gradient(left, rgba(0,0,0,0.5), transparent) !important;background:linear-gradient(90deg, rgba(0,0,0,0.5), transparent) !important}.mip-story-hint-damping-hide .mip-story-hint-shadow{display:none}.mip-story-hint-system,.mip-story-hint-rotate{display:none;height:100%}.mip-story-page-switch{display:none;width:100%;height:100%}.mip-story-page-switch-lt,.mip-story-page-switch-rt,.mip-story-page-switch-lt .mip-story-page-switch,.mip-story-page-switch-rt .mip-story-page-switch,.mip-story-page-switch-lt .mip-story-page-switch-left,.mip-story-page-switch-rt .mip-story-page-switch-right{display:block !important}.mip-story-page-switch-lt .mip-story-page-switch-right,.mip-story-page-switch-rt .mip-story-page-switch-left{display:none}.mip-story-hint-system{display:none;opacity:.8;background:#000}.mip-story-system-show .mip-story-hint-system{display:flex !important;display:-webkit-flex !important;display:-webkit-box}.mip-story-hint-left,.mip-story-hint-middle,.mip-story-hint-right{height:100%;-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 !important;flex:1 !important}.mip-story-hint-left{background:url(https://www.mipengine.org/static/img/mip-story/mip-story-arrow.png);background-repeat:no-repeat;background-position:26px;background-size:30px 30px}.mip-story-hint-middle-top{position:absolute;top:0;left:50%;width:1px;height:40%;font-size:13px;background:#ddd}.mip-story-hint-middle-icon{position:absolute;top:40%;right:0;left:0;display:flex !important;display:-webkit-flex !important;display:-webkit-box;flex-direction:column !important;height:20%;color:#fff;-webkit-align-items:center !important;align-items:center !important;-webkit-box-align:center;-moz-box-align:center;-webkit-box-orient:vertical;-webkit-box-pack:center;-moz-box-pack:center;-webkit-flex-direction:column !important;-webkit-justify-content:center !important;justify-content:center !important}.mip-story-hint-middle-icon span{display:block;margin-bottom:10px;text-align:center}.mip-story-hint-middle-bottom{position:absolute;bottom:0;left:50%;width:1px;height:40%;background:#fff}.mip-story-hint-right{background:url(https://www.mipengine.org/static/img/mip-story/mip-story-arrow.png);background-repeat:no-repeat;background-position:26px;background-size:30px 30px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.mip-story-hint-touch-icon{width:46px;height:50px;margin-top:14px;background:url(https://www.mipengine.org/static/img/mip-story/mip-story-touch.png);background-repeat:no-repeat;background-size:contain}.mip-story-hint-rotate{position:absolute;z-index:100003;top:0;left:0;width:100%;height:100%;text-align:center;color:#fff;background:#000}.mip-story-hint-rotate p{margin-top:10px}.mip-story-hint-rotate mip-img{width:47px;height:45px}@media all and (orientation:portrait){.mip-story-hint-rotate{display:none}}@media all and (orientation:landscape){.mip-story-hint{display:block !important}.mip-story-hint-rotate{display:flex !important;display:-webkit-flex !important;display:-webkit-box;flex-direction:column !important;-webkit-align-items:center !important;align-items:center !important;-webkit-box-align:center;-moz-box-align:center;-webkit-box-orient:vertical;-webkit-box-pack:center;-moz-box-pack:center;-webkit-flex-direction:column !important;-webkit-justify-content:center !important;justify-content:center !important}}.mip-story-share{position:absolute;z-index:1000010;bottom:-500%;width:100%}.mip-story-share-show{bottom:0;-webkit-transition:bottom 200ms ease;transition:bottom 200ms ease}.mip-story-share mip-share{width:100%}.mip-story-share-cancel{display:block;width:100%;height:30px;padding:10px 0;border-top:1px solid #eee;font-size:16px;text-align:center;color:#000;background:#fff}@keyframes spread{0%{transform:scale(1, 1)}100%{transform:scale(1.5, 1.5)}}@-webkit-keyframes spread{0%{transform:scale(1, 1)}100%{transform:scale(1.5, 1.5)}}.mip-story-page-switch-left{position:absolute;top:50%;left:17px;display:block;display:none}.mip-story-page-switch-right{position:absolute;top:50%;right:45px;display:block;display:none}.mip-story-page-switch-left>:first-child,.mip-story-page-switch-right>:first-child{position:absolute;top:50%;width:28px;height:28px;opacity:.1;border-radius:14px;background:#fff;background:linear-gradient(center, rgba(255,255,255,0.3), transparent);background:-webkit-linear-gradient(center, rgba(255,255,255,0.3), transparent);-webkit-animation:100ms;-webkit-animation:spread 1s ease-out;animation:spread 1s ease-out;animation-delay:100ms;-webkit-animation-fill-mode:backwards;animation-fill-mode:backwards}.mip-story-page-switch-left>:nth-child(2),.mip-story-page-switch-right>:nth-child(2){position:absolute;top:50%;display:block;width:28px;height:28px;opacity:.1;border-radius:14px;background:#fff}.recommend-wrap{text-align:left;border-top:1px solid rgba(255,255,255,0.3);padding-top:2px;margin:30px 17px 0 17px}.recommend-wrap .readmore{font-size:18px;line-height:3;color:#ffffff}.mip-backend-control{width:100%;height:44px;padding:10px 17px 0 17px;-webkit-box-sizing:border-box;box-sizing:border-box;margin-bottom:42px;background:rgba(0,0,0,0.5);z-index:9}.mip-backend-control .mip-story-close{position:relative;width:24px;height:24px;background-repeat:no-repeat;background-position:center center;background-size:24px 24px;float:right;left:0;top:0;margin-left:25px}.mip-backend-control .mip-backend-share{float:right}.mip-backend-control .mip-backend-share:active{opacity:.6}.mip-backend-control .mip-backend-preview-share-btn{display:block;width:24px;height:24px;background-repeat:no-repeat;background-position:center center;background-size:24px 24px;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAolBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ELnaCAAAANXRSTlMAgPj8BfLTaC8MA+sQCOeze3gi3ttFNcvHuplgTkEe48Cin1s9GMStp4VyVks6KhSrlG5Qjc71RbUAAAKGSURBVFjDpZbnmqpADIYjIEUFVOwFu2tfy+b+b+08JDtSBlbO8P5jeOabkC+ZAJ/on7ZQhRUiPgxQpo8RwxBU6SDR7IMiNWT0trKAwG+pC5ik0LOVBZw7KWhTVQGAk04SE0NVALYeKYxCVQHY7YWfigJgPBT8dO0DCTDn+n/5aXf8QEdCLN169BiU8HO+9jAGBM5XKT8dy8QUyd747GfDamISLVimYvM+9Od1GG8dTqzrN2TYjYr95BAZ72fQAIkPfookoX64GFDMpsjP1m/4S/uTxb3c/nR4v1ei6Vp5frpc7WMpsL+SlUzEhFa+ynbsnN3uxpmh53UDynKlDWfx2KXMTqA0fY7gnUfKiulCWdqcg0NqgGg2lKTlI3F8fzG1zxNKMghoe30GghnVD5TE0mi/2YU3VAJzKIW7RmLlJkKiG7egd8L0eO+aXIQWZGtoBmkat1dntV/oiJDgxY20GKQOiSw10+dYfh0FCdEjEmO6JtIpTITkTEf5V9puKdyT/0Jw905Sm8+WBbaecC+Dl0zhZoFZgDnpknvMLdGX1zh4ze9cwngyOXfJPcEzWr9Rjn7E7vr97KRG260n3JOJpAM6xEemt3Ezs3ETuycTcFeJEkHPMjLD1XjE7sm0olcdgCs3uF5zstM5HCXck5lH7/pgc5DeVh7vTeFePhZVQcjuLXcgCwj3CjhGZzgmD80GyALCvSLW0cFjvlJz/1TZvWKivRpfcA05QZJ7Mj38xTfy42P3itGQCfJH0vY0gz/5RkYbgBo2Mk9QZI7EGFS58Ad0QZUXCdRAmQ31rwvKTHlIq8K9NIQKnBDxAhVoI+6hCjUKoFIEJlTiiVOoxDkwoBKtAVTiH/QZqL/ije01AAAAAElFTkSuQmCC')}.recommend-item{display:block;height:88px;margin-bottom:20px;color:#fff;position:relative}.recommend-item.recommend-now{padding-left:17px;margin-bottom:0}.recommend-item.recommend-now .mip-backend-preview{left:17px;top:0}.recommend-item .mip-backend-preview{position:absolute;left:0;top:0;width:122px;height:88px;background-size:cover;background-repeat:no-repeat;background-position:0 0;overflow:hidden}.recommend-item .mip-backend-preview .mip-backend-preview-thumbnail{width:122px;height:88px}.recommend-item .mip-backend-preview .mip-backend-preview-thumbnail span{display:block;width:24px;height:24px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.recommend-detail{height:100%;padding-left:130px;padding-right:36px;text-align:left;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-pack:center;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.recommend-detail span,.recommend-detail p{font-size:18px;line-height:1.5;color:#fff;padding:0}.recommend-detail span:nth-child(2),.recommend-detail p:nth-child(2){font-size:10px;opacity:.6;padding-top:2px}.recommend-detail span a,.recommend-detail p a{color:#fff}@media only screen and (min-width:320px){.recommend-detail{padding-right:30px}.recommend-detail p{font-size:14px}}@media only screen and (min-width:375px){.recommend-detail{padding-right:32px}.recommend-detail p{font-size:16px}}@media only screen and (min-width:414px){.recommend-detail{padding-right:34px}.recommend-detail p{font-size:18px}}")}window.MIP?require(["mip-story"],function(component){registerComponent(window.MIP,component)}):require(["mip","mip-story"],registerComponent)}()}});